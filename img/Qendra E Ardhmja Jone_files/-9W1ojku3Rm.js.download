if (self.CavalryLogger) { CavalryLogger.start_js(["TzlVI"]); }

__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"};}),null);
__d('VideoPlayerShakaPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoPlayerShakaPerformanceTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerShakaPerformanceTypedLogger1,j);return this;};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=j;return this;};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=j;return this;};h.prototype.setCode=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.code=j;return this;};h.prototype.setError=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.error=j;return this;};h.prototype.setEvent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.event=j;return this;};h.prototype.setIsLive=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=j;return this;};h.prototype.setLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.length=j;return this;};h.prototype.setResource=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.resource=j;return this;};h.prototype.setResult=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.result=j;return this;};h.prototype.setSession=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.session=j;return this;};h.prototype.setState=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.state=j;return this;};h.prototype.setVC=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=j;return this;};var i={client_time_begin:true,client_time_end:true,code:true,error:true,event:true,is_live:true,length:true,resource:true,result:true,session:true,state:true,vc:true,video_id:true};f.exports=h;}),null);
__d('TaggedTimeRanges',['sprintf'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;}),null);
__d("Shaka",["Promise"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=c('Promise'),i={};(function(j){var k,l=this;function m(lm,mm){var nm=lm.split("."),om=l;nm[0] in om||!om.execScript||om.execScript("var "+nm[0]);for(var pm;nm.length&&(pm=nm.shift());)nm.length||void 0===mm?om[pm]?om=om[pm]:om=om[pm]={}:om[pm]=mm;}function n(lm,mm){function nm(){}nm.prototype=mm.prototype;lm.kc=mm.prototype;lm.prototype=new nm();lm.prototype.constructor=lm;lm.ic=function(om,pm,qm){return mm.prototype[pm].apply(om,Array.prototype.slice.call(arguments,2));};}function o(){}function p(lm){var mm=console[lm];mm?mm.bind||(console[lm]=function(){mm.apply(console,arguments);}):console[lm]=function(){};}p("error");p("warn");p("info");p("log");p("debug");function q(lm){u[lm]={ja:t(),end:NaN};}function r(lm){if(lm=u[lm])lm.end=t();}function s(lm){return (lm=u[lm])&&lm.end?lm.end-lm.ja:NaN;}var t=j.performance&&j.performance.now?j.performance.now.bind(j.performance):Date.now,u={};function v(lm,mm,nm,om){this.id=lm;this.bandwidth=mm||0;this.lang=nm||"unknown";this.streamInfoID=om;this.active=false;}m("shaka.player.AudioTrack.compare",function(lm,mm){return lm.lang<mm.lang?-1:lm.lang>mm.lang?1:lm.bandwidth<mm.bandwidth?-1:lm.bandwidth>mm.bandwidth?1:0;});function w(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}w.prototype.clone=function(){var lm=new w();lm.maxHeight=this.maxHeight;lm.minHeight=this.minHeight;lm.maxWidth=this.maxWidth;lm.maxBandwidth=this.maxBandwidth;lm.minBandwidth=this.minBandwidth;return lm;};function x(){this.fontSize="100%";this.fontColor=aa;this.fontOpacity=ca;this.backgroundColor=ba;this.backgroundOpacity=ca;this.fontEdge=da;}m("shaka.player.TextStyle",x);function y(lm){var mm=[];mm.push("font-size: "+lm.fontSize);mm.push("color: "+z(lm.fontColor,lm.fontOpacity));mm.push("background-color: "+z(lm.backgroundColor,lm.backgroundOpacity));for(var nm=[],om=0;om<lm.fontEdge.length;++om){var pm=lm.fontEdge[om].slice(3,6);nm.push(z(lm.fontEdge[om].slice(0,3),lm.fontOpacity)+" "+pm.join("px ")+"px");}mm.push("text-shadow: "+nm.join(","));return mm.join("; ");}function z(lm,mm){return "rgba("+lm.concat(mm).join(",")+")";}var aa=[255,255,255],ba=[0,0,0];x.StandardColors={WHITE:aa,BLACK:ba,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ca=1;x.StandardOpacities={OPAQUE:ca,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var da=[];x.EdgeStyles={NONE:da,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ea(lm,mm){this.id=lm;this.lang=mm||"unknown";this.enabled=this.active=false;}m("shaka.player.TextTrack.compare",function(lm,mm){return lm.lang<mm.lang?-1:lm.lang>mm.lang?1:0;});function fa(lm,mm,nm,om,pm,qm,rm){this.id=lm;this.bandwidth=mm||0;this.width=nm||0;this.height=om||0;this.streamInfoID=pm;this.fbQualityLabel=qm;this.fbQualityClass=rm;this.active=false;}function ga(lm,mm){var nm=lm.width*lm.height,om=mm.width*mm.height;return nm<om?-1:nm>om?1:lm.bandwidth<mm.bandwidth?-1:lm.bandwidth>mm.bandwidth?1:0;}m("shaka.player.VideoTrack.compare",ga);function ha(){var lm="CustomEvent" in j;if(lm)try{new CustomEvent("");}catch(mm){lm=false;}lm||(j.CustomEvent=ia);}m("shaka.polyfill.CustomEvent.install",ha);function ia(lm,mm){var nm=document.createEvent("CustomEvent"),om=mm||{bubbles:false,cancelable:false,detail:null};nm.initCustomEvent(lm,!!om.bubbles,!!om.cancelable,om.detail);return nm;}function ja(){var lm=Element.prototype;lm.requestFullscreen=lm.requestFullscreen||lm.mozRequestFullScreen||lm.msRequestFullscreen||lm.webkitRequestFullscreen;lm=Document.prototype;lm.exitFullscreen=lm.exitFullscreen||lm.mozCancelFullScreen||lm.msExitFullscreen||lm.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ka);document.addEventListener("webkitfullscreenerror",ka);document.addEventListener("mozfullscreenchange",ka);document.addEventListener("mozfullscreenerror",ka);document.addEventListener("MSFullscreenChange",ka);document.addEventListener("MSFullscreenError",ka);}m("shaka.polyfill.Fullscreen.install",ja);function ka(lm){var mm=lm.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),mm=new Event(mm,lm);lm.target.dispatchEvent(mm);}function la(){return h.reject(Error("The key system specified is not supported."));}function ma(lm){return null==lm?h.resolve():h.reject(Error("MediaKeys not supported."));}function na(){throw new TypeError("Illegal constructor.");}na.prototype.createSession=function(){};na.prototype.setServerCertificate=function(){};function oa(){throw new TypeError("Illegal constructor.");}oa.prototype.getConfiguration=function(){};oa.prototype.createMediaKeys=function(){};function pa(lm){this.c=[];this.b=[];this.ga=qa;if(lm)try{lm(this.da.bind(this),this.a.bind(this));}catch(mm){this.a(mm);}}var qa=0;function ra(){j.Promise||(j.Promise=pa,j.Promise.resolve=sa,j.Promise.reject=ta,j.Promise.all=ua,j.Promise.race=va,j.setImmediate?(ya=function(lm){return j.setImmediate(lm);},za=function(lm){return j.clearImmediate(lm);}):(ya=function(lm){return j.setTimeout(lm,0);},za=function(lm){return j.clearTimeout(lm);}));}m("shaka.polyfill.Promise.install",ra);function sa(lm){var mm=new pa();mm.da(lm);return mm;}function ta(lm){var mm=new pa();mm.a(lm);return mm;}function ua(lm){function mm(sm,tm,um){sm.ga==qa&&(pm[tm]=um,om++,om==pm.length&&sm.da(pm));}var nm=new pa();if(!lm.length)return nm.da([]),nm;for(var om=0,pm=Array(lm.length),qm=nm.a.bind(nm),rm=0;rm<lm.length;++rm)lm[rm]&&lm[rm].then?lm[rm].then(mm.bind(null,nm,rm),qm):mm(nm,rm,lm[rm]);return nm;}function va(lm){for(var mm=new pa(),nm=mm.da.bind(mm),om=mm.a.bind(mm),pm=0;pm<lm.length;++pm)lm[pm]&&lm[pm].then?lm[pm].then(nm,om):nm(lm[pm]);return mm;}pa.prototype.then=function(lm,mm){var nm=new pa();switch(this.ga){case 1:wa(this,nm,lm);break;case 2:wa(this,nm,mm);break;case qa:this.c.push({Qa:nm,Ia:lm}),this.b.push({Qa:nm,Ia:mm});}return nm;};pa.prototype.then=pa.prototype.then;pa.prototype.catch=function(lm){return this.then(void 0,lm);};pa.prototype["catch"]=pa.prototype.catch;pa.prototype.da=function(lm){if(this.ga==qa){this.Ea=lm;this.ga=1;for(lm=0;lm<this.c.length;++lm)wa(this,this.c[lm].Qa,this.c[lm].Ia);this.c=[];this.b=[];}};pa.prototype.a=function(lm){if(this.ga==qa){this.Ea=lm;this.ga=2;for(lm=0;lm<this.b.length;++lm)wa(this,this.b[lm].Qa,this.b[lm].Ia);this.c=[];this.b=[];}};function wa(lm,mm,nm){bb.push(function(){if(nm&&"function"==typeof nm){try{var pm=nm(this.Ea);}catch(om){mm.a(om);return;}pm instanceof pa?pm==mm?mm.a(new TypeError("Chaining cycle detected")):pm.then(mm.da.bind(mm),mm.a.bind(mm)):mm.da(pm);}else 1==this.ga?mm.da(this.Ea):mm.a(this.Ea);}.bind(lm));null==ab&&(ab=ya(xa));}function xa(){for(;bb.length;){null!=ab&&(za(ab),ab=null);var lm=bb;bb=[];for(var mm=0;mm<lm.length;++mm)lm[mm]();}}function ya(){return 0;}function za(){}var ab=null,bb=[];function cb(){var lm=HTMLVideoElement.prototype;!lm.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in lm&&(lm.getVideoPlaybackQuality=db);}m("shaka.polyfill.VideoPlaybackQuality.install",cb);function db(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function eb(lm,mm){for(var nm=[],om=0;om<lm.length;++om){for(var pm=false,qm=0;qm<nm.length&&!(pm=mm?mm(lm[om],nm[qm]):lm[om]===nm[qm]);++qm);pm||nm.push(lm[om]);}return nm;}function fb(){return Date.now()+gb;}var gb=0;function hb(lm){this.b=lm;this.c=0==ib;this.a=0;}var ib=1;function jb(lm){return lm.a<lm.b.byteLength;}function kb(lm){var mm=lm.b.getUint8(lm.a);lm.a+=1;return mm;}function lb(lm){var mm=lm.b.getUint32(lm.a,lm.c);lm.a+=4;return mm;}function mb(lm){var mm,nm;lm.c?(mm=lm.b.getUint32(lm.a,true),nm=lm.b.getUint32(lm.a+4,true)):(nm=lm.b.getUint32(lm.a,false),mm=lm.b.getUint32(lm.a+4,false));if(2097151<nm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");lm.a+=8;return nm*Math.pow(2,32)+mm;}function nb(lm){if(lm.a+16>lm.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var mm=new Uint8Array(lm.b.buffer,lm.a,16);lm.a+=16;return mm;}function ob(lm,mm){if(lm.a+mm>lm.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");lm.a+=mm;}function pb(lm){this.b=lm;this.a=new hb(lm);qb||(qb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var qb;function rb(lm){var mm;mm=sb(lm);if(7<mm.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var nm=0,om=0;om<mm.length;om++)nm=256*nm+mm[om];mm=nm;nm=sb(lm);lm:{for(om=0;om<qb.length;om++)if(xd(nm,qb[om])){om=true;break lm;}om=false;};if(om){nm=lm.b.byteLength-lm.a.a;}else{if(8==nm.length&&nm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var om=nm[0]&(1<<8-nm.length)-1,pm=1;pm<nm.length;pm++)om=256*om+nm[pm];nm=om;}nm=lm.a.a+nm<=lm.b.byteLength?nm:lm.b.byteLength-lm.a.a;om=new DataView(lm.b.buffer,lm.b.byteOffset+lm.a.a,nm);ob(lm.a,nm);return new tb(mm,om);}function sb(lm){var mm=kb(lm.a),nm;for(nm=1;8>=nm&&!(mm&1<<8-nm);nm++);if(8<nm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var om=new Uint8Array(nm);om[0]=mm;for(mm=1;mm<nm;mm++)om[mm]=kb(lm.a);return om;}function tb(lm,mm){this.id=lm;this.a=mm;}function ub(lm){if(8<lm.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==lm.a.byteLength&&lm.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var mm=0,nm=0;nm<lm.a.byteLength;nm++)var om=lm.a.getUint8(nm),mm=256*mm+om;return mm;}var vb={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function wb(lm){this.c=Math.exp(Math.log(.5)/lm);this.a=this.b=0;}wb.prototype.sample=function(lm,mm){var nm=Math.pow(this.c,lm);this.b=mm*(1-nm)+nm*this.b;this.a+=lm;};function xb(lm){return lm.b/(1-Math.pow(lm.c,lm.a));}function yb(lm){var mm=new CustomEvent(lm.type,{detail:lm.detail,bubbles:!!lm.bubbles}),nm;for(nm in lm)nm in mm||(mm[nm]=lm[nm]);return mm;}function zb(lm){return new CustomEvent("error",{detail:lm,bubbles:true});}function ac(lm,mm,nm){dc(mm);dc(nm);return nm==mm||lm>=bc&&nm==mm.split("-")[0]||lm>=cc&&nm.split("-")[0]==mm.split("-")[0]?true:false;}var bc=1,cc=2;function dc(lm){lm=lm.toLowerCase().split("-");var mm=ec[lm[0]];mm&&(lm[0]=mm);return lm.join("-");}var ec={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function fc(lm){return Object.keys(lm).map(function(mm){return lm[mm];});}function gc(lm,mm){return jc(lm,mm,"boolean");}function hc(lm,mm,nm){lm=jc(lm,mm,"number");if(null==lm)return null;if(isNaN(lm)||lm==Number.NEGATIVE_INFINITY||lm==Number.POSITIVE_INFINITY)throw new RangeError("'"+mm+"' must be finite.");if(null!=nm&&lm<nm)throw new RangeError("'"+mm+"' must be >= "+nm);return lm;}function ic(lm,mm){return jc(lm,mm,"string");}function jc(lm,mm,nm){lm=lm[mm];if(null==lm)return null;if(typeof lm!=nm)throw new TypeError("'"+mm+"' must be a "+nm+".");return lm;}function kc(lm,mm,nm){lm=lm[mm];if(null==lm)return null;if(!(lm instanceof nm))throw new TypeError("'"+mm+"' must be an instance of "+nm.name+".");return lm;}function lc(){this.a={};}lc.prototype.push=function(lm,mm){this.a.hasOwnProperty(lm)?this.a[lm].push(mm):this.a[lm]=[mm];};lc.prototype.set=function(lm,mm){this.a[lm]=mm;};lc.prototype.get=function(lm){return (lm=this.a[lm])?lm.slice():null;};function mc(lm){var mm=[],nm;for(nm in lm.a)mm.push.apply(mm,lm.a[nm]);return mm;}function nc(lm,mm,nm){if(lm=lm.a[mm])for(mm=0;mm<lm.length;++mm)lm[mm]==nm&&(lm.splice(mm,1),--mm);}function oc(lm){var mm=[],nm;for(nm in lm.a)mm.push(nm);return mm;}function pc(){this.a=new lc();}pc.prototype.destroy=function(){rc(this);this.a=null;};function qc(lm,mm,nm,om){mm=new sc(mm,nm,om);lm.a.push(nm,mm);}pc.prototype.za=function(lm,mm){for(var nm=this.a.get(mm)||[],om=0;om<nm.length;++om){var pm=nm[om];pm.target==lm&&(pm.za(),nc(this.a,mm,pm));}};function rc(lm){for(var mm=mc(lm.a),nm=0;nm<mm.length;++nm)mm[nm].za();lm.a.a={};}function sc(lm,mm,nm){this.target=lm;this.type=mm;this.a=nm;this.target.addEventListener(mm,nm,false);}sc.prototype.za=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function tc(lm){this.Ga=new lc();this.U=lm;}m("shaka.util.FakeEventTarget",tc);k=tc.prototype;k.addEventListener=function(lm,mm,nm){nm||this.Ga.push(lm,mm);};k.removeEventListener=function(lm,mm,nm){nm||nc(this.Ga,lm,mm);};k.dispatchEvent=function(lm){lm.hasOwnProperty("srcElement")||(delete lm.srcElement,Object.defineProperty(lm,"srcElement",{get:function(){return null;}}));if(lm.hasOwnProperty("target")){lm.target=this;}else{delete lm.target;var mm=this;Object.defineProperty(lm,"target",{get:function(){return mm;},set:function(om){mm=om;}});}if(lm.hasOwnProperty("currentTarget")){lm.currentTarget=null;}else{delete lm.currentTarget;var nm=null;Object.defineProperty(lm,"currentTarget",{get:function(){return nm;},set:function(om){nm=om;}});}return uc(this,lm);};k.Xa=false;k.ka=function(lm,mm){return this.dispatchEvent(yb({type:"debug/shakaEvent",bubbles:true,detail:{type:lm,event:mm}}));};function uc(lm,mm){mm.currentTarget=lm;for(var nm=lm.Ga.get(mm.type)||[],om=0;om<nm.length;++om){var pm=nm[om];try{pm.handleEvent?pm.handleEvent(mm):pm.call(lm,mm);}catch(qm){}}lm.U&&mm.bubbles&&uc(lm.U,mm);return mm.defaultPrevented;}function vc(lm){tc.call(this,null);this.a=new wb(3);this.g=new wb(10);this.h=lm||500000;this.f=0;}n(vc,tc);m("shaka.util.EWMABandwidthEstimator",vc);vc.prototype.sample=function(lm,mm){if(!(65536>mm)){lm=Math.max(lm,50);var nm=8000*mm/lm,om=lm/1000;this.a.sample(om,nm);this.g.sample(om,nm);this.dispatchEvent(yb({type:"bandwidth"}));this.f=Date.now();}};vc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(xb(this.a),xb(this.g));};vc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};vc.prototype.supportsCaching=function(){return false;};function wc(lm,mm,nm){vc.call(this,nm);this.c=lm||0;this.b=void 0===mm?Infinity:mm;}n(wc,vc);m("shaka.util.EWMACacheBandwidthEstimator",wc);wc.prototype.sample=function(lm,mm){lm<=this.c&&8000*mm/lm>this.b||vc.prototype.sample.call(this,lm,mm);};wc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function xc(){vc.call(this);}n(xc,vc);m("shaka.util.EWMASignedURLBandwidthEstimator",xc);xc.prototype.supportsCaching=function(){return true;};function yc(){var lm,mm,nm=new h(function(om,pm){lm=om;mm=pm;});nm.resolve=lm;nm.reject=mm;nm.destroy=yc.prototype.destroy;return nm;}yc.prototype.destroy=function(){this.catch(function(){});var lm=Error("Destroyed!");lm.type="destroy";this.reject(lm);};function zc(lm){lm.split("").reduce(function(mm,nm,om){return mm+(om&&0==om%4?" "+nm:nm);});}function ad(){this.Da=new yc();this.c=false;this.aa=null;this.a=[];this.b=null;}function bd(lm,mm){if(lm.c)throw Error("Cannot append to a running task!");lm.a.push(mm);}ad.prototype.start=function(){if(this.c)throw Error("Task already started!");this.c=true;this.a.unshift(function(){});cd(this,void 0);};ad.prototype.end=function(){this.a.splice(1);};function cd(lm,mm){var nm=lm.a[0](mm),om;nm?(om=nm[0],lm.b=nm[1]):(om=h.resolve(),lm.b=null);om.then(ed(lm,function(pm){this.aa?(this.a=[],this.b=null,dd(this)):(this.a.shift(),this.a.length?cd(this,pm):(this.Da.resolve(pm),this.b=null));})).catch(ed(lm,function(pm){this.a=[];this.b=null;this.aa?dd(this):this.Da.reject(pm);}));}function dd(lm){function mm(){var nm=Error("Task aborted.");nm.type="aborted";this.Da.reject(nm);j.setTimeout(function(){this.aa.resolve();this.aa=null;}.bind(this),5);}lm.f?lm.f.then(function(){this.f=null;mm.call(this);}.bind(lm)):mm.call(lm);}function ed(lm,mm){return mm.bind(lm);}function fd(lm,mm,nm,om){MediaSource.isTypeSupported(mm);tc.call(this,om);om=lm.addSourceBuffer(mm);this.l=lm;this.c=om;this.B=nm;this.v=new pc();this.g=this.F=null;this.A=false;this.s=null;this.m=false;this.b=[];this.D=0;this.j=this.f=this.a=null;this.C=0;this.h=mm&&mm.charAt(0);qc(this.v,this.c,"updateend",this.G.bind(this));}n(fd,tc);fd.prototype.ba=function(){return {SourceBuffer:this.c};};function gd(lm,mm,nm){lm.Xa&&lm.ka(mm,{type:lm.h.charAt(0),segment:nm,sourceBuffer:lm.c});}var hd=1/60;fd.prototype.destroy=function(){nd(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.v.destroy();this.l=this.c=this.v=null;};function id(lm,mm){for(var nm=lm.c.buffered,om=0;om<nm.length;++om){var pm=nm.start(om)-hd,qm=nm.end(om)+hd;if(mm>=pm&&mm<=qm)return nm.end(om)-mm;}return 0;}function jd(lm,mm,nm){mm=mm.endTime?mm.endTime-mm.startTime:1;var om=new eh();om.a=3;om.i=1000*mm;om.c=1000*lm.C;om.m=lm.F;om.j=nm;return om;}function kd(lm,mm,nm,om,pm){var qm;lm.g&&(qm=lm.g.getOperationLogger("fetch").setResource(mm.url.toString()).setLength(Math.round(1000*(mm.endTime-mm.startTime))));if(lm.a)return lm=Error("Cannot fetch ("+lm.h+"): previous operation not complete."),lm.type="stream",qm&&qm.setError(lm).log(),h.reject(lm);lm.a=new ad();nm!=lm.c.timestampOffset&&(lm.c.timestampOffset=nm);nm=jd(lm,mm,pm);var rm=ph(mm.url,nm,lm.B,lm.g);gd(lm,"SegmentFetching",mm);var sm=mh.prototype.g.bind(mm.url);lm.s&&lm.m&&(om=lm.s);var tm=0;om&&(lm.s=om,lm.m=false,bd(lm.a,function(){return [om.then(function(wm){wm.ma>tm&&(tm=wm.ma);return rd(this,wm,null);}.bind(this)),this.i.bind(this)];}.bind(lm)));bd(lm.a,ed(lm,function(){return [rm.then(function(wm){gd(this,"SegmentFetched",mm);wm.ma>tm&&(tm=wm.ma);this.B.getBandwidth();return rd(this,wm,mm);}.bind(this)),function(){gd(this,"SegmentFailed",mm);sm();return this.i();}.bind(this)];}));var um=0==lm.c.buffered.length&&0==lm.b.length,vm=null;bd(lm.a,function(){if(0==this.c.buffered.length){var wm=Error("Failed to buffer segment ("+this.h+").");wm.type="stream";return [h.reject(wm)];}um&&(wm=mm.startTime,vm=this.c.buffered.start(0)-wm);wm=bi(this.b,mm.startTime);0<=wm?this.b.splice(wm+1,0,mm):this.b.push(mm);}.bind(lm));return qd(lm).then(function(){qm&&qm.log();return h.resolve({$:vm,Cb:tm});}.bind(lm),function(wm){qm&&qm.setError(wm).log();return h.reject(wm);});}function ld(lm){if(lm.a)return lm=Error("Cannot clear ("+lm.h+"): previous operation not complete."),lm.type="stream",h.reject(lm);lm.a=new ad();bd(lm.a,function(){var mm;mm:if(0==this.c.buffered.length){mm=h.resolve();}else{try{this.c.remove(0,this.l.duration);}catch(nm){mm=h.reject(nm);break mm;}this.b=[];mm=this.f=new yc();};return [mm,this.i.bind(this)];}.bind(lm));return qd(lm);}function md(lm,mm){if(lm.a){var nm=Error("Cannot clearAfter ("+lm.h+"): previous operation not complete.");nm.type="stream";return h.reject(nm);}lm.a=new ad();bd(lm.a,function(){return [sd(this,mm),this.i.bind(this)];}.bind(lm));return qd(lm);}function nd(lm){lm.a?(lm=lm.a,lm.aa?lm=lm.aa:lm.c?(lm.b&&(lm.f=lm.b()),lm.aa=new yc(),lm=lm.aa):(lm.c=true,lm=h.resolve())):lm=h.resolve();return lm;}function od(lm){for(var mm=lm.currentTime,nm=mm,om=0;om<lm.buffered.length;om++)if(mm<=lm.buffered.start(om)){nm=lm.buffered.start(om);break;}return nm;}function pd(lm){for(var mm=lm.currentTime,nm=0;nm<lm.buffered.length;nm++)if(mm>=lm.buffered.start(nm)&&mm<=lm.buffered.end(nm)-.05)return false;return true;}function qd(lm){lm.a.start();return lm.a.Da.then(ed(lm,function(){this.a=null;})).catch(ed(lm,function(mm){this.a=null;return h.reject(mm);}));}function rd(lm,mm,nm){var om;if(lm.g){var pm=nm?nm.url.toString():"init";om=lm.g.getOperationLogger("append").setResource(pm).setLength(mm.byteLength);}try{lm.c.appendBuffer(mm);}catch(qm){return om&&om.setError(qm).log(),h.reject(qm);}lm.f=new yc();lm.j=nm;return lm.f.then(function(){om&&om.log();},function(rm){om&&om.setError(rm).log();return h.reject(rm);});}function sd(lm,mm){if(0==lm.c.buffered.length)return h.resolve();var nm=bi(lm.b,mm);if(-1==nm||nm==lm.b.length-1)return h.resolve();try{lm.c.remove(lm.b[nm+1].startTime,lm.l.duration);}catch(om){return h.reject(om);}lm.b=lm.b.slice(0,nm+1);lm.f=new yc();return lm.f;}fd.prototype.i=function(){if(this.f){if("open"==this.l.readyState){var lm=Error("Previous operation aborted.");lm.type="abort";this.f.reject(lm);this.c.abort();this.A&&(this.m=true);this.f=new yc();}return this.f;}return h.resolve();};fd.prototype.G=function(){this.f&&(this.j&&(gd(this,"SegmentAppended",this.j),this.j=null),this.f.resolve(),this.f=null);};function td(lm){return String.fromCharCode.apply(null,lm);}m("shaka.util.Uint8ArrayUtils.toString",td);function ud(lm){for(var mm=new Uint8Array(lm.length),nm=0;nm<lm.length;++nm)mm[nm]=lm.charCodeAt(nm);return mm;}m("shaka.util.Uint8ArrayUtils.fromString",ud);m("shaka.util.Uint8ArrayUtils.toBase64",function(lm,mm){var nm=void 0==mm?true:mm,om=j.btoa(td(lm)).replace(/\+/g,"-").replace(/\//g,"_");return nm?om:om.replace(/=*$/,"");});function vd(lm){return ud(j.atob(lm.replace(/-/g,"+").replace(/_/g,"/")));}m("shaka.util.Uint8ArrayUtils.fromBase64",vd);m("shaka.util.Uint8ArrayUtils.fromHex",function(lm){for(var mm=new Uint8Array(lm.length/2),nm=0;nm<lm.length;nm+=2)mm[nm/2]=j.parseInt(lm.substr(nm,2),16);return mm;});function wd(lm){for(var mm="",nm=0;nm<lm.length;++nm){var om=lm[nm].toString(16);1==om.length&&(om="0"+om);mm+=om;}return mm;}m("shaka.util.Uint8ArrayUtils.toHex",wd);function xd(lm,mm){if(!lm&&!mm)return true;if(!lm||!mm||lm.length!=mm.length)return false;for(var nm=0;nm<lm.length;++nm)if(lm[nm]!=mm[nm])return false;return true;}function yd(){this.h=this.a="";this.l=false;this.s=this.m=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function zd(lm,mm){var nm=new yd();nm.a=lm.a;nm.h=lm.h;nm.l=lm.l;nm.m=lm.m;nm.s=lm.s;nm.g=lm.g;nm.i=lm.i;nm.f=lm.f;nm.j=lm.j;nm.c=lm.c?new Uint8Array(lm.c.buffer):null;ae(nm,lm.b);ae(nm,mm.b);return nm;}function ae(lm,mm){var nm=lm.b.concat(mm.map(function(om){return {initData:new Uint8Array(om.initData.buffer),initDataType:om.initDataType};}));lm.b=eb(nm,be);}function be(lm,mm){return lm.initDataType==mm.initDataType&&xd(lm.initData,mm.initData);}function ce(lm,mm,nm,om){this.a=[];om&&this.a.push(om);}m("shaka.player.DrmSchemeInfo",ce);ce.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};ce.PersistentState={OPTIONAL:0,REQUIRED:1};ce.createUnencrypted=function(){return new ce(0,0,0,null);};function de(lm,mm){try{var om=new fe(lm,mm);return h.resolve(om);}catch(nm){return h.reject(nm);}}function ee(lm){var mm=this.mediaKeys;mm&&mm!=lm&&he(mm,null);delete this.mediaKeys;(this.mediaKeys=lm)&&he(lm,this);return h.resolve();}function fe(lm,mm){this.a=this.keySystem=lm;var nm=true;"org.w3.clearkey"==lm&&(this.a="webkit-org.w3.clearkey",nm=false);var om=false,pm;pm=document.getElementsByTagName("video");pm=pm.length?pm[0]:document.createElement("video");for(var qm=0;qm<mm.length;++qm){var rm=mm[qm],sm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:rm.initDataTypes,sessionTypes:["temporary"]},tm=false;if(rm.audioCapabilities)for(var um=0;um<rm.audioCapabilities.length;++um){var vm=rm.audioCapabilities[um];vm.contentType&&(tm=true,pm.canPlayType(vm.contentType.split(";")[0],this.a)&&(sm.audioCapabilities.push(vm),om=true));}if(rm.videoCapabilities)for(um=0;um<rm.videoCapabilities.length;++um)vm=rm.videoCapabilities[um],vm.contentType&&(tm=true,pm.canPlayType(vm.contentType,this.a)&&(sm.videoCapabilities.push(vm),om=true));tm||(om=pm.canPlayType("video/mp4",this.a)||pm.canPlayType("video/webm",this.a));"required"==rm.persistentState&&(nm?(sm.persistentState="required",sm.sessionTypes=["persistent-license"]):om=false);if(om){this.b=sm;return;}}nm="Unsupported keySystem";if("org.w3.clearkey"==lm||"com.widevine.alpha"==lm)nm="None of the requested configurations were supported.";nm=Error(nm);nm.name="NotSupportedError";nm.code=DOMException.NOT_SUPPORTED_ERR;throw nm;}fe.prototype.createMediaKeys=function(){var lm=new ge(this.a);return h.resolve(lm);};fe.prototype.getConfiguration=function(){return this.b;};function ge(lm){this.g=lm;this.b=null;this.a=new pc();this.c=[];this.f={};}function he(lm,mm){lm.b=mm;rc(lm.a);mm&&(qc(lm.a,mm,"webkitneedkey",lm.Vb.bind(lm)),qc(lm.a,mm,"webkitkeymessage",lm.Ub.bind(lm)),qc(lm.a,mm,"webkitkeyadded",lm.Sb.bind(lm)),qc(lm.a,mm,"webkitkeyerror",lm.Tb.bind(lm)));}k=ge.prototype;k.createSession=function(lm){var mm=lm||"temporary";if("temporary"!=mm&&"persistent-license"!=mm)throw new TypeError("Session type "+lm+" is unsupported on this platform.");lm=this.b||document.createElement("video");lm.src||(lm.src="about:blank");mm=new je(lm,this.g,mm);this.c.push(mm);return mm;};k.setServerCertificate=function(){return h.reject(Error("setServerCertificate not supported on this platform."));};k.Vb=function(lm){lm=yb({type:"encrypted",initDataType:"webm",initData:lm.initData});this.b.dispatchEvent(lm);};k.Ub=function(lm){var mm=ie(this,lm.sessionId);mm&&(lm=yb({type:"message",messageType:void 0==mm.keyStatuses.Na()?"licenserequest":"licenserenewal",message:lm.message}),mm.b&&(mm.b.resolve(),mm.b=null),mm.dispatchEvent(lm));};k.Sb=function(lm){if(lm=ie(this,lm.sessionId))le(lm,"usable"),lm.a&&lm.a.resolve(),lm.a=null;};k.Tb=function(lm){var mm=ie(this,lm.sessionId);if(mm){var nm=Error("EME v0.1b key error");nm.errorCode=lm.errorCode;nm.errorCode.systemCode=lm.systemCode;!lm.sessionId&&mm.b?(nm.method="generateRequest",45==lm.systemCode&&(nm.message="Unsupported session type."),mm.b.reject(nm),mm.b=null):lm.sessionId&&mm.a?(nm.method="update",mm.a.reject(nm),mm.a=null):(nm=lm.systemCode,lm.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?le(mm,"output-restricted"):1==nm?le(mm,"expired"):le(mm,"internal-error"));}};function ie(lm,mm){var nm=lm.f[mm];return nm?nm:(nm=lm.c.shift())?(nm.sessionId=mm,lm.f[mm]=nm):null;}function je(lm,mm,nm){tc.call(this,null);this.f=lm;this.h=false;this.a=this.b=null;this.c=mm;this.g=nm;this.sessionId="";this.expiration=NaN;this.closed=new yc();this.keyStatuses=new me();}n(je,tc);function ke(lm,mm,nm){if(lm.h)return h.reject(Error("The session is already initialized."));lm.h=true;var om;try{if("persistent-license"==lm.g){if(nm){om=ud("LOAD_SESSION|"+nm);}else{var qm=new Uint8Array(mm);om=ud("PERSISTENT|"+td(qm));}}else om=new Uint8Array(mm);}catch(pm){return h.reject(pm);}lm.b=new yc();try{lm.f.webkitGenerateKeyRequest(lm.c,om);}catch(rm){if("InvalidStateError"!=rm.name)return lm.b=null,h.reject(rm);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,om);}catch(sm){this.b.reject(sm),this.b=null;}}.bind(lm),10);}return lm.b;}k=je.prototype;k.Ua=function(lm,mm){if(this.a){this.a.then(this.Ua.bind(this,lm,mm)).catch(this.Ua.bind(this,lm,mm));}else{this.a=lm;var nm,om;"webkit-org.w3.clearkey"==this.c?(nm=td(new Uint8Array(mm)),om=JSON.parse(nm),"oct"!=om.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),nm=vd(om.keys[0].k),om=vd(om.keys[0].kid)):(nm=new Uint8Array(mm),om=null);try{this.f.webkitAddKey(this.c,nm,om,this.sessionId);}catch(pm){this.a.reject(pm),this.a=null;}}};function le(lm,mm){lm.keyStatuses.Sa(mm);var nm=yb({type:"keystatuseschange"});lm.dispatchEvent(nm);}k.generateRequest=function(lm,mm){return ke(this,mm,null);};k.load=function(lm){return "persistent-license"==this.g?ke(this,null,lm):h.reject(Error("Not a persistent session."));};k.update=function(lm){var mm=new yc();this.Ua(mm,lm);return mm;};k.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};k.remove=function(){return "persistent-license"!=this.g?h.reject(Error("Not a persistent session.")):this.close();};function me(){this.size=0;this.a=void 0;}var ne;k=me.prototype;k.Sa=function(lm){this.size=void 0==lm?0:1;this.a=lm;};k.Na=function(){return this.a;};k.forEach=function(lm){this.a&&lm(ne,this.a);};k.get=function(lm){if(this.has(lm))return this.a;};k.has=function(lm){var mm=ne;return this.a&&xd(new Uint8Array(lm),new Uint8Array(mm))?true:false;};function oe(lm){this.systemIds=[];this.cencKeyIds=[];this.a=[];lm=new hb(new DataView(lm.buffer));try{for(;jb(lm);){var nm=lm.a,om=lb(lm),pm=lb(lm);1==om?om=mb(lm):0==om&&(om=lm.b.byteLength-nm);if(1886614376!=pm){ob(lm,om-(lm.a-nm));}else{var qm=kb(lm);if(1<qm){ob(lm,om-(lm.a-nm));}else{ob(lm,3);var rm=wd(nb(lm)),sm=[];if(0<qm)for(var tm=lb(lm),um=0;um<tm;++um){var vm=wd(nb(lm));sm.push(vm);}var wm=lb(lm);ob(lm,wm);this.cencKeyIds.push.apply(this.cencKeyIds,sm);this.systemIds.push(rm);this.a.push({start:nm,end:lm.a-1});lm.a!=nm+om&&ob(lm,om-(lm.a-nm));}}}}catch(mm){}}function pe(lm,mm){try{var om=new qe(lm,mm);return h.resolve(om);}catch(nm){return h.reject(nm);}}function qe(lm,mm){this.keySystem=lm;for(var nm=false,om=0;om<mm.length;++om){var pm=mm[om],qm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:pm.initDataTypes,sessionTypes:["temporary"]},rm=false;if(pm.audioCapabilities)for(var sm=0;sm<pm.audioCapabilities.length;++sm){var tm=pm.audioCapabilities[sm];if(tm.contentType){var rm=true,um=tm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,um)&&(qm.audioCapabilities.push(tm),nm=true);}}if(pm.videoCapabilities)for(sm=0;sm<pm.videoCapabilities.length;++sm)tm=pm.videoCapabilities[sm],tm.contentType&&(rm=true,um=tm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,um)&&(qm.videoCapabilities.push(tm),nm=true));rm||(nm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==pm.persistentState&&(qm.persistentState="required",qm.sessionTypes=["persistent-license"]);if(nm){this.a=qm;return;}}nm=Error("Unsupported keySystem");nm.name="NotSupportedError";nm.code=DOMException.NOT_SUPPORTED_ERR;throw nm;}qe.prototype.createMediaKeys=function(){var lm=new se(this.keySystem);return h.resolve(lm);};qe.prototype.getConfiguration=function(){return this.a;};function re(lm){var mm=this.mediaKeys;mm&&mm!=lm&&te(mm,null);delete this.mediaKeys;return (this.mediaKeys=lm)?te(lm,this):h.resolve();}function se(lm){this.a=new MSMediaKeys(lm);this.b=new pc();}se.prototype.createSession=function(lm){if("temporary"!=(lm||"temporary"))throw new TypeError("Session type "+lm+" is unsupported on this platform.");return new ue(this.a);};se.prototype.setServerCertificate=function(){return h.reject(Error("setServerCertificate not supported on this platform."));};function te(lm,mm){function nm(){mm.msSetMediaKeys(om.a);mm.removeEventListener("loadedmetadata",nm);}rc(lm.b);if(!mm)return h.resolve();qc(lm.b,mm,"msneedkey",ve);var om=lm;try{return 1<=mm.readyState?mm.msSetMediaKeys(lm.a):mm.addEventListener("loadedmetadata",nm),h.resolve();}catch(pm){return h.reject(pm);}}function ue(lm){tc.call(this,null);this.c=null;this.g=lm;this.b=this.a=null;this.f=new pc();this.sessionId="";this.expiration=NaN;this.closed=new yc();this.keyStatuses=new ye();}n(ue,tc);k=ue.prototype;k.generateRequest=function(lm,mm){this.a=new yc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(mm),null),qc(this.f,this.c,"mskeymessage",this.Kb.bind(this)),qc(this.f,this.c,"mskeyadded",this.Ib.bind(this)),qc(this.f,this.c,"mskeyerror",this.Jb.bind(this)),xe(this,"status-pending");}catch(nm){this.a.reject(nm);}return this.a;};k.load=function(){return h.reject(Error("MediaKeySession.load not yet supported"));};k.update=function(lm){this.b=new yc();try{this.c.update(new Uint8Array(lm));}catch(mm){this.b.reject(mm);}return this.b;};k.close=function(){try{this.c.close(),this.closed.resolve(),rc(this.f);}catch(lm){this.closed.reject(lm);}return this.closed;};k.remove=function(){return h.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function ve(lm){var mm=lm.initData;if(mm){var nm=new oe(mm);if(1>=nm.a.length){lm=mm;}else{var om=[];for(lm=0;lm<nm.a.length;lm++)om.push(mm.subarray(nm.a[lm].start,nm.a[lm].end+1));mm=eb(om,we);for(lm=nm=0;lm<mm.length;lm++)nm+=mm[lm].length;nm=new Uint8Array(nm);for(lm=om=0;lm<mm.length;lm++)nm.set(mm[lm],om),om+=mm[lm].length;lm=nm;}}else lm=mm;lm=yb({type:"encrypted",initDataType:"cenc",initData:lm});this.dispatchEvent(lm);}function we(lm,mm){return xd(lm,mm);}k.Kb=function(lm){this.a&&(this.a.resolve(),this.a=null);lm=yb({type:"message",messageType:void 0==this.keyStatuses.Na()?"licenserequest":"licenserenewal",message:lm.message.buffer});this.dispatchEvent(lm);};k.Ib=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(xe(this,"usable"),this.b.resolve(),this.b=null);};k.Jb=function(){var lm=Error("EME v20140218 key error");lm.errorCode=this.c.error;if(null!=this.a){this.a.reject(lm),this.a=null;}else if(null!=this.b){this.b.reject(lm),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:xe(this,"output-not-allowed");default:xe(this,"internal-error");}};function xe(lm,mm){lm.keyStatuses.Sa(mm);var nm=yb({type:"keystatuseschange"});lm.dispatchEvent(nm);}function ye(){this.size=0;this.a=void 0;}var ze;k=ye.prototype;k.Sa=function(lm){this.size=void 0==lm?0:1;this.a=lm;};k.Na=function(){return this.a;};k.forEach=function(lm){this.a&&lm(ze,this.a);};k.get=function(lm){if(this.has(lm))return this.a;};k.has=function(lm){var mm=ze;return this.a&&xd(new Uint8Array(lm),new Uint8Array(mm))?true:false;};function af(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(ne=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=de,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ee,j.MediaKeys=ge,j.MediaKeySystemAccess=fe):j.MSMediaKeys?(ze=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=re,j.MediaKeys=se,j.MediaKeySystemAccess=qe,Navigator.prototype.requestMediaKeySystemAccess=pe):(Navigator.prototype.requestMediaKeySystemAccess=la,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ma,j.MediaKeys=na,j.MediaKeySystemAccess=oa));}m("shaka.polyfill.MediaKeys.install",af);m("shaka.polyfill.installAll",function(){ha();ja();cb();ra();af();});var bf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function cf(lm){var mm;lm instanceof cf?(df(this,lm.Z),this.ha=lm.ha,this.P=lm.P,ef(this,lm.la),this.T=lm.T,ff(this,lm.a.clone()),this.ea=lm.ea):lm&&(mm=String(lm).match(bf))?(df(this,mm[1]||"",true),this.ha=gf(mm[2]||""),this.P=gf(mm[3]||"",true),ef(this,mm[4]),this.T=gf(mm[5]||"",true),ff(this,mm[6]||"",true),this.ea=gf(mm[7]||"")):this.a=new pf(null);}k=cf.prototype;k.Z="";k.ha="";k.P="";k.la=null;k.T="";k.ea="";k.toString=function(){var lm=[],mm=this.Z;mm&&lm.push(hf(mm,kf,true),":");if(mm=this.P){lm.push("//");var nm=this.ha;nm&&lm.push(hf(nm,kf,true),"@");lm.push(encodeURIComponent(mm).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));mm=this.la;null!=mm&&lm.push(":",String(mm));}if(mm=this.T)this.P&&"/"!=mm.charAt(0)&&lm.push("/"),lm.push(hf(mm,"/"==mm.charAt(0)?mf:lf,true));(mm=this.a.toString())&&lm.push("?",mm);(mm=this.ea)&&lm.push("#",hf(mm,of));return lm.join("");};k.resolve=function(lm){var mm=this.clone();"data"===mm.Z&&(mm=new cf());var nm=!!lm.Z;nm?df(mm,lm.Z):nm=!!lm.ha;nm?mm.ha=lm.ha:nm=!!lm.P;nm?mm.P=lm.P:nm=null!=lm.la;var om=lm.T;if(nm){ef(mm,lm.la);}else if(nm=!!lm.T){if("/"!=om.charAt(0))if(this.P&&!this.T){om="/"+om;}else{var pm=mm.T.lastIndexOf("/");-1!=pm&&(om=mm.T.substr(0,pm+1)+om);}if(".."==om||"."==om){om="";}else if(-1!=om.indexOf("./")||-1!=om.indexOf("/.")){for(var pm=0==om.lastIndexOf("/",0),om=om.split("/"),qm=[],rm=0;rm<om.length;){var sm=om[rm++];"."==sm?pm&&rm==om.length&&qm.push(""):".."==sm?((1<qm.length||1==qm.length&&""!=qm[0])&&qm.pop(),pm&&rm==om.length&&qm.push("")):(qm.push(sm),pm=true);}om=qm.join("/");}}nm?mm.T=om:nm=""!==lm.a.toString();nm?ff(mm,lm.a.clone()):nm=!!lm.ea;nm&&(mm.ea=lm.ea);return mm;};k.clone=function(){return new cf(this);};function df(lm,mm,nm){lm.Z=nm?gf(mm,true):mm;lm.Z&&(lm.Z=lm.Z.replace(/:$/,""));}function ef(lm,mm){if(mm){mm=Number(mm);if(isNaN(mm)||0>mm)throw Error("Bad port number "+mm);lm.la=mm;}else lm.la=null;}function ff(lm,mm,nm){mm instanceof pf?lm.a=mm:(nm||(mm=hf(mm,nf)),lm.a=new pf(mm));}function gf(lm,mm){return lm?mm?decodeURI(lm):decodeURIComponent(lm):"";}function hf(lm,mm,nm){return "string"==typeof lm?(lm=encodeURI(lm).replace(mm,jf),nm&&(lm=lm.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),lm):null;}function jf(lm){lm=lm.charCodeAt(0);return "%"+(lm>>4&15).toString(16)+(lm&15).toString(16);}var kf=/[#\/\?@]/g,lf=/[\#\?:]/g,mf=/[\#\?]/g,nf=/[\#\?@]/g,of=/#/g;function pf(lm){this.b=lm||null;}pf.prototype.a=null;pf.prototype.c=null;function qf(lm,mm,nm){if(!lm.a&&(lm.a={},lm.c=0,lm.b))for(var om=lm.b.split("&"),pm=0;pm<om.length;pm++){var qm=om[pm].indexOf("="),rm=null,sm=null;0<=qm?(rm=om[pm].substring(0,qm),sm=om[pm].substring(qm+1)):rm=om[pm];rm=decodeURIComponent(rm.replace(/\+/g," "));sm=sm||"";qf(lm,rm,decodeURIComponent(sm.replace(/\+/g," ")));}lm.b=null;(om=lm.a.hasOwnProperty(mm)&&lm.a[mm])||(lm.a[mm]=om=[]);om.push(nm);lm.c++;}pf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var lm=[],mm;for(mm in this.a)for(var nm=encodeURIComponent(mm),om=this.a[mm],pm=0;pm<om.length;pm++){var qm=nm;""!==om[pm]&&(qm+="="+encodeURIComponent(om[pm]));lm.push(qm);}return this.b=lm.join("&");};pf.prototype.clone=function(){var lm=new pf();lm.b=this.b;if(this.a){var mm={},nm;for(nm in this.a)mm[nm]=this.a[nm].concat();lm.a=mm;lm.c=this.c;}return lm;};function rf(lm,mm,nm){lm=(new DOMParser()).parseFromString(lm,"text/xml");if(!lm)return null;"string"===typeof mm&&(mm=[new cf(mm)]);mm=mm||[new cf("")];nm=nm||[new cf("")];return pg({tb:mm,u:nm},lm,sf);}m("shaka.dash.mpd.parseMpd",rf);function sf(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.tb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function tf(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[];}function uf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[];}function vf(){this.value=null;}function wf(){this.contentType=this.lang=this.id=null;}function xf(){this.a=this.b=this.g=this.u=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function yf(){this.b=this.a=this.c=this.f=null;}function zf(){this.parsedPssh=this.psshBox=null;}function ag(){this.url=null;}function bg(){this.url=null;}function cg(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}cg.prototype.clone=function(){var lm=new cg();lm.u=tg(this.u);lm.h=this.h;lm.g=this.g;lm.a=ug(this.a);lm.f=ug(this.f);lm.b=ug(this.b);lm.c=ug(this.c);return lm;};function dg(){this.a=this.url=null;}dg.prototype.clone=function(){var lm=new dg();lm.url=tg(this.url);lm.a=ug(this.a);return lm;};function eg(){this.a=this.url=null;}eg.prototype.clone=function(){var lm=new eg();lm.url=tg(this.url);lm.a=ug(this.a);return lm;};function fg(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}fg.prototype.clone=function(){var lm=new fg();lm.u=tg(this.u);lm.a=this.a;lm.g=this.g;lm.c=this.c;lm.i=this.i;lm.h=ug(this.h);lm.b=tg(this.b)||[];lm.f=ug(this.f);return lm;};function gg(){this.a=this.b=null;}gg.prototype.clone=function(){var lm=new gg();lm.b=tg(this.b);lm.a=ug(this.a);return lm;};function hg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}hg.prototype.clone=function(){var lm=new hg();lm.a=this.a;lm.i=this.i;lm.b=this.b;lm.j=this.j;lm.h=this.h;lm.f=this.f;lm.g=this.g;lm.c=ug(this.c);return lm;};function ig(){this.a=[];}ig.prototype.clone=function(){var lm=new ig();lm.a=tg(this.a)||[];return lm;};function jg(){this.b=this.a=this.startTime=null;}jg.prototype.clone=function(){var lm=new jg();lm.startTime=this.startTime;lm.a=this.a;lm.b=this.b;return lm;};function kg(lm,mm){this.ja=lm;this.end=mm;}kg.prototype.clone=function(){return new kg(this.ja,this.end);};sf.TAG_NAME="MPD";tf.TAG_NAME="Period";uf.TAG_NAME="AdaptationSet";vf.TAG_NAME="Role";wf.TAG_NAME="ContentComponent";xf.TAG_NAME="Representation";yf.TAG_NAME="ContentProtection";zf.TAG_NAME="cenc:pssh";ag.TAG_NAME="BaseURL";bg.TAG_NAME="Location";cg.TAG_NAME="SegmentBase";dg.TAG_NAME="RepresentationIndex";eg.TAG_NAME="Initialization";fg.TAG_NAME="SegmentList";gg.TAG_NAME="SegmentURL";hg.TAG_NAME="SegmentTemplate";ig.TAG_NAME="SegmentTimeline";jg.TAG_NAME="S";sf.prototype.parse=function(lm,mm){this.url=lm.tb;this.id=vg(mm,"id",ch);this.type=vg(mm,"type",ch)||"static";this.b=vg(mm,"mediaPresentationDuration",xg);this.h=vg(mm,"minBufferTime",xg,this.h);this.g=vg(mm,"minimumUpdatePeriod",xg,this.g);this.c=vg(mm,"availabilityStartTime",wg,this.c);this.f=vg(mm,"timeShiftBufferDepth",xg,this.f);this.f=null;this.i=vg(mm,"suggestedPresentationDelay",xg,this.i);var nm=lm.u,om=rg(this,mm,ag);this.u=mg(nm,om);if(om=pg(this,mm,bg))this.j=ng(nm,om.url);this.a=rg(this,mm,tf);};tf.prototype.parse=function(lm,mm){this.id=vg(mm,"id",ch);this.start=vg(mm,"start",xg);this.a=vg(mm,"duration",xg);var nm=rg(this,mm,ag);this.u=mg(lm.u,nm);this.c=pg(this,mm,cg);this.f=pg(this,mm,fg);this.g=pg(this,mm,hg);this.b=rg(this,mm,uf);lg(this);};function lg(lm){for(var mm=[],nm=0;nm<lm.b.length;++nm){var om=lm.b[nm];null!=om.group&&(mm[om.group]=true);}for(nm=0;nm<lm.b.length;++nm)if(om=lm.b[nm],null==om.group){for(var pm=1;1==mm[pm];)++pm;mm[pm]=true;om.group=pm;}}uf.prototype.parse=function(lm,mm){var nm=pg(this,mm,wf)||{},om=pg(this,mm,vf);this.id=vg(mm,"id",ch);this.group=vg(mm,"group",bh);this.lang=vg(mm,"lang",ch,nm.lang);this.contentType=vg(mm,"contentType",ch,nm.contentType);this.width=vg(mm,"width",ah);this.height=vg(mm,"height",ah);this.b=vg(mm,"mimeType",ch);this.i=vg(mm,"codecs",ch);this.c=om&&"main"==om.value;this.lang&&(this.lang=dc(this.lang));nm=rg(this,mm,ag);this.u=mg(lm.u,nm);this.j=rg(this,mm,yf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=lm.c?og(this,mm,lm.c):pg(this,mm,cg);this.g=lm.f?og(this,mm,lm.f):pg(this,mm,fg);this.h=lm.g?og(this,mm,lm.g):pg(this,mm,hg);this.a=rg(this,mm,xf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};vf.prototype.parse=function(lm,mm){this.value=vg(mm,"value",ch);};wf.prototype.parse=function(lm,mm){this.id=vg(mm,"id",ch);this.lang=vg(mm,"lang",ch);this.contentType=vg(mm,"contentType",ch);this.lang&&(this.lang=dc(this.lang));};xf.prototype.parse=function(lm,mm){this.id=vg(mm,"id",ch);this.bandwidth=vg(mm,"bandwidth",ah);this.width=vg(mm,"width",ah,lm.width);this.height=vg(mm,"height",ah,lm.height);this.f=vg(mm,"mimeType",ch,lm.b);this.h=vg(mm,"codecs",ch,lm.i);this.fbQualityLabel=vg(mm,"FBQualityLabel",ch);this.fbQualityClass=vg(mm,"FBQualityClass",ch);this.lang=lm.lang;var nm=rg(this,mm,ag);this.u=mg(lm.u,nm);this.c=rg(this,mm,yf);this.g=lm.f?og(this,mm,lm.f):pg(this,mm,cg);this.b=lm.g?og(this,mm,lm.g):pg(this,mm,fg);this.a=lm.h?og(this,mm,lm.h):pg(this,mm,hg);this.c=this.c.concat(lm.j);};yf.prototype.parse=function(lm,mm){this.f=mm;this.c=vg(mm,"schemeIdUri",ch);var nm=vg(mm,"cenc:default_KID",ch);nm&&(this.b=nm.replace(/[-]/g,""));this.a=pg(this,mm,zf);};zf.prototype.parse=function(lm,mm){var nm=sg(mm);if(nm){this.psshBox=vd(nm);try{this.parsedPssh=new oe(this.psshBox);}catch(om){if(!(om instanceof RangeError))throw om;}}};ag.prototype.parse=function(lm,mm){this.url=sg(mm);};bg.prototype.parse=function(lm,mm){this.url=sg(mm);};cg.prototype.parse=function(lm,mm){this.u=lm.u||this.u;this.h=vg(mm,"timescale",ah,this.h);this.g=vg(mm,"presentationTimeOffset",bh,this.g);this.a=vg(mm,"indexRange",yg,this.a);this.f=vg(mm,"FBFirstSegmentRange",yg,this.f);this.b=pg(this,mm,dg)||this.b;this.c=pg(this,mm,eg)||this.c;};dg.prototype.parse=function(lm,mm){var nm=vg(mm,"sourceURL",ch);this.url=ng(lm.u,nm);this.a=vg(mm,"range",yg,ug(lm.a));};eg.prototype.parse=function(lm,mm){var nm=vg(mm,"sourceURL",ch);this.url=ng(lm.u,nm);this.a=vg(mm,"range",yg);};fg.prototype.parse=function(lm,mm){this.u=lm.u||this.u;this.a=vg(mm,"timescale",ah,this.a);this.g=vg(mm,"presentationTimeOffset",bh,this.g);this.c=vg(mm,"duration",ah,this.c);var nm=vg(mm,"startNumber",ah);null!=nm&&(this.i=nm);this.h=pg(this,mm,eg)||this.h;this.b=(nm=rg(this,mm,gg))&&0<nm.length?nm:this.b;this.f=pg(this,mm,ig)||this.f;};gg.prototype.parse=function(lm,mm){var nm=vg(mm,"media",ch);this.b=ng(lm.u,nm);this.a=vg(mm,"mediaRange",yg);};hg.prototype.parse=function(lm,mm){this.a=vg(mm,"timescale",ah,this.a);this.i=vg(mm,"presentationTimeOffset",bh,this.i);this.b=vg(mm,"duration",ah,this.b);var nm=vg(mm,"startNumber",bh);null!=nm&&(this.j=nm);this.h=vg(mm,"media",ch,this.h);this.f=vg(mm,"index",ch,this.f);this.g=vg(mm,"initialization",ch,this.g);this.c=pg(this,mm,ig)||this.c;};ig.prototype.parse=function(lm,mm){this.a=rg(this,mm,jg);};jg.prototype.parse=function(lm,mm){this.startTime=vg(mm,"t",bh);this.a=vg(mm,"d",bh);this.b=vg(mm,"r",zg);};function mg(lm,mm){if(!mm||0===mm.length)return lm;for(var nm=[],om=0;om<mm.length;om++){var pm=mm[om].url;null==lm||0===lm.length?nm.push(new cf(pm)):(pm=ng(lm.slice(0,1),pm),nm.push(pm[0]));}return nm;}function ng(lm,mm){if(!mm)return lm;var nm=new cf(mm);return lm?lm.map(function(om){return om.resolve(nm);}):[nm];}function og(lm,mm,nm){var om=ug(nm);(mm=qg(mm,nm.constructor.TAG_NAME))&&om.parse(lm,mm);return om;}function pg(lm,mm,nm){var om=null;if(mm=qg(mm,nm.TAG_NAME))om=new nm(),om.parse(lm,mm);return om;}function qg(lm,mm){for(var nm=null,om=0;om<lm.childNodes.length;om++)if(lm.childNodes[om].tagName==mm){if(nm)return null;nm=lm.childNodes[om];}return nm;}function rg(lm,mm,nm){for(var om=[],pm=0;pm<mm.childNodes.length;pm++)if(mm.childNodes[pm].tagName==nm.TAG_NAME){var qm=new nm();qm.parse.call(qm,lm,mm.childNodes[pm]);om.push(qm);}return om;}function sg(lm){lm=lm.firstChild;return lm.nodeType!=Node.TEXT_NODE?null:lm.nodeValue;}function tg(lm){return lm?lm.map(function(mm){return mm.clone();}):null;}function ug(lm){return lm?lm.clone():null;}function vg(lm,mm,nm,om){lm=nm(lm.getAttribute(mm));return null!=lm?lm:void 0!==om?om:null;}function wg(lm){if(!lm)return null;lm=Date.parse(lm);return isNaN(lm)?null:Math.floor(lm/1000);}function xg(lm){if(!lm)return null;var mm=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(lm);if(!mm)return null;lm=0;var nm=bh(mm[1]);nm&&(lm+=31536000*nm);(nm=bh(mm[2]))&&(lm+=2592000*nm);(nm=bh(mm[3]))&&(lm+=86400*nm);(nm=bh(mm[4]))&&(lm+=3600*nm);(nm=bh(mm[5]))&&(lm+=60*nm);mm=j.parseFloat(mm[6]);(mm=isNaN(mm)?null:mm)&&(lm+=mm);return lm;}function yg(lm){var mm=/([0-9]+)-([0-9]+)/.exec(lm);if(!mm)return null;lm=bh(mm[1]);if(null==lm)return null;mm=bh(mm[2]);return null==mm?null:new kg(lm,mm);}function zg(lm){lm=j.parseInt(lm,10);return isNaN(lm)?null:lm;}function ah(lm){lm=j.parseInt(lm,10);return 0<lm?lm:null;}function bh(lm){lm=j.parseInt(lm,10);return 0<=lm?lm:null;}function ch(lm){return lm;}function dh(lm,mm){this.url=lm;this.b=mm||new eh();this.g=this.j=this.h=0;this.a=null;this.c=new yc();this.f=null;}m("shaka.util.AjaxRequest",dh);function eh(){this.body=null;this.a=1;this.i=1000;this.c=0;this.method="GET";this.g="arraybuffer";this.b={};this.h=this.l=false;this.f=this.m=null;this.j=false;}var fh=true;function gh(lm){hh(lm);lm.b.body=null;lm.c.destroy();lm.c=null;lm.f=null;}function hh(lm){lm.a&&(lm.a.onload=null,lm.a.onreadystatechange=null,lm.a.onerror=null,lm.a.ontimeout=null);lm.a=null;}var ih=/(.*)\.(xx|fna)\.fbcdn\.net/,jh=/livestream-lookaside\.facebook\.com$/;dh.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var lm=this.url.split(":")[1].split(";").pop().split(","),mm=lm.pop(),mm="base64"==lm.pop()?j.atob(mm.replace(/-/g,"+").replace(/_/g,"/")):j.decodeURIComponent(mm);"arraybuffer"==this.b.g&&(mm=ud(mm).buffer);lm=JSON.parse(JSON.stringify(new XMLHttpRequest()));lm.response=mm;lm.responseText=mm.toString();mm=this.c;mm.resolve(lm);gh(this);return mm;}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();this.g||(this.g=this.b.i);this.a=new XMLHttpRequest();var nm=this.url,lm=new cf(nm);fh&&(this.f&&!this.f.supportsCaching()||this.b.h)&&qf(lm.a,"_",Date.now());nm=ih.test(nm);if(null!=this.b.f&&nm){var om=this.b.f,pm=lm.a;qf(pm,"_nc_p_n",om.f);null!=om.c?qf(pm,"_nc_p_ts",om.c):null!=om.b&&qf(pm,"_nc_p_o",om.b);null!=om.a&&qf(pm,"_nc_p_rid",om.a);}1==this.b.j&&nm&&qf(lm.a,"_nc_playing",1);nm=lm.toString();lm=jh.test(lm.P);this.a.open(this.b.method,nm,true);this.a.responseType=this.b.g;this.a.timeout=this.b.c;this.a.withCredentials=this.b.l||lm;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.s.bind(this);for(mm in this.b.b)this.a.setRequestHeader(mm,this.b.b[mm]);this.a.send(this.b.body);return this.c;};dh.prototype.send=dh.prototype.i;function kh(lm,mm,nm){mm=Error(mm);mm.type=nm;mm.status=lm.a.status;mm.url=lm.url;mm.method=lm.b.method;mm.body=lm.b.body;mm.hc=lm.a;return mm;}dh.prototype.l=function(lm){this.f&&this.f.sample(Date.now()-this.j,lm.loaded);lm=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),gh(this)):this.h<this.b.a&&-1===lm.indexOf(this.a.status)?lh(this):(lm=kh(this,"HTTP error.","net"),this.c.reject(lm),gh(this));};dh.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ma=Date.now()-this.j,this.b.h)){var lm=Date.parse(this.a.getResponseHeader("Date"));lm&&(gb=lm-Date.now());}};dh.prototype.v=function(){var lm=kh(this,"Network failure.","net");this.c.reject(lm);gh(this);};dh.prototype.s=function(){if(this.h<this.b.a){lh(this);}else{var lm=kh(this,"Request timed out.","net");this.c.reject(lm);gh(this);}};function lh(lm){hh(lm);j.setTimeout(lm.i.bind(lm),lm.g*(1+.5*(2*Math.random()-1)));lm.g*=2;}function mh(lm,mm,nm,om){this.b=mm;this.h=nm||0;this.f=null!=om?om:null;this.c=this.a=null;this.j=lm;this.i=null;}var nh;m("shaka.util.FailoverUri",mh);function oh(lm,mm){return lm&&0!==lm.length?lm.map(function(nm){return nm.resolve(mm);}):[mm];}mh.setPrefetchCacheValueGetter=function(lm){nh=lm;};function ph(lm,mm,nm,om){if(lm.a)return lm.a;lm.a=qh(lm,0,mm||new eh(),nm,om);return lm.a;}mh.prototype.g=function(){if(this.c){this.a=null;var lm=this.c;if(lm.a&&lm.a.readyState!=XMLHttpRequest.DONE){lm.a.abort();var mm=kh(lm,"Request aborted.","aborted");lm.c.reject(mm);gh(lm);}this.i=this.c=null;}};function qh(lm,mm,nm,om,pm){var qm=lm.b[mm].toString(),rm;pm&&(rm=pm.getOperationLogger("request").setResource(qm));if(lm.h||lm.f)pm=lm.b[mm].P,!pm.endsWith("fbcdn.net")||pm.startsWith("interncache")||pm.endsWith("ak.fbcdn.net")?nm.b.Range="bytes="+(lm.h+"-"+(null!=lm.f?lm.f:"")):(qm+="&bytestart="+lm.h,qm+=null!==lm.f?"&byteend="+lm.f:"");lm.j&&(qm=lm.j(qm,nm.b)||qm);pm=null;nh&&(pm=nh(qm));pm||(lm.c=new dh(qm,nm),om&&(lm.c.f=om),pm=lm.c.i());qm=pm.then(ed(lm,function(sm){this.i=this.c=this.a=null;this.i=sm.a?new cf(sm.a):this.b[mm];sm.response.ma=sm.ma;rm&&rm.setLength(sm.response.byteLength||sm.response.length).log();return h.resolve(sm.response);}));return qm=qm.catch(ed(lm,function(sm){if(this.a&&mm+1<this.b.length)return this.a=qh(this,mm+1,nm,om);this.a=this.c=null;rm&&rm.setError(sm).log();return h.reject(sm);}));}mh.prototype.clone=function(){return new mh(this.j,this.b.map(function(lm){return lm.clone();}),this.h,this.f);};mh.prototype.toString=function(){return this.b[0].toString();};function rh(lm,mm,nm){this.a=new eh();this.a.g="text";this.a.a=3;this.a.c=1000*(null!=mm?mm:0);nm&&(this.a.f=nm);this.a.h=true;this.b=lm;}function sh(lm,mm){var nm=lm.b;return ph(nm,lm.a,null,mm).then(function(om){om instanceof ArrayBuffer&&(om=String.fromCharCode.apply(null,new Uint8Array(om)));if(om=rf(om,nm.b,[nm.i]))return h.resolve(om);om=Error("MPD parse failure.");om.type="dash";return h.reject(om);});}function th(lm){this.f=lm;this.a=this.b=this.c=null;}function uh(lm,mm,nm,om){for(var pm=mm.a,qm=[],rm=0;rm<om;++rm){var sm=rm+nm,tm=(sm-1)*pm.b,um=tm/pm.a,vm=(tm+pm.b)/pm.a,sm=vh(lm,mm,pm.j+sm-1,tm);if(!sm)return null;qm.push(new zh(um,vm,sm,tm));}return qm;}function vh(lm,mm,nm,om){if(!mm.a)return null;var pm=mm.a.h;if(!pm)return mm.u?new mh(lm,mm.u,0,null):null;nm=wh(pm,mm.id,nm,mm.bandwidth,om);if(!nm)return null;mm=oh(mm.u,nm);return new mh(lm,mm,0,null);}function wh(lm,mm,nm,om,pm){var qm={RepresentationID:mm,Number:nm,Bandwidth:om,Time:pm};lm=lm.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(sm,tm,um){if("$$"==sm)return "$";var vm=qm[tm];if(null==vm)return sm;"RepresentationID"==tm&&um&&(um=void 0);sm=vm.toString();um=j.parseInt(um,10)||1;um=Math.max(0,um-sm.length);return Array(um+1).join("0")+sm;});try{return new cf(lm);}catch(rm){if(rm instanceof URIError)return null;throw rm;}}function xh(lm,mm,nm){var om=0;mm*=nm;lm=lm.a;nm=[];for(var pm=0;pm<lm.length&&lm[pm].a;++pm){var qm=lm[pm].startTime,qm=null!=qm?qm:om,rm=lm[pm].b||0;0>rm&&(rm=lm[pm].a,rm=pm+1===lm.length?Math.ceil((lm[0].startTime+mm-qm)/rm)-1:Math.ceil((lm[pm+1].startTime-qm)/rm)-1);0<nm.length&&qm!=om&&(nm[nm.length-1].end=qm);for(var sm=0;sm<=rm;++sm)om=qm+lm[pm].a,nm.push({start:qm,end:om}),qm=om;}return nm;}function yh(lm,mm){this.a=lm;this.b=mm||null;}yh.prototype.destroy=function(){this.a&&(this.a.g(),this.a=null);this.b=null;};yh.prototype.create=function(lm){return this.a?ph(this.a,null,null,lm):h.resolve(this.b);};function zh(lm,mm,nm,om){this.startTime=lm;this.endTime=mm;this.url=nm;this.a=null!=om?om:null;}function ai(lm,mm,nm){return new zh(mm,nm,lm.url,null!=lm.a?lm.a:void 0);}function bi(lm,mm){for(var nm=lm.length-1;0<=nm;--nm){var om=lm[nm];if(mm>=om.startTime&&(null==om.endTime||mm<om.endTime))return nm;}return -1;}function ci(lm,mm){return lm.map(function(nm){return ai(nm,nm.startTime+mm,null!=nm.endTime?nm.endTime+mm:null);});}function di(){}di.prototype.parse=function(lm,mm,nm,om,pm){var qm=null;try{lm:{var sm=[],tm=new hb(lm),um=lb(tm);if(1936286840!=lb(tm)){qm=null;}else{1==um&&(um=mb(tm));var vm=kb(tm);ob(tm,3);ob(tm,4);var wm=lb(tm);if(0==wm){qm=null;}else{var xm,ym;0==vm?(xm=lb(tm),ym=lb(tm)):(xm=mb(tm),ym=mb(tm));ob(tm,2);var zm=tm.b.getUint16(tm.a,tm.c);tm.a+=2;lm=xm;mm=mm+um+ym;for(ym=um=0;ym<zm;ym++){var an=lb(tm);xm=(an&2147483648)>>>31;var vm=an&2147483647,bn=lb(tm);lb(tm);if(1==xm){qm=null;break lm;}var cn;cn=0==ym&&pm?pm:new mh(om,nm,mm,mm+vm-1);xm=lm/wm;var dn=(lm+bn)/wm;0===ym&&(um=xm);sm.push(new zh(xm-um,dn-um,cn));lm+=bn;mm+=vm;}qm=sm;}}};}catch(rm){if(!(rm instanceof RangeError))throw rm;}return qm;};function ei(lm){this.a=lm;this.$=0;this.g=[];this.Va=false;}ei.prototype.G=function(){return !!this.g[this.g.length-1];};ei.prototype.lastPollHadChanges=ei.prototype.G;ei.prototype.D=function(){var lm=this.g,mm=lm.lastIndexOf(true);if(1>mm)return 0;lm=lm.lastIndexOf(true,mm-1);return 0>lm?0:mm-lm-1;};ei.prototype.getFetchesBetweenRecentChanges=ei.prototype.D;ei.prototype.C=function(){return Math.floor((this.g.length-1-this.g.lastIndexOf(true))/2);};ei.prototype.getConsecutiveUpdatesWithoutChanges=ei.prototype.C;ei.prototype.B=function(){return this.g.length-1-this.g.lastIndexOf(false);};ei.prototype.getConsecutiveUpdatesWithChanges=ei.prototype.B;ei.prototype.destroy=function(){this.a=null;};ei.prototype.length=function(){return this.a.length;};ei.prototype.F=function(){return (this.a||[]).slice();};ei.prototype.getSegments=ei.prototype.F;function fi(lm){if(0==lm.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return lm.a[0];}ei.prototype.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};ei.prototype.last=ei.prototype.w;k=ei.prototype;k.get=function(lm){if(0>lm||lm>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[lm];};k.oa=function(lm){lm=bi(this.a,lm);return 0<=lm?this.a[lm]:null;};k.Pa=function(lm){gi(this,lm);return true;};function gi(lm,mm){lm.$!=mm.$&&(mm=new ei(ci(mm.a,lm.$-mm.$)));if(0==lm.length()){lm.a=mm.a.slice(0);}else if(0!=mm.length()&&null!=lm.w().endTime)if(null!=mm.w().endTime&&mm.w().endTime<lm.w().endTime){lm.Va=true;}else{lm.Va=false;if(lm.w().endTime<=fi(mm).startTime){var nm=ai(lm.w(),lm.w().startTime,fi(mm).startTime),nm=lm.a.slice(0,-1).concat([nm]);}else{var om;for(om=0;om<lm.a.length&&!(lm.a[om].endTime>=fi(mm).startTime);++om);lm.a[om].startTime<fi(mm).startTime?(nm=ai(lm.a[om],lm.a[om].startTime,fi(mm).startTime),nm=lm.a.slice(0,om).concat([nm])):(fi(lm).startTime>fi(mm).startTime||fi(mm),nm=lm.a.slice(0,om));}lm.a=nm.concat(mm.a);}}k.na=function(lm){var mm=lm-this.$;if(0==mm)return 0;this.a=ci(this.a,mm);this.$=lm;return mm;};k.La=function(){return 0<this.length()?{start:fi(this).startTime,end:this.w().endTime}:{start:0,end:0};};function hi(lm,mm,nm,om){ei.call(this,lm);this.i=mm;this.A=nm;this.h=om;this.j=this.i.b||this.i.a.reduce(function(pm,qm){return null==qm.a?NaN:pm+qm.a;},0)||0;this.b=this.s=this.f=null;ii(this);}n(hi,ei);hi.prototype.destroy=function(){this.A=this.i=null;ei.prototype.destroy.call(this);};hi.prototype.oa=function(lm){ki(this,fb()/1000);return ei.prototype.oa.call(this,lm);};hi.prototype.Pa=function(lm){if(!(lm instanceof hi))return false;gi(this,lm);this.j=Math.max(this.j,lm.j);null==this.f?(this.h=lm.h,ii(this)):li(this);return true;};function ii(lm){li(lm);if(0!=lm.length()){lm.length();var mm=null!=lm.w().endTime?lm.w().endTime:lm.w().startTime;if(lm.i.c>lm.h){lm.f=mm;}else{var nm=lm.h-(lm.i.c+lm.A.start);0>nm?lm.f=mm:nm<Math.max(lm.w().startTime,lm.w().endTime||0)?(lm.w(),lm.f=mm):lm.f=nm;}lm.s=lm.w().startTime;lm.b=fi(lm).startTime;}}hi.prototype.na=function(lm){lm=ei.prototype.na.call(this,lm);Math.min.apply(null,this.a.filter(function(mm){return null!=mm.endTime;}).map(function(mm){return mm.endTime-mm.startTime;}));null!=this.f&&(this.s+=lm,this.b+=lm,this.f+=lm);return lm;};hi.prototype.La=function(){return ji(this,fb()/1000);};function ji(lm,mm){ki(lm,mm);if(null==lm.f||null==lm.s||null==lm.b)return {start:0,end:0};var nm=Number.POSITIVE_INFINITY;lm.j&&(nm=lm.j);var om=mm-lm.h,pm=lm.f+om;null!=lm.i.f&&(pm=pm-lm.b-lm.i.f,0<pm&&(lm.b+=pm));lm.b=Math.min(lm.b,nm);om=lm.s+om;if(om<lm.b)return {start:lm.b,end:lm.b};om=0<lm.length()?null!=lm.w().endTime?Math.min(om,lm.w().endTime):om:lm.b;om=Math.max(om,lm.b);om=Math.min(om,nm);return {start:lm.b,end:om};}function ki(lm,mm){li(lm);if(null!=lm.i.f)if(null==lm.f){lm.length();}else{for(var nm=lm.f+(mm-lm.h),om=0,pm=0;pm<lm.a.length;++pm){var qm=null;pm<lm.a.length-1?qm=lm.a[pm+1].endTime:(qm=lm.a[pm],qm=null!=qm.endTime?qm.endTime+(qm.endTime-qm.startTime):null);if(null!=qm&&qm<nm-lm.i.f){++om;}else break;}0<om&&lm.a.splice(0,om);}}function li(lm){if(lm.j){for(var mm=0,nm=lm.a.length-1;0<=nm;--nm)if(lm.a[nm].startTime>lm.j){++mm;}else break;0<mm&&lm.a.splice(-mm);}}function mi(lm,mm,nm,om,pm){var qm=1,rm=0,sm;if(lm.c>om){sm=null;}else{var tm=lm.i||0,um=lm.f||0;sm=nm.a;sm=sm.b/sm.a;var vm=om-(lm.c+mm.start);0>vm?sm=null:(um=vm-2*sm-um,0>um&&(um=0),um=Math.ceil(um/sm)*sm,vm-=sm,0>vm?sm=null:(tm=Math.floor(vm/sm)*sm-tm,0>tm&&(tm=0),tm=Math.floor(tm/sm)*sm,sm={eb:um/sm+1,current:(tm>=um?tm:um)/sm+1}));}sm&&(qm=sm.eb,rm=sm.current-sm.eb+1);qm=uh(pm,nm,qm,rm);if(null==qm)throw lm=Error("Failed to generate SegmentReferences."),lm.type="stream",lm;hi.call(this,qm,lm,mm,om);this.v=nm;this.m=this.c=0<this.length()?lm.c+mm.start+this.w().endTime:null;this.l=sm?sm.current+1:null;this.U=pm;}n(mi,hi);mi.prototype.destroy=function(){this.U=this.v=null;hi.prototype.destroy.call(this);};mi.prototype.oa=function(lm){var mm=fb()/1000;ni(this,mm);ki(this,mm);return ei.prototype.oa.call(this,lm);};mi.prototype.Pa=function(lm){if(null!=this.c||!(lm instanceof mi)||null==lm.c)return false;this.c=lm.c;this.m=lm.m;this.l=lm.l;this.h=lm.h;this.j=lm.j;gi(this,lm);ni(this,fb()/1000);ii(this);return true;};mi.prototype.na=function(lm){lm=hi.prototype.na.call(this,lm);null!=this.c&&(this.c+=lm,this.m+=lm);return lm;};mi.prototype.La=function(){var lm=fb()/1000;ni(this,lm);return ji(this,lm);};function ni(lm,mm){if(null!=lm.c&&null!=lm.m&&null!=lm.l){var nm=lm.v.a,nm=nm.b/nm.a,om=Math.floor((lm.m+(mm-lm.h)-lm.c)/nm);if(0!=om){var pm=uh(lm.U,lm.v,lm.l,om);Array.prototype.push.apply(lm.a,ci(pm,lm.$));lm.c+=om*nm;lm.l+=om;}}}function oi(lm,mm,nm,om,pm){this.f=lm;this.b=mm;this.c=nm;this.h=om;this.a=null;this.g=pm;}oi.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};oi.prototype.create=function(){if(this.a)return h.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new mi(this.f,this.b,this.c,this.h,this.g);}catch(lm){return h.reject(lm);}}else{var mm;mm=this.c.a;if(mm=uh(this.g,this.c,1,Math.ceil(this.b.a/(mm.b/mm.a)))){if(0<mm.length){var nm=mm[mm.length-1];mm[mm.length-1]=ai(nm,nm.startTime,this.b.a);}mm=new ei(mm);}else mm=null;this.a=mm;if(!this.a)return mm=Error("Failed to generate SegmentReferences"),mm.type="stream",h.reject(mm);}return h.resolve(this.a);};function pi(lm,mm,nm,om,pm){this.c=lm;this.b=mm;this.g=nm;this.a=null;this.h=om;this.f=pm;}pi.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};pi.prototype.create=function(){if(this.a)return h.resolve(this.a);var lm=this.g.b,mm=[];lm.f&&(mm=xh(lm.f,lm.a||1,this.b.a||0));var nm=0;lm.c&&lm.i?nm=(lm.i-1)*lm.c:0<mm.length&&(nm=mm[0].start-(lm.g||0));var om=nm,pm=lm.b.length;0<mm.length&&mm.length!=lm.b.length&&(pm=Math.min(mm.length,lm.b.length));for(var qm=[],rm=0;rm<pm;++rm){var sm=lm.b[rm],tm=nm/lm.a,um=null,vm=null;lm.c?(um=nm+lm.c,vm=um/lm.a):0<mm.length?(um=mm[rm].end-(lm.g||0),vm=um/lm.a):(vm=tm+this.b.a,um=vm*lm.a);var nm=um,um=0,wm=null;sm.a&&(um=sm.a.ja,wm=sm.a.end);vm=Math.min(this.b.a+om/lm.a,vm);qm.push(new zh(tm,vm,new mh(this.f,sm.b,um,wm)));}"dynamic"==this.c.type?this.a=new hi(qm,this.c,this.b,this.h):this.a=new ei(qm);return h.resolve(this.a);};function qi(lm,mm,nm,om,pm){this.b=lm;this.c=mm;this.f=nm;this.h=om;this.a=null;this.g=pm;}qi.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};qi.prototype.create=function(){if(this.a)return h.resolve(this.a);for(var lm=this.f.a,mm=xh(lm.c,lm.a||1,this.c.a||0),nm=[],om=0;om<mm.length;++om){var pm=mm[om].start,qm=pm/lm.a,rm=mm[om].end/lm.a,sm=vh(this.g,this.f,om+lm.j,pm);if(!sm)return lm=Error("Failed to generate media URL."),lm.type="dash",h.reject(lm);var tm=(lm.i||0)/lm.a;nm.push(new zh(qm-tm,rm-tm,sm,pm));}"dynamic"==this.b.type?this.a=new hi(nm,this.b,this.c,this.h):this.a=new ei(nm);return h.resolve(this.a);};function ri(){this.H=si++;this.id=this.N=this.K=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.S=false;this.J=true;}var si=0;ri.prototype.destroy=function(){this.K&&(this.K.destroy(),this.K=null);this.N&&(this.N.destroy(),this.N=null);};function ti(lm){var mm=lm.a||"";lm.c&&(mm+='; codecs="'+lm.c+'"');return mm;}function ui(){this.H=vi++;this.id=null;this.contentType=this.lang="";this.b=false;this.o=[];this.a=[];}var vi=0;ui.prototype.destroy=function(){for(var lm=0;lm<this.o.length;++lm)this.o[lm].destroy();this.a=this.o=null;};function wi(lm){for(var mm=[],nm=0;nm<lm.a.length;++nm){var om=new zi();om.id=lm.H;om.a=lm.a[nm];om.contentType=lm.contentType;om.b=lm.o.length?ti(lm.o[0]):"";mm.push(om);}return mm;}function xi(){this.id=null;this.start=0;this.b=null;this.a=[];}xi.prototype.destroy=function(){for(var lm=0;lm<this.a.length;++lm)this.a[lm].destroy();this.a=null;};function yi(){this.b=false;this.h=this.g=this.f=null;this.c=0;this.a=[];this.i=false;}yi.prototype.destroy=function(){for(var lm=0;lm<this.a.length;++lm)this.a[lm].destroy();this.a=null;};function zi(){this.id=0;this.a=null;this.b=this.contentType="";}function aj(lm,mm,nm,om,pm,qm){tc.call(this,lm);this.b=mm;this.a=new fd(nm,om,pm,this);this.I={};this.V=0;this.F=this.v=this.c=null;this.M=false;this.g=this.A=null;this.m=false;this.C=0;this.D=false;this.j=null;this.i=false;this.h=new yc();this.l=this.f=false;this.s=0;this.B=15;this.Y=this.O=false;this.X=qm;this.R=false;this.W=null;this.G=false;}n(aj,tc);aj.prototype.ba=function(){return {SourceBufferManager:this.a};};aj.prototype.getDebug=aj.prototype.ba;aj.prototype.L=function(lm){null!=lm.initialStreamBufferSize&&(this.s=Number(lm.initialStreamBufferSize));null!=lm.dynamicStreamBufferSize&&(this.C=Number(lm.dynamicStreamBufferSize));null!=lm.streamBufferSize&&(this.B=Number(lm.streamBufferSize));null!=lm.addCdnDebugQueryParameters&&(this.O=Boolean(lm.addCdnDebugQueryParameters));null!=lm.useInitialBufferSizeWhenPaused&&(this.Y=Boolean(lm.useInitialBufferSizeWhenPaused));null!=lm.segmentRequestTimeout&&(this.a.C=Number(lm.segmentRequestTimeout));null!=lm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.R=Boolean(lm.resolveVideoTimeUpdateOnFragmentedTimeRanges));null!=lm.performanceLogger&&(this.W=this.I.performanceLogger=lm.performanceLogger);null!=lm.reappendInitSegmentAfterAbort&&(this.I.reappendInitSegmentAfterAbort=Boolean(lm.reappendInitSegmentAfterAbort));lm=this.a;var mm=this.I;null!=mm.reappendInitSegmentAfterAbort&&(lm.A=Boolean(mm.reappendInitSegmentAfterAbort));null!=mm.performanceLogger&&(lm.g=mm.performanceLogger);};aj.prototype.destroy=function(){ij(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.U=this.b=this.a=null;};k=aj.prototype;k.xa=function(){return this.c;};k.Ma=function(){return this.v;};k.Ab=function(lm){this.f||lm.then(function(){this.f=true;this.g||hj(this,0);}.bind(this)).catch(function(){});return this.h;};k.Oa=function(){return this.l;};k.ya=function(lm,mm,nm,om){lm!=this.c&&(this.F=lm.N.create(this.W),lm.K.create().then(ed(this,function(pm){if(this.b){var qm=this.c;this.c=lm;this.v=pm;this.M=true;this.A=om?om:null;this.m||(qm?mm&&bj(this,true,nm):hj(this,0));}})).catch(ed(this,function(pm){"aborted"!=pm.type&&(this.f?(pm=zb(pm),this.dispatchEvent(pm)):this.h.reject(pm));})));};k.wb=function(){return bj(this,false);};k.xb=function(){this.D=true;};function bj(lm,mm,nm){lm.c&&!lm.m&&(lm.m=true,ij(lm),nd(lm.a).then(ed(lm,function(){var om=this.b.currentTime;if(!mm&&0<id(this.a,om)&&0<=bi(this.a.b,om))return h.resolve();if(nm)return md(this.a,this.b.currentTime+nm);this.G=true;return ld(this.a);})).then(ed(lm,function(){this.m=false;hj(this,0);})).catch(ed(lm,function(om){this.m=false;this.f?(om=zb(om),this.dispatchEvent(om)):this.h.reject(om);})));}k.yb=function(lm){return 0<id(this.a,lm)&&0<=bi(this.a.b,lm);};k.Ba=function(){};k.Ja=function(){return true;};function cj(lm){var mm=lm.Y&&lm.b.paused?lm.s:lm.B;lm.C&&!lm.b.paused&&(mm=Math.max(Math.min(lm.v.w().endTime-lm.b.currentTime,lm.C),lm.B));return lm.i?Math.max(lm.s,mm):lm.s;}k.Rb=function(){if(this.i&&!this.f){this.g=null;}else{var lm;if(lm=this.f&&!this.l)lm=1<this.a.c.buffered.length?true:false;if(lm&&(this.D||pd(this.b))){this.R&&(this.b.currentTime=od(this.b)),this.D=false,bj(this,true);}else{this.g=null;lm=this.c;var mm=this.v,nm=this.b.currentTime;if(id(this.a,this.i?nm:nm+(this.j||0))>=cj(this)){ej(this),hj(this,1000/(5*(Math.abs(this.b.playbackRate)||1)));}else{var om=dj(this,nm,mm);om?(mm=kd(this.a,om,lm.b,this.F,this.O&&!this.b.paused),this.X&&"video"===lm.a.split("/")[0]&&this.X(om.startTime,om.endTime,{id:lm.id,reason:this.A}),this.F=null,this.M&&(this.M=false,om=this.A,this.A=null,fj(this,lm,om)),this.l=false,mm.then(ed(this,function(pm){var qm=pm.$;pm=pm.Cb;this.i||(this.V=pm);null==this.j&&(this.j=qm);this.G&&0<id(this.a,nm)&&(this.G=false,this.b.currentTime+=.001);hj(this,0);})).catch(ed(this,function(pm){if("aborted"!=pm.type){var qm=[0,404,410,502,503,504];"net"==pm.type&&-1!=qm.indexOf(pm.hc.status)&&this.c&&hj(this,1000);pm=zb(pm);this.dispatchEvent(pm);}}))):(ej(this),this.f&&!this.l&&(this.l=true,gj(this)),hj(this,200));}}}};function dj(lm,mm,nm){lm=lm.a;var om=lm.b.length;lm=0<om?lm.b[om-1]:null;return null!=lm?null!=lm.endTime?nm.oa(lm.endTime):null:nm.oa(mm)||(nm.length()?nm.w():null);}function ej(lm){if(!lm.i&&null!=lm.j){lm.i=true;var mm=lm.a,nm=lm.j,om=nm-mm.D;0!=om&&(mm.b=ci(mm.b,om),mm.D=nm);lm.h.resolve(lm.j);}}function fj(lm,mm,nm){var om=mm.a.split("/")[0];mm=yb({type:"adaptation",bubbles:true,contentType:om,size:"video"!=om?null:{width:mm.width,height:mm.height},bandwidth:mm.bandwidth,reason:nm});lm.dispatchEvent(mm);}function gj(lm){var mm=yb({type:"ended"});lm.dispatchEvent(mm);}function hj(lm,mm){lm.g=j.setTimeout(lm.Rb.bind(lm),mm);}function ij(lm){null!=lm.g&&(j.clearTimeout(lm.g),lm.g=null);}k.Ka=function(){return this.V;};function jj(lm){this.b=lm;this.a=null;}jj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};jj.prototype.create=function(){if(this.a)return h.resolve(this.a);var lm=new zh(0,null,this.b);this.a=new ei([lm]);return h.resolve(this.a);};function kj(lm,mm){tc.call(this,lm);this.b=mm;this.g=true;this.h=this.f=null;this.c=new yc();this.a=null;}n(kj,tc);kj.prototype.L=function(){};kj.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.U=this.b=this.f=this.h=this.a=this.c=null;};k=kj.prototype;k.xa=function(){return this.f;};k.Ma=function(){return this.h;};k.Ab=function(){return this.c;};k.Oa=function(){return true;};k.ya=function(lm){lm.K.create().then(ed(this,function(mm){if(this.b){if(0==mm.length())return h.reject(Error("No subtitles URL available."));var nm=this.f;this.f=lm;this.h=mm;mm=fi(mm).url.b[0].toString();var om=this.Ja();this.a&&(this.Ba(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=mm;this.Ba(om);mm=yb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:lm.bandwidth});this.dispatchEvent(mm);nm||this.c.resolve(0);}}));};k.wb=function(){};k.xb=function(){};k.yb=function(){return true;};k.Ba=function(lm){this.g=lm;this.a&&(this.a.track.mode=lm?"showing":"disabled");};k.Ja=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function lj(){}lj.prototype.parse=function(lm,mm,nm,om){var pm=null;try{var rm,sm=new pb(mm);if(440786851!=rb(sm).id){rm=null;}else{var tm=rb(sm);if(408125543!=tm.id){rm=null;}else{var um=tm.a.byteOffset,vm,wm=new pb(tm.a);for(mm=null;jb(wm.a);){var xm=rb(wm);if(357149030==xm.id){mm=xm;break;}}if(mm){for(var ym=new pb(mm.a),wm=1e+06;jb(ym.a);){var zm=rb(ym);if(2807729==zm.id){wm=ub(zm);break;}}vm=wm/1e+09;}else vm=null;rm=vm?{Zb:um,dc:vm}:null;}}if(rm){var an=rb(new pb(lm));if(475249515!=an.id){pm=null;}else{var bn=rm.Zb,cn=rm.dc;lm=[];var dn=new pb(an.a);for(rm=an=-1;jb(dn.a);){var en=rb(dn);if(187==en.id){var fn,gn=new pb(en.a),hn=rb(gn);if(179!=hn.id){fn=null;}else{var jn=ub(hn),kn=rb(gn);if(183!=kn.id){fn=null;}else{for(var ln=new pb(kn.a),um=0;jb(ln.a);){var mn=rb(ln);if(241==mn.id){um=ub(mn);break;}}fn={fc:jn,Xb:um};}}if(fn){var nn=cn*fn.fc,on=bn+fn.Xb;if(0<=an){var pn=new mh(om,nm,rm,on-1);lm.push(new zh(an,nn,pn));}an=nn;rm=on;}}}0<=an&&(pn=new mh(om,nm,rm,null),lm.push(new zh(an,null,pn)));pm=lm;}}else pm=null;}catch(qm){if(!(qm instanceof RangeError))throw qm;}return pm;};function mj(lm,mm,nm,om,pm,qm,rm,sm){this.g=lm;this.i=mm;this.f=nm;this.a=om;this.c=pm;this.b=qm;this.j=rm;this.fa=null;this.h=sm;}mj.prototype.destroy=function(){this.h=this.i=this.g=null;this.a.g();this.a=null;this.b&&(this.b.g(),this.b=null);this.c&&(this.c.g(),this.c=null);this.fa=null;};mj.prototype.Bb=function(){return this.fa;};mj.prototype.create=function(){if(this.fa)return this.fa;var lm=[ph(this.a)];"webm"==this.f&&lm.push(ph(this.c));this.b&&ph(this.b);return this.fa=h.all(lm).then(ed(this,function(mm){var nm=mm[0];mm=mm[1]||null;var om=null;"mp4"==this.f?(om=new di(),om=om.parse(new DataView(nm),this.a.h,this.a.b,this.h,this.b)):"webm"==this.f&&(om=new lj(),om=om.parse(new DataView(nm),new DataView(mm),this.a.b,this.h));if(!om)return nm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),nm.type="stream",h.reject(nm);var pm;"dynamic"==this.g.type?pm=new hi(om,this.g,this.i,this.j):pm=new ei(om);return h.resolve(pm);}));};function nj(lm){this.a=lm;}function oj(lm,mm,nm){for(var om=fb()/1000,pm=0;pm<mm.a.length;++pm)for(var qm=mm.a[pm],rm=0;rm<qm.b.length;++rm){var sm=qm.b[rm];if("text"!=sm.contentType)for(var tm=0;tm<sm.a.length;++tm){var um=sm.a[tm],vm=0,vm=vm+(um.g?1:0),vm=vm+(um.b?1:0),vm=vm+(um.a?1:0);0==vm?(sm.a.splice(tm,1),--tm):1!=vm&&(um.g?(um.b=null,um.a=null):um.b&&(um.a=null));}}pj(mm);for(pm=0;pm<mm.a.length;++pm)for(qm=mm.a[pm],rm=0;rm<qm.b.length;++rm){tm=sm=qm.b[rm];um=null;for(vm=0;vm<tm.a.length;++vm){var wm=tm.a[vm].f||"";um?wm!=um&&(tm.a.splice(vm,1),--vm):um=wm;}0==sm.a.length&&(qm.b.splice(rm,1),--rm);}"dynamic"==mm.type&&null==mm.c&&(mm.c=om);pm=new yi();"dynamic"==mm.type&&(pm.b=true,pm.f=mm.g,pm.g=new mh(nm,mm.j||mm.url),pm.h=mm.c);pm.c=mm.h||5;for(qm=0;qm<mm.a.length;++qm){rm=mm.a[qm];if(null==rm.start)break;rm=qj(lm,mm,rm,om,nm);pm.a.push(rm);}return pm;}function pj(lm){if(lm.a.length){null==lm.a[0].start&&(lm.a[0].start=0);var mm=function(tm){return 0==tm||!!tm;};"dynamic"==lm.type&&(lm.b=null);mm(lm.b)&&1==lm.a.length&&!mm(lm.a[0].a)&&(lm.a[0].a=lm.b);for(var nm=0,om=true,pm=0;pm<lm.a.length;++pm){var qm=lm.a[pm-1],rm=lm.a[pm],sm=lm.a[pm+1]||{start:lm.b};!mm(rm.start)&&qm&&mm(qm.start)&&mm(qm.a)&&(rm.start=qm.start+qm.a);!mm(rm.a)&&mm(sm.start)&&(rm.a=sm.start-rm.start);null!=rm.start&&null!=rm.a?nm+=rm.a:om=false;}mm(lm.b)||(pm=lm.a[lm.a.length-1],om?lm.b=nm:mm(pm.start)&&mm(pm.a)?lm.b=pm.start+pm.a:"dynamic"!=lm.type&&(lm.b=nm));}}function qj(lm,mm,nm,om,pm){var qm=new xi();qm.id=nm.id;qm.start=nm.start;qm.b=nm.a;var rm=new lc();nm.b.forEach(function(bn){rm.push(bn.contentType||"",bn);});for(var sm=oc(rm),tm=0;tm<sm.length;++tm){var um=new lc();rm.get(sm[tm]).forEach(function(bn){um.push(bn.group,bn);});for(var vm=oc(um),wm=0;wm<vm.length;++wm){var xm=new lc();um.get(vm[wm]).forEach(function(bn){xm.push(bn.lang,bn);});for(var ym=oc(xm),zm=0;zm<ym.length;++zm){var an=xm.get(ym[zm]),an=rj(lm,mm,nm,an,om,pm);qm.a.push(an);}}}return qm;}function rj(lm,mm,nm,om,pm,qm){o(om.every(function(zm){return zm.group==om[0].group&&(zm.lang||"")==(om[0].lang||"")&&(zm.contentType||"")==(om[0].contentType||"");}));var rm=new ui(),sm=om.filter(function(zm){return null!=zm.id;});sm.length==om.length&&(rm.id=sm.map(function(zm){return zm.id;}).sort().reduce(function(zm,an){return zm+","+an;}));rm.lang=om[0].lang||"";rm.contentType=om[0].contentType||"";rm.b=om.some(function(zm){return zm.c;});for(var sm={},tm=0;tm<om.length;++tm)for(var um=om[tm],vm=0;vm<um.a.length;++vm){var wm=um.a[vm],xm=uj(lm,wm),ym=rm.a.slice(0);tj(xm,ym);0==ym.length&&0<rm.a.length||!(wm=wj(mm,nm,wm,pm,qm))||(rm.o.push(wm),rm.a=ym,sm[wm.H]=um);}if(rm.a.some(function(zm){return ""==zm.a;}))return rm.o.forEach(function(zm){zm.S=true;}),rm;lm=sj(om);for(tm=0;tm<rm.o.length;++tm)wm=rm.o[tm],um=sm[wm.H],um==lm&&(wm.S=true);return rm;}function sj(lm){for(var mm=null,nm=null,om=0;om<lm.length;++om)for(var pm=lm[om],qm=0;qm<pm.a.length;++qm){var rm=pm.a[qm],rm=(rm.width||1)*(rm.height||1)*(rm.bandwidth||1);if(null==mm||rm<mm)mm=rm,nm=pm;}return nm;}function tj(lm,mm){if(0==mm.length){Array.prototype.push.apply(mm,lm);}else for(var nm=0;nm<mm.length;++nm){for(var om=false,pm=0;pm<lm.length;++pm){var qm=mm[nm],rm=lm[pm];if(qm.a==rm.a&&qm.h==rm.h&&qm.l==rm.l&&qm.g==rm.g&&qm.i==rm.i&&qm.f==rm.f&&qm.j==rm.j&&xd(qm.c,rm.c)){om=true;ae(mm[nm],lm[pm].b);break;}}om||(mm.splice(nm,1),--nm);}}function uj(lm,mm){var nm=[];if(0==mm.c.length){nm.push(new yd());}else if(lm.a)for(var om=0;om<mm.c.length;++om)nm.push.apply(nm,vj(lm,mm.c[om]));return nm;}function vj(lm,mm){var nm=[];if(2!=lm.a.length)return [];var om=lm.a(mm.c||"",mm.f);if(!(om&&om instanceof Array))return [];for(var pm=0;pm<om.length;++pm){var qm,rm=om[pm];qm=new yd();if(rm){var sm=ic(rm,"keySystem");if(null!=sm){qm.a=sm;}else throw Error("'keySystem' cannot be null.");var tm=ic(rm,"licenseServerUrl");if(null!=tm){qm.h=tm;}else if(sm)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");sm=gc(rm,"withCredentials");null!=sm&&(qm.l=sm);sm=kc(rm,"licensePostProcessor",Function);null!=sm&&(qm.m=sm);sm=kc(rm,"licensePreProcessor",Function);null!=sm&&(qm.s=sm);sm=gc(rm,"distinctiveIdentifierRequired");null!=sm&&(qm.g=sm);sm=gc(rm,"persistentStateRequired");null!=sm&&(qm.i=sm);sm=ic(rm,"audioRobustness");null!=sm&&(qm.f=sm);sm=ic(rm,"videoRobustness");null!=sm&&(qm.j=sm);sm=kc(rm,"serverCertificate",Uint8Array);null!=sm&&(qm.c=sm);if(sm=kc(rm,"initData",Object)){rm=kc(sm,"initData",Uint8Array);if(null==rm)throw Error("'initData.initData' cannot be null.");sm=ic(sm,"initDataType");if(null==sm)throw Error("'initData.initDataType' cannot be null.");qm.b.push({initData:new Uint8Array(rm.buffer),initDataType:sm});}}0==qm.b.length&&mm.a&&mm.a.psshBox&&ae(qm,[{initData:mm.a.psshBox,initDataType:"cenc"}]);nm.push(qm);}return nm;}function wj(lm,mm,nm,om,pm){if(!nm.u||0===nm.u.length)return null;var qm=null,rm=1,sm=0;if(nm.g){qm=nm.f.split("/")[1];if("mp4"!=qm&&"webm"!=qm){qm=null;}else{var tm=nm.g;"webm"!=qm||tm.c?tm.a||tm.b&&tm.b.a?(rm=tm.b,rm||(rm=new dg(),rm.url=nm.u,rm.a=tm.a?tm.a.clone():null),sm=yj(rm,pm),rm=tm.c?yj(tm.c,pm):null,tm.f?(tm=tm.f,tm=new mh(pm,nm.u,tm.ja,tm.end)):tm=null,lm=new mj(lm,mm,qm,sm,rm,tm,om,pm),mm=new yh(rm),om=new ri(),om.K=lm,om.N=mm,qm=om):qm=null:qm=null;}rm=nm.g.h;sm=nm.g.g;}else if(nm.b){qm=nm.b,!qm.c&&!qm.f&&1<qm.b.length?qm=null:qm.c||mm.a||qm.f||1!=qm.b.length?qm.f&&0===qm.f.a.length?qm=null:(qm=qm.h?yj(qm.h,pm):null,lm=new pi(lm,mm,nm,om,pm),mm=new yh(qm),om=new ri(),om.K=lm,om.N=mm,qm=om):qm=null,rm=nm.b.a,sm=nm.b.g;}else if(nm.a){lm:if(qm=nm.a,rm=0+(qm.f?1:0),rm+=qm.c?1:0,rm+=qm.b?1:0,0==rm?rm=false:(1!=rm&&(qm.f?(qm.c=null,qm.b=null):qm.c&&(qm.b=null)),rm=true),rm){rm=null;if(qm.g&&(rm=(qm=nm.a.g)?xj(nm,qm,eg):null,!rm)){qm=null;break lm;}qm=rm?yj(rm,pm):null;rm=nm.a;rm.f?(rm=nm.f.split("/")[1],"mp4"!=rm&&"webm"!=rm?lm=null:"webm"!=rm||qm?vh(pm,nm,1,0)?(sm=(sm=nm.a.f)?xj(nm,sm,dg):null)?(sm=yj(sm,pm),lm=new mj(lm,mm,rm,sm,qm,null,om,pm)):lm=null:lm=null:lm=null):lm=rm.h?rm.c?new qi(lm,mm,nm,om,pm):rm.b?"dynamic"!=lm.type&&null==mm.a?null:new oi(lm,mm,nm,om,pm):null:null;lm?(mm=new yh(qm),om=new ri(),om.K=lm,om.N=mm,qm=om):qm=null;}else qm=null;;rm=nm.a.a;sm=nm.a.i;}else "text"==nm.f.split("/")[0]&&(qm=new ri(),qm.K=new jj(new mh(pm,nm.u)));if(!qm)return null;qm.id=nm.id;sm&&(qm.b=-1*sm/rm);qm.bandwidth=nm.bandwidth;qm.width=nm.width;qm.height=nm.height;qm.a=nm.f||"";qm.c=nm.h||"";qm.fbQualityLabel=nm.fbQualityLabel||null;qm.fbQualityClass=nm.fbQualityClass||null;for(lm=0;lm<nm.c.length;++lm)mm=nm.c[lm],mm.b&&qm.f.push(mm.b);return qm;}function xj(lm,mm,nm){mm=wh(mm,lm.id,null,lm.bandwidth,null);if(!mm)return null;nm=new nm();nm.url=oh(lm.u,mm);return nm;}function yj(lm,mm){var nm=lm.url,om=0,pm=null;lm.a&&(om=lm.a.ja,pm=lm.a.end);return new mh(mm,nm,om,pm);}function zj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function ak(lm,mm){var nm=new bk(mm);lm.streamHistory.push(new ck(nm));if(nm.videoHeight||!lm.streamStats)lm.streamStats=nm;}function bk(lm){this.videoWidth=lm.width;this.videoHeight=lm.height;this.videoMimeType=lm.a;this.videoBandwidth=lm.bandwidth;}function ck(lm){this.timestamp=fb()/1000;this.value=lm;}function dk(lm,mm,nm,om,pm){this.b=new mh(null,[new cf(lm)]);this.a=new eh();this.a.body=mm;this.a.method=nm;this.a.a=3;this.a.l=om;this.a.c=0;lm=pm||{};for(var qm in lm)this.a.b[qm]=lm[qm];}function ek(lm){return ph(lm.b,lm.a).then(function(mm){return h.resolve(new Uint8Array(mm));});}function fk(lm,mm,nm){tc.call(this,lm);this.c=mm;this.j=nm;this.a=this.h=null;this.i=new pc();this.b=[];this.f=[];this.m=0;this.g=new yc();this.l=null;}n(fk,tc);fk.prototype.destroy=function(){this.U=null;for(var lm=0;lm<this.f.length;++lm)this.f[lm].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(j.clearTimeout(this.l),this.l=null);this.c=this.j=null;};fk.prototype.initialize=function(){var lm=new lc(),mm;mm=this.j;if(mm.C){mm=mm.a.a[0];for(var nm=[],om=0;om<mm.a.length;++om)nm.push.apply(nm,wi(mm.a[om]));mm=nm;}else mm=[];for(nm=0;nm<mm.length;++nm)om=mm[nm],om.a.a||om.b&&!nk(om.b)||lm.push(om.contentType,om);for(var nm={},om=false,pm=0;pm<mm.length;++pm){var qm=mm[pm];if(qm.a.a&&!lm.a.hasOwnProperty(qm.contentType)){var rm=qm.a.a,sm=nm[rm];sm||(sm=qm.a,sm={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:sm.g?"required":"optional",persistentState:sm.i?"required":"optional",sessionTypes:["temporary"]},nm[rm]=sm);if(qm.b&&(rm=qm.contentType+"Capabilities",rm in sm)){om=true;sm[rm]||(sm[rm]=[]);var tm;"audio"==qm.contentType?tm=qm.a.f:"video"==qm.contentType&&(tm=qm.a.j);sm[rm].push({contentType:qm.b,robustness:tm});}}}if(!om)if(mm.length){this.a=mm[0].a;}else throw lm=Error("No DrmInfo exists!"),lm.type="drm",lm;if(0==Object.keys(nm).length)return ol(this.j,lm),this.g.resolve(),h.resolve();tm=new yc();nm=gk(nm,tm);nm=nm.then(this.v.bind(this,mm,lm));tm.reject(null);return nm;};function gk(lm,mm){for(var nm in lm)mm=mm.catch(function(om,pm){return navigator.requestMediaKeySystemAccess(om,[pm]);}.bind(null,nm,lm[nm]));return mm;}fk.prototype.v=function(lm,mm,nm){if(!this.c)return ik();for(var om=nm.keySystem,pm=nm.getConfiguration(),qm=["audio","video"],rm=0;rm<qm.length;++rm){var sm=qm[rm];if(!mm.a.hasOwnProperty(sm)){var tm=pm[sm+"Capabilities"];if(tm){for(var tm=tm[0],um=[],vm={},wm=0;wm<lm.length;++wm){var xm=lm[wm],ym=tm?xm.b==tm.contentType:xm.contentType==sm;xm.a.a!=om||!ym||xm.id in vm||(um.push(xm),vm[xm.id]=true,this.a=this.a?zd(this.a,xm.a):xm.a);}mm.set(sm,um);}}}ol(this.j,mm);return nm.createMediaKeys().then(function(zm){this.h=zm;}.bind(this));};function hk(lm){return lm.c?lm.h?lm.c.setMediaKeys(lm.h).then(ed(lm,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):h.resolve():ik();})).then(ed(lm,function(){if(!this.c)return ik();for(var mm=0;mm<this.a.b.length;++mm){var nm=this.a.b[mm];this.s({type:"encrypted",initDataType:nm.initDataType,initData:nm.initData});}0==this.a.b.length&&qc(this.i,this.c,"encrypted",this.s.bind(this));})):h.resolve():ik();}function ik(){var lm=Error("EmeManager destroyed");lm.type="destroy";return h.reject(lm);}fk.prototype.s=function(lm){for(var mm=new Uint8Array(lm.initData),nm=0;nm<this.b.length;++nm)if(xd(mm,this.b[nm].data))return;try{var pm=jk(this);}catch(om){mm=zb(om);this.dispatchEvent(mm);this.g.reject(om);return;}lm=pm.generateRequest(lm.initDataType,lm.initData);this.b.push({data:mm,Ra:pm});lm.catch(ed(this,function(qm){if(this.c){for(var rm=0;rm<this.b.length;++rm)if(this.b[rm].Ra==pm){this.b.splice(rm,1);break;}rm=zb(qm);this.dispatchEvent(rm);this.g.reject(qm);}}));this.f.push(pm);};function jk(lm){var mm=null,mm=lm.h.createSession();qc(lm.i,mm,"message",lm.B.bind(lm));qc(lm.i,mm,"keystatuseschange",lm.A.bind(lm));return mm;}fk.prototype.B=function(lm){kk(this,lm.target,this.a,lm.message);};fk.prototype.A=function(lm){lm=lm.target;var mm={};lm.keyStatuses.forEach(function(om,pm){if("string"==typeof om){var qm=om;om=pm;pm=qm;}if("com.microsoft.playready"==this.a.a&&16==om.byteLength){var qm=new DataView(om),rm=qm.getUint32(0,true),sm=qm.getUint16(4,true),tm=qm.getUint16(6,true);qm.setUint32(0,rm,false);qm.setUint16(4,sm,false);qm.setUint16(6,tm,false);}qm=wd(new Uint8Array(om));mm[qm]=pm;}.bind(this));if(lm.expiration<Date.now()){for(var nm=0;nm<this.b.length;++nm)if(this.b[nm].Ra==lm){this.b.splice(nm,1);break;}lm.close();this.f.splice(this.f.indexOf(lm),1);}rl(this.j,mm);};function kk(lm,mm,nm,om){om=lk(nm,om);ek(new dk(om.url,om.body,om.method,nm.l,om.headers)).then(ed(lm,function(pm){nm.m&&(pm=nm.m(pm));return mm.update(pm);})).then(ed(lm,function(){var pm=yb({type:"sessionReady",detail:mm});this.dispatchEvent(pm);this.m++;this.m>=this.f.length&&this.g.resolve();})).catch(ed(lm,function(pm){pm.Ra=mm;pm=zb(pm);this.dispatchEvent(pm);}));}function lk(lm,mm){var nm={url:lm.h,body:mm.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===lm.a){for(var om=String.fromCharCode.apply(null,new Uint16Array(nm.body)),om=(new DOMParser()).parseFromString(om,"application/xml"),pm=om.getElementsByTagName("name"),qm=om.getElementsByTagName("value"),rm=0;rm<pm.length;rm++)nm.headers[pm[rm].childNodes[0].nodeValue]=qm[rm].childNodes[0].nodeValue;nm.body=j.atob(om.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!lm.s)return nm;lm.s(nm);nm.url=ic(nm,"url");if(null==nm.url)throw Error("'url' cannot be null.");if(!(nm.body instanceof ArrayBuffer||"string"==typeof nm.body||null==nm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");nm.method=ic(nm,"method");if("GET"!=nm.method&&"POST"!=nm.method)throw Error("'method' must be either 'GET' or 'POST'.");nm.headers=kc(nm,"headers",Object);if(null==nm.headers)throw Error("'headers' cannot be null.");return nm;}function mk(lm){tc.call(this,null);this.a=lm;this.b=null;this.g=new pc();this.l=this.j=null;this.D=0;this.B=null;this.m=false;this.M=true;this.I=false;this.L=true;this.h=new zj();this.i=false;this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new w()};this.s=this.f=null;this.v=1;this.F=null;this.A=false;}n(mk,tc);m("shaka.player.Player",mk);mk.version="v1.6.4-fb";mk.isBrowserSupported=function(){return !!j.MediaSource&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!j.Uint8Array;};mk.prototype.ba=function(){var lm={},mm=this.b;if(mm){var nm=mm.fb();lm.BandwidthEstimator=nm.BandwidthEstimator;var om=nm.VideoSourceStream;om&&(lm.VideoSourceStream=om,(om=lm.VideoBufferManager=om.ba().SourceBufferManager)&&(lm.VideoSourceBuffer=om.ba().SourceBuffer));(om=lm.AudioSourceStream=nm.AudioSourceStream)&&(om=lm.AudioBufferManager=om.ba().SourceBufferManager)&&(lm.AudioSourceBuffer=om.ba().SourceBuffer);lm.TextSourceStream=nm.TextSourceStream;lm.getManifest=mm.bb.bind(mm);}else lm.getManifest=function(){};lm.jc=true;return lm;};mk.prototype.getDebug=mk.prototype.ba;mk.prototype.X=function(lm){this.M=lm;};mk.prototype.setResumeAfterBuffering=mk.prototype.X;function nk(lm){return "text/vtt"==lm?!!j.VTTCue:MediaSource.isTypeSupported(lm);}mk.isTypeSupported=nk;mk.setTextStyle=function(lm){var mm=document.getElementById("ShakaPlayerTextStyle");mm||(mm=document.createElement("style"),mm.id="ShakaPlayerTextStyle",document.head.appendChild(mm));for(mm=mm.sheet;mm.cssRules.length;)mm.deleteRule(0);mm.insertRule("::cue { "+y(lm)+" }",0);};mk.prototype.destroy=function(){return this.G().then(ed(this,function(){this.g.destroy();this.a=this.g=null;})).catch(function(){});};mk.prototype.destroy=mk.prototype.destroy;mk.prototype.G=function(){this.i=true;return ok(this);};mk.prototype.unload=mk.prototype.G;function ok(lm){var mm;lm.f&&(mm=lm.f.getOperationLogger("unload"));if(!lm.b)return mm&&mm.log(),h.resolve();lm.m&&uk(lm);lm.a.pause();rc(lm.g);tk(lm);rk(lm);lm.j&&(lm.j.destroy(),lm.j=null);lm.a.src="";var nm=lm.a.setMediaKeys(null).then(function(){mm&&mm.log();});lm.b&&(lm.b.destroy(),lm.b=null);lm.m=false;lm.h=new zj();return nm;}mk.prototype.ta=function(lm){return pk(this,lm);};mk.prototype.load=mk.prototype.ta;function pk(lm,mm){var nm;lm.f&&(nm=lm.f.getOperationLogger("load").setState("loading"));hl(mm,lm.a);var om=null;lm.i=false;if(lm.b||!lm.I)om=ok(lm).then(ed(lm,function(){return mm.Ca();}));lm.a.autoplay&&(q("load"),qc(lm.g,lm.a,"timeupdate",lm.Gb.bind(lm)));mm.nb(lm.c);mm.R=lm.F;lm.F=null;om||(om=mm.Ca());om.catch(ed(lm,function(pm){mm.destroy();return h.reject(pm);}));return om.then(ed(lm,function(){if(!this.a||this.i)return qk();this.b=mm;qc(this.g,this.b,"seekrangechanged",this.Nb.bind(this));this.j=new fk(this,this.a,this.b);return this.j.initialize();})).then(ed(lm,function(){if(!this.a||this.i)return qk();qc(this.g,this.a,"error",this.ac.bind(this));qc(this.g,this.a,"playing",this.Mb.bind(this));qc(this.g,this.a,"pause",this.Lb.bind(this));return il(this.b,this,this.a);})).then(ed(lm,function(){return !this.a||this.i?qk():hk(this.j);})).then(ed(lm,function(){if(!this.a||this.i)return qk();sk(this);nm&&nm.log();})).catch(ed(lm,function(pm){nm&&nm.setError(pm).log();if(!this.a||this.i)return qk();if("destroy"!=pm.type){var qm=zb(pm);this.dispatchEvent(qm);}return this.G().then(function(){return h.reject(pm);});}));}function qk(){var lm=Error("Player destroyed");lm.type="destroy";return h.reject(lm);}k=mk.prototype;k.Gb=function(){r("load");this.h.playbackLatency=s("load")/1000;this.g.za(this.a,"timeupdate");};k.ac=function(){if(this.a.error){var lm=this.a.error.code;lm!=MediaError.MEDIA_ERR_ABORTED&&(lm=Error(vk[lm]||"Unknown playback error."),lm.type="playback",lm=zb(lm),this.dispatchEvent(lm));}};k.Mb=function(){q("playing");this.f&&this.f.getEventLogger("playing").setState("playing").log();!this.l&&0>this.v&&(this.a.playbackRate=0,this.C(this.a.currentTime,Date.now(),this.v));this.m&&!this.L&&uk(this);};k.Lb=function(){this.f&&this.f.getEventLogger("pause").setState("paused").log();r("playing");var lm=s("playing");if(!isNaN(lm)){var mm=this.h;mm.playTime+=lm/1000;}rk(this);};k.Nb=function(lm){this.D=lm.start;};k.zb=function(){if(!this.a.paused){r("playing");var lm=s("playing");if(!isNaN(lm)){var mm=this.h;mm.playTime+=lm/1000;q("playing");}}lm=this.h;mm=this.a;mm.getVideoPlaybackQuality&&(mm=mm.getVideoPlaybackQuality(),lm.decodedFrames=mm.totalVideoFrames,lm.droppedFrames=mm.droppedVideoFrames);return this.h;};mk.prototype.getStats=mk.prototype.zb;mk.prototype.sa=function(){return this.b?this.b.F():[];};mk.prototype.getVideoTracks=mk.prototype.sa;mk.prototype.pa=function(){return this.b?this.b.X():[];};mk.prototype.getAudioTracks=mk.prototype.pa;mk.prototype.ra=function(){return this.b?this.b.ob():[];};mk.prototype.getTextTracks=mk.prototype.ra;mk.prototype.selectVideoTrack=function(lm,mm){return this.b?this.b.selectVideoTrack(lm,void 0==mm?true:mm):false;};mk.prototype.selectVideoTrack=mk.prototype.selectVideoTrack;mk.prototype.ua=function(lm,mm,nm){return this.b?tl(this.b,"audio",lm,void 0==mm?true:mm,nm):false;};mk.prototype.selectAudioTrack=mk.prototype.ua;mk.prototype.va=function(lm){return this.b?tl(this.b,"text",lm,false):false;};mk.prototype.selectTextTrack=mk.prototype.va;mk.prototype.ia=function(lm){this.b&&pl(this.b,lm);};mk.prototype.enableTextTrack=mk.prototype.ia;mk.prototype.W=function(lm){rk(this);0<=lm?this.a.playbackRate=lm:this.a.paused||(this.a.playbackRate=0,this.C(this.a.currentTime,Date.now(),lm));this.v=lm;};mk.prototype.setPlaybackRate=mk.prototype.W;mk.prototype.R=function(){return this.v;};mk.prototype.getPlaybackRate=mk.prototype.R;mk.prototype.wa=function(lm){this.F=lm;};mk.prototype.setPlaybackStartTime=mk.prototype.wa;mk.prototype.O=function(){return this.b?this.b.pb():false;};mk.prototype.isLive=mk.prototype.O;mk.prototype.Y=function(lm){if(lm){var mm=gc(lm,"enableAdaptation");null!=mm&&(this.c.enableAdaptation=mm);mm=gc(lm,"allowSkipUnloading");null!=mm&&(this.I=mm);mm=gc(lm,"endBufferingOnPlaying");null!=mm&&(this.L=mm);mm=gc(lm,"usePlaybackRateForBuffering");null!=mm&&(this.A=mm);mm=hc(lm,"streamBufferSize",0);null!=mm&&(this.c.streamBufferSize=mm);mm=hc(lm,"dynamicStreamBufferSize",0);null!=mm&&(this.c.dynamicStreamBufferSize=mm);mm=gc(lm,"addCdnDebugQueryParameters");null!=mm&&(this.c.addCdnDebugQueryParameters=mm);mm=hc(lm,"initialStreamBufferSize",0);null!=mm&&(this.c.initialStreamBufferSize=mm);mm=gc(lm,"includeStreamBufferSizeInStartOffset");null!=mm&&(this.c.includeStreamBufferSizeInStartOffset=mm);mm=hc(lm,"liveStreamEndTimeout",0);null!=mm&&(this.c.liveStreamEndTimeout=mm);mm=hc(lm,"licenseRequestTimeout",0);null!=mm&&(this.c.licenseRequestTimeout=mm);mm=hc(lm,"mpdRequestTimeout",0);null!=mm&&(this.c.mpdRequestTimeout=mm);mm=hc(lm,"minMpdRefreshInterval",0);null!=mm&&(this.c.minMpdRefreshInterval=mm);mm=gc(lm,"enableLiveInterruptionDetection");null!=mm&&(this.c.enableLiveInterruptionDetection=mm);mm=gc(lm,"enableManifestDebug");null!=mm&&(this.c.enableManifestDebug=mm,tc.prototype.Xa=mm,mm||(tc.prototype.ka=function(){}));mm=gc(lm,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=mm&&(this.c.resolveVideoTimeUpdateOnFragmentedTimeRanges=mm);mm=hc(lm,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=mm&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=mm);mm=hc(lm,"liveInterruptionConsecutiveUpdatesWithChange");null!=mm&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=mm);mm=gc(lm,"reappendInitSegmentAfterAbort");null!=mm&&(this.c.reappendInitSegmentAfterAbort=mm);mm=gc(lm,"liveSendPushHeaders");null!=mm&&(this.c.liveSendPushHeaders=mm);mm=hc(lm,"liveMaxManifestFetchesWithPush");null!=mm&&(this.c.liveMaxManifestFetchesWithPush=mm);mm=hc(lm,"liveMaxSegmentsToPush");null!=mm&&(this.c.liveMaxSegmentsToPush=mm);mm=hc(lm,"segmentRequestTimeout",0);null!=mm&&(this.c.segmentRequestTimeout=mm);mm=ic(lm,"preferredLanguage");null!=mm&&(this.c.preferredLanguage=mm);mm=kc(lm,"restrictions",w);null!=mm&&(this.c.restrictions=mm.clone());mm=lm.performanceLogger;null!=mm&&(this.f=this.c.performanceLogger=mm);mm=lm.useInlineInitSegment;null!=mm&&(this.c.useInlineInitSegment=mm);lm=gc(lm,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=lm&&(fh=!lm);this.b&&this.b.nb(this.c);}};mk.prototype.configure=mk.prototype.Y;mk.prototype.qa=function(){return this.c;};mk.prototype.getConfiguration=mk.prototype.qa;function rk(lm){lm.l&&(j.clearTimeout(lm.l),lm.l=null);}function sk(lm){tk(lm);lm.B=j.setTimeout(lm.V.bind(lm),100);}function tk(lm){lm.B&&(j.clearTimeout(lm.B),lm.B=null);}mk.prototype.C=function(lm,mm,nm){this.l=null;var om=(Date.now()-mm)/1000*nm;this.a.currentTime<this.D+(this.O()?1:.05)?this.a.pause():(om=Math.max(this.D,lm+om),this.a.currentTime=om,this.l=j.setTimeout(this.C.bind(this,lm,mm,nm),250));};function uk(lm){r("buffering");lm.s&&(lm.s.log(),lm.s=null);var mm=lm.h;mm.bufferingTime+=s("buffering")/1000;lm.A&&(lm.a.playbackRate=lm.v);lm.m=false;lm.dispatchEvent(yb({type:"bufferingEnd"}));}mk.prototype.V=function(){sk(this);if(!this.a.ended&&!this.a.seeking){var lm=this.a.buffered,mm=lm.length?lm.end(lm.length-1):0,lm=Math.max(mm-this.a.currentTime,0),nm=this.a.currentTime,om=this.a.duration,om=isNaN(om)?0:Math.max(om-.05,0),mm=mm>=om||nm>=om;if(!this.m){!this.a.paused&&!mm&&.5>lm&&(this.m=true,this.A?this.a.playbackRate=0:this.a.pause(),this.h.bufferingHistory.push(fb()/1000),this.f&&!this.s&&(lm=this.a.buffered,lm=lm.length?lm.end(lm.length-1):0,lm=Math.max(lm-this.a.currentTime,0),this.s=this.f.getOperationLogger("buffering").setLength(nl(this.b)-lm)),q("buffering"),this.dispatchEvent(yb({type:"bufferingStart"}))),em(this.b)&&uk(this);}else if(lm>nl(this.b)||em(this.b))uk(this),this.M&&!this.A&&this.a.play();}};var vk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function wk(lm){for(var mm=0;mm<lm.length;++mm)for(var nm=lm[mm],om=0;om<nm.a.length;++om){for(var pm=nm.a[om],qm=pm,rm=0;rm<qm.o.length;++rm)nk(ti(qm.o[rm]))||(qm.o.splice(rm,1),--rm);0==pm.o.length&&(nm.a.splice(om,1),--om);}for(mm=0;mm<lm.length;++mm)for(nm=lm[mm],om=0;om<nm.a.length;++om)nm.a[om].o.sort(xk);}function xk(lm,mm){var nm=lm.bandwidth||Number.MAX_VALUE,om=mm.bandwidth||Number.MAX_VALUE;return nm<om?-1:nm>om?1:0;}function yk(lm){this.a=lm;}yk.prototype.destroy=function(){this.a.destroy();this.a=null;};yk.prototype.update=function(lm){var mm=zk(lm),nm=zk(this.a);return h.all([mm,nm]).then(ed(this,function(om){var pm=om[0];om=om[1];wk(this.a.a);lm.b&&!this.a.b&&(lm.i=true);lm.f=this.a.f;lm.g=this.a.g?this.a.g.clone():null;lm.c=this.a.c;var qm=[];al(lm,this.a,pm,om,qm);wk(lm.a);return h.resolve(qm);}));};function zk(lm){function mm(om,pm){return om.concat(pm);}var nm=lm.a.map(function(om){return om.a;}).reduce(mm,[]).map(function(om){return om.o;}).reduce(mm,[]);lm=nm.map(function(om){return om.K.create();});return h.all(lm).then(function(om){for(var pm={},qm=0;qm<nm.length;++qm)pm[nm[qm].H]=om[qm];return h.resolve(pm);});}function al(lm,mm,nm,om,pm){var qm=new lc();lm.a.forEach(function(um,vm){qm.push(um.id||""+vm,um);});var rm=new lc();mm.a.forEach(function(um,vm){rm.push(um.id||""+vm,um);});lm=oc(qm);for(mm=0;mm<lm.length;++mm){var sm=lm[mm],tm=qm.get(sm);1<tm.length||(sm=rm.get(sm))&&0!=sm.length&&1==sm.length&&(bl(tm[0],sm[0],nm,om,pm),tm[0].b=sm[0].b);}}function bl(lm,mm,nm,om,pm){var qm=new lc();lm.a.forEach(function(um,vm){qm.push(um.id||""+vm,um);});var rm=new lc();mm.a.forEach(function(um,vm){rm.push(um.id||""+vm,um);});lm=oc(qm);for(mm=0;mm<lm.length;++mm){var sm=lm[mm],tm=qm.get(sm);1<tm.length||(sm=rm.get(sm))&&0!=sm.length&&1==sm.length&&cl(tm[0],sm[0],nm,om,pm);}}function cl(lm,mm,nm,om,pm){var qm=new lc();lm.o.forEach(function(wm,xm){qm.push(wm.id||""+xm,wm);});var rm=new lc();mm.o.forEach(function(wm,xm){rm.push(wm.id||""+xm,wm);});mm={};for(var sm=oc(qm),tm=0;tm<sm.length;++tm){var um=sm[tm];mm[um]=um;var vm=qm.get(um);1<vm.length||((um=rm.get(um))&&0!=um.length?1==um.length&&(dl(vm[0],um[0],nm,om),vm[0].N=um[0].N,um[0].N=null,vm[0].b=um[0].b):(pm.push(vm[0]),lm.o.splice(lm.o.indexOf(vm[0]),1)));}sm=oc(rm);for(tm=0;tm<sm.length;++tm)um=sm[tm],mm[um]||(mm[um]=um,um=rm.get(um),lm.o.push(um[0]));}function dl(lm,mm,nm,om){lm=nm[lm.H];om=om[mm.H];mm=lm.length();lm.Pa(om)&&(om=lm.length(),lm.g.push(mm!==om),50<lm.g.length&&lm.g.shift());}function el(){this.a=this.b=null;this.f=new pc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}m("shaka.media.SimpleAbrManager",el);el.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};el.prototype.initialize=function(lm,mm){this.b||this.a||(this.b=lm,this.a=mm);};el.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,qc(this.f,this.b,"bandwidth",this.l.bind(this)),qc(this.f,this.a,"adaptation",this.j.bind(this)),qc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};el.prototype.enable=function(lm){this.i=lm;};el.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var lm=fl(this);return lm?lm.id:null;};el.prototype.getInitialSwitchReason=function(){return null;};el.prototype.getInitialAudioTrackId=function(){return null;};el.prototype.selectVideoTrack=function(lm,mm,nm){this.g&&this.a.selectVideoTrack(lm.id,mm,nm);};el.prototype.l=function(){Date.now()<this.c||this.h();};el.prototype.h=function(){if(this.i){var lm=fl(this);if(lm){if(lm.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(lm,false);}this.c=Number.POSITIVE_INFINITY;}};el.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function fl(lm){var mm=lm.a.F();if(0==mm.length)return null;mm.sort(ga);var nm;lm:{nm=lm.a.X();for(var om=0;om<nm.length;++om)if(nm[om].active){nm=nm[om];break lm;}nm=null;};nm=nm?nm.bandwidth:0;lm=lm.b.getBandwidth();for(var om=mm[0],pm=0;pm<mm.length;++pm){var qm=mm[pm],rm=pm+1<mm.length?mm[pm+1]:{bandwidth:Number.POSITIVE_INFINITY};if(qm.bandwidth&&(rm=(rm.bandwidth+nm)/.85,lm>=(qm.bandwidth+nm)/.95&&lm<=rm&&(om=qm,om.active)))break;}return om;}function gl(lm,mm,nm){tc.call(this,null);this.a=lm;this.O=mm;this.j=new pc();this.h=new MediaSource();this.f=null;this.Fa=0;this.hb=false;this.wa=0;this.ca=null;this.va=3;this.ua=this.ib=false;this.sa=0;this.lb=1;this.ta=Infinity;this.cb=false;this.c=new lc();this.l=nm;this.l.initialize(mm,this);this.C=false;this.B="en";this.ia=false;this.G=null;this.v=new yc();this.vb=new yc();this.i=new w();this.A=null;this.mb=1;this.b={};this.V=new yc();this.ra=0;this.kb=15;this.s=null;this.Wa=this.jb=false;this.m={};this.R=this.M=this.I=null;this.g={};this.Y=false;this.ub=null;}n(gl,tc);m("shaka.player.StreamVideoSource",gl);gl.prototype.fb=function(){return {VideoSourceStream:this.b.video,AudioSourceStream:this.b.audio,TextSourceStream:this.b.text,BandwidthEstimator:this.O};};gl.prototype.getStreamDebug=gl.prototype.fb;gl.prototype.nb=function(lm){null!=lm.streamBufferSize&&(this.g.streamBufferSize=lm.streamBufferSize);null!=lm.initialStreamBufferSize&&(this.g.initialStreamBufferSize=lm.initialStreamBufferSize);null!=lm.dynamicStreamBufferSize&&(this.g.dynamicStreamBufferSize=lm.dynamicStreamBufferSize);null!=lm.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=lm.addCdnDebugQueryParameters);null!=lm.segmentRequestTimeout&&(this.g.segmentRequestTimeout=lm.segmentRequestTimeout);null!=lm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=lm.resolveVideoTimeUpdateOnFragmentedTimeRanges);null!=lm.reappendInitSegmentAfterAbort&&(this.g.reappendInitSegmentAfterAbort=lm.reappendInitSegmentAfterAbort);jm(this);null!=lm.includeStreamBufferSizeInStartOffset&&(this.hb=Boolean(lm.includeStreamBufferSizeInStartOffset));null!=lm.enableAdaptation&&this.l.enable(Boolean(lm.enableAdaptation));null!=lm.mpdRequestTimeout&&(this.wa=Number(lm.mpdRequestTimeout));null!=lm.minMpdRefreshInterval&&(this.va=Number(lm.minMpdRefreshInterval)/1000);null!=lm.enableManifestDebug&&(this.cb=!!lm.enableManifestDebug);null!=lm.liveStreamEndTimeout&&(this.kb=Number(lm.liveStreamEndTimeout));null!=lm.preferredLanguage&&(this.B=dc(String(lm.preferredLanguage)));null!=lm.liveSendPushHeaders&&(this.ua=Boolean(lm.liveSendPushHeaders));null!=lm.performanceLogger&&(this.ca=this.g.performanceLogger=lm.performanceLogger);null!=lm.liveMaxManifestFetchesWithPush&&(this.sa=Number(lm.liveMaxManifestFetchesWithPush));null!=lm.liveMaxSegmentsToPush&&(this.ta=Number(lm.liveMaxSegmentsToPush));null!=lm.restrictions&&(this.i=lm.restrictions,this.C&&ql(this));};gl.prototype.destroy=function(){this.v.destroy();this.V.destroy();this.V=this.v=null;this.M&&(j.clearTimeout(this.M),this.M=null);this.I&&(j.clearTimeout(this.I),this.I=null);this.m=null;this.j.destroy();this.j=null;fc(this.b).forEach(function(lm){lm.destroy();});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.U=this.i=this.G=this.f=this.h=this.O=this.l=null;};function hl(lm,mm){qc(lm.j,lm.h,"sourceopen",lm.Hb.bind(lm));mm.src=j.URL.createObjectURL(lm.h);}k=gl.prototype;k.gb=function(){};function il(lm,mm,nm){if(!lm.C)return lm=Error("Cannot call attach() right now."),lm.type="app",h.reject(lm);lm.U=mm;lm.f=nm;lm.G=mm.zb();qc(lm.j,lm.O,"bandwidth",lm.bc.bind(lm));lm.a.b&&(qc(lm.j,mm,"bufferingStart",lm.Fb.bind(lm)),qc(lm.j,mm,"bufferingEnd",lm.Eb.bind(lm)));mm=lm.f.setMediaKeys(lm.f.mediaKeys);lm.vb.then(ed(lm,function(){vl(this).then(ed(this,function(){this.v&&this.v.resolve();this.gb();})).catch(ed(this,function(om){this.v&&this.v.reject(om);}));}));return h.all([lm.v,mm]);}k.Ca=function(){if(this.C){var lm=Error("Cannot call load() right now.");lm.type="app";return h.reject(lm);}if(!this.a||0==this.a.a.length)return lm=Error("The manifest does not specify any content."),lm.type="stream",h.reject(lm);wk(this.a.a);if(0==this.a.a.length||0==this.a.a[0].a.length||!this.a.a[0].a.some(function(mm){return "video"===mm.contentType;}))return lm=Error("The manifest specifies content that cannot be displayed on this browser/platform."),lm.type="stream",h.reject(lm);this.C=true;this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);jm(this);ql(this);return h.resolve();};function jl(lm){var mm=yb({type:"manifestwrapped",bubbles:true});lm.dispatchEvent(mm);}k.sb=function(lm){var mm;this.ca&&(mm=this.ca.getOperationLogger("update_manifest"));var nm=Date.now(),om=this.I=null,pm,qm;if(this.ua&&(!this.sa||this.sa>this.lb)){pm=Math.floor(gm(this))+1;pm=Math.min(pm,this.ta);var rm=this.b.video;if(rm=rm?rm.Ma():null)rm=rm.w(),null!=rm.a&&(qm=rm.a);if(this.f.paused||this.Y)pm=0;}pm&&this.lb++;rm=this.a.g;mm&&mm.setResource(rm.toString());(lm?this.qb():this.rb(rm,pm,qm)).then(ed(this,function(sm){om=new yk(sm);return om.update(this.a);})).then(ed(this,function(sm){om.destroy();om=null;var tm=fm(this);this.ka("SegmentIndexesUpdated",tm);tm.some(function(um){return um.Va;})&&jl(this);(tm=hm(this,tm))&&this.f.paused&&tm.end>this.f.currentTime+10&&(this.f.currentTime=tm.end);if(em(this))return mm&&mm.log(),this.Aa();for(tm=0;tm<sm.length;++tm)ll(this,sm[tm]);this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);this.g.useInitialBufferSizeWhenPaused=this.a.b;jm(this);ql(this);0==Object.keys(this.b).length?vl(this):kl(this,(Date.now()-nm)/1000);mm&&mm.log();})).catch(ed(this,function(sm){mm&&mm.setError(sm).log();om&&(om.destroy(),om=null);if("delay"==sm.type)return kl(this,0);"aborted"!=sm.type&&(sm=zb(sm),this.dispatchEvent(sm),this.a&&kl(this,0));}));};k.rb=function(){return h.reject("Cannot update manifest with this VideoSource implementation.");};k.qb=function(){return h.reject("Cannot update manifest with this VideoSource implementation.");};function kl(lm,mm){if(null!=lm.a.f){var nm=Math.max(lm.a.f,lm.va),nm=Math.max(nm-mm,0);lm.I=j.setTimeout(lm.sb.bind(lm,false),1000*nm);}}function ll(lm,mm){var nm=mm.a.split("/")[0],om=lm.b[nm];if(om&&om.xa()==mm){var pm=lm.c.get(mm.a.split("/")[0]).map(function(qm){return qm.o;}).reduce(function(qm,rm){return qm.concat(rm);},[]).filter(function(qm){return qm.S&&qm.J;});if(0==pm.length){nm=Error("All usable streams have been removed from the manifest.");nm.type="app";nm=zb(nm);lm.dispatchEvent(nm);return;}lm.m[nm].Ta==mm&&delete lm.m[nm];om.ya(pm[0],true);mm.destroy();}mm.destroy();}k.$b=function(lm){this.ub=lm;};gl.prototype.setTaggedTimeRangesEntryAdder=gl.prototype.$b;gl.prototype.F=function(){if(!this.c||!this.c.a.hasOwnProperty("video"))return [];for(var lm=this.b.video,lm=(lm=lm?lm.xa():null)?lm.H:0,mm=[],nm=this.c.get("video"),om=0;om<nm.length;++om)for(var pm=nm[om],qm=0;qm<pm.o.length;++qm){var rm=pm.o[qm];if(rm.S&&rm.J){var sm=rm.H,rm=new fa(sm,rm.bandwidth,rm.width,rm.height,rm.id,rm.fbQualityLabel,rm.fbQualityClass);sm==lm&&(rm.active=true);mm.push(rm);}}return mm;};gl.prototype.getVideoTracks=gl.prototype.F;function ml(lm){lm=lm.F();for(var mm=0;mm<lm.length;mm++)if(lm[mm].active)return lm[mm];}gl.prototype.X=function(){if(!this.c||!this.c.a.hasOwnProperty("audio"))return [];for(var lm=this.b.audio,lm=(lm=lm?lm.xa():null)?lm.H:0,mm=[],nm=this.c.get("audio"),om=0;om<nm.length;++om)for(var pm=nm[om],qm=pm.lang,rm=0;rm<pm.o.length;++rm){var sm=pm.o[rm];if(sm.S&&sm.J){var tm=sm.H,sm=new v(tm,sm.bandwidth,qm,sm.id);tm==lm&&(sm.active=true);mm.push(sm);}}return mm;};gl.prototype.getAudioTracks=gl.prototype.X;gl.prototype.ob=function(){if(!this.c||!this.c.a.hasOwnProperty("text"))return [];for(var lm=this.b.text,mm=lm?lm.xa():null,mm=mm?mm.H:0,nm=[],om=this.c.get("text"),pm=0;pm<om.length;++pm)for(var qm=om[pm],rm=qm.lang,sm=0;sm<qm.o.length;++sm){var tm=qm.o[sm].H,um=new ea(tm,rm);tm==mm&&(um.active=true,um.enabled=lm.Ja());nm.push(um);}return nm;};gl.prototype.getTextTracks=gl.prototype.ob;function nl(lm){return lm.ib?Number(lm.g.streamBufferSize):Number(lm.g.initialStreamBufferSize);}function ol(lm,mm){if(lm.C){for(var nm={},om=lm.a.a[0],pm=0;pm<om.a.length;++pm){var qm=om.a[pm];nm[qm.H]=qm;}lm.c.a={};om=oc(mm);for(pm=0;pm<om.length;++pm){var qm=om[pm],rm=mm.get(qm);if("video"==qm){var sm=rm[0].id;lm.c.push(qm,nm[sm]);}else if("audio"==qm){for(var sm=rm[0].b.split(";")[0],tm=0;tm<rm.length;++tm){var um=rm[tm];um.b.split(";")[0]==sm&&lm.c.push(qm,nm[um.id]);}}else for(tm=0;tm<rm.length;++tm)sm=rm[tm].id,lm.c.push(qm,nm[sm]);}lm.ia=true;if(nm=lm.c.get("audio"))ul(lm,nm),lm.c.set("audio",nm),nm=nm[0].lang||lm.B,ac(2,lm.B,nm)&&(lm.ia=false);if(nm=lm.c.get("text"))ul(lm,nm),lm.c.set("text",nm),nm=nm[0].lang||lm.B,ac(2,lm.B,nm)||(lm.ia=false);}}gl.prototype.selectVideoTrack=function(lm,mm,nm,om){return tl(this,"video",lm,mm,nm,om);};function pl(lm,mm){var nm=lm.b.text;nm&&nm.Ba(mm);}function ql(lm){if(lm.i){for(var mm=false,nm=0;nm<lm.a.a.length;++nm)for(var om=lm.a.a[nm],pm=0;pm<om.a.length;++pm){var qm=om.a[pm];if("video"==qm.contentType)for(var rm=0;rm<qm.o.length;++rm){var sm=qm.o[rm],tm=sm.J;sm.J=true;lm.i.maxWidth&&sm.width>lm.i.maxWidth&&(sm.J=false);lm.i.maxHeight&&sm.height>lm.i.maxHeight&&(sm.J=false);lm.i.minHeight&&sm.height<lm.i.minHeight&&(sm.J=false);lm.i.maxBandwidth&&sm.bandwidth>lm.i.maxBandwidth&&(sm.J=false);lm.i.minBandwidth&&sm.bandwidth<lm.i.minBandwidth&&(sm.J=false);tm!=sm.J&&(mm=true);}}0!=mc(lm.c).length&&mm&&(sl(lm),0<lm.F().length||(mm=Error("The application has restricted all video tracks!"),mm.type="app",mm=zb(mm),lm.dispatchEvent(mm)));}}gl.prototype.pb=function(){return this.a?this.a.b:false;};gl.prototype.isLive=gl.prototype.pb;gl.prototype.Yb=function(lm){this.ib=lm;};gl.prototype.setIsLiveInterrupted=gl.prototype.Yb;gl.prototype.gc=function(){for(var lm in this.b)this.b[lm].xb();};gl.prototype.forceResyncVideoBuffer=gl.prototype.gc;function rl(lm,mm){for(var nm,om=false,pm=new lc(),qm=mc(lm.c),rm=0;rm<qm.length;++rm)for(var sm=qm[rm],tm=0;tm<sm.o.length;++tm){var um=sm.o[tm];um.f.forEach(function(vm){pm.push(vm,um);});}for(nm in mm)if(qm=vb[mm[nm]]||null,sm=pm.get(nm)){for(rm=0;rm<sm.length;++rm)um=sm[rm],tm=um.S,um.S=!qm,tm!=um.S&&(om=true);}else zc(nm);om&&(sl(lm),om=lm.X(),nm=lm.F(),om=lm.c.a.hasOwnProperty("audio")&&0==om.length,nm=lm.c.a.hasOwnProperty("video")&&0==nm.length,om||nm)&&(nm=Error("The key system has restricted all "+(om&&nm?"audio and video tracks.":om?"audio tracks.":"video tracks.")),nm.type="drm",nm=zb(nm),lm.dispatchEvent(nm));}function sl(lm){var mm=yb({type:"trackschanged",bubbles:true});lm.dispatchEvent(mm);}function tl(lm,mm,nm,om,pm,qm){if(!lm.c.a.hasOwnProperty(mm)||!lm.b[mm])return false;for(var rm=lm.c.get(mm),sm=0;sm<rm.length;++sm)for(var tm=rm[sm],um=0;um<tm.o.length;++um){var vm=tm.o[um];if(vm.H==nm){if(!vm.S||!vm.J)return false;if("text"!=mm&&!lm.Wa)return nm=lm.m[mm],lm.m[mm]={Ta:vm,$a:null!=nm&&nm.$a||om,ab:null!=nm&&nm.ab||pm,switchReason:qm},true;ak(lm.G,vm);lm.b[mm].ya(vm,om,pm,qm);return true;}}return false;}function ul(lm,mm){for(var nm=0;2>=nm;++nm)for(var om=0;om<mm.length;++om){var pm=mm[om];if(ac(nm,lm.B,pm.lang)){mm.splice(om,1);mm.splice(0,0,pm);return;}}for(om=0;om<mm.length;++om)if(pm=mm[om],pm.b){mm.splice(om,1);mm.splice(0,0,pm);break;}}k=gl.prototype;k.Hb=function(){this.j.za(this.h,"sourceopen");this.vb.resolve();};function vl(lm){var mm;lm.ca&&(mm=lm.ca.getOperationLogger("start_streams"));for(var nm=[],om=["audio","video","text"],pm=0;pm<om.length;++pm){var qm=om[pm];lm.c.a.hasOwnProperty(qm)&&nm.push(lm.c.get(qm)[0]);}for(var rm=wl(lm,nm),pm=0;pm<om.length;++pm)if(qm=om[pm],lm.c.a.hasOwnProperty(qm)&&!rm[qm])return lm=Error("Unable to select an initial "+qm+" stream: all "+qm+" streams have been restricted (by the application or by the key system)."),lm.type="stream",mm&&mm.setError(lm).log(),h.reject(lm);nm=fc(rm).map(function(sm){return sm.K.create();});return h.all(nm).then(ed(lm,function(sm){if(!sm.every(function(tm){return tm.length();}))return sm=Error("Some streams are not available."),sm.type="stream",h.reject(sm);sm=hm(this,sm);if(!sm)return sm=Error("Some streams are not available."),sm.type="stream",h.reject(sm);if(!xl(this,rm))return sm=Error("Failed to create Stream objects."),sm.type="stream",h.reject(sm);this.l.start();zl(this,rm,sm);return h.resolve();})).then(function(){mm&&mm.log();}).catch(ed(lm,function(sm){if("aborted"==sm.type){mm&&mm.setError(sm).log();}else{Object.keys(this.b);if(this.a.b)return fb()<this.a.h?(sm=Math.max(this.a.h-Date.now()/1000,this.va),this.I=j.setTimeout(this.sb.bind(this,true),1000*sm)):kl(this,0),mm&&mm.log(),h.resolve();mm&&mm.setError(sm).log();return h.reject(sm);}}));}function wl(lm,mm){for(var nm={},om=0;om<mm.length;++om){var pm=mm[om],qm=null;if("video"==pm.contentType){var rm=lm.l.getInitialVideoTrackId();if(null==rm)continue;qm=pm.o.filter(function(sm){return sm.H==rm;});if(0==qm.length)continue;qm=qm[0];}else if("audio"==pm.contentType){if(rm=lm.l.getInitialAudioTrackId(),qm=pm.o.filter(function(sm){return sm.H==rm;}),0==qm.length){qm=pm.o.filter(function(sm){return sm.S&&sm.J;});if(0==qm.length)continue;qm=pm.o[Math.floor(qm.length/2)];}else qm=qm[0];}else 0<pm.o.length&&(qm=pm.o[0]);nm[pm.contentType]=qm;}return nm;}function xl(lm,mm){var nm={},om;for(om in mm){var pm=mm[om],pm="text"==om?new kj(lm,lm.f):yl(lm,pm);if(!pm)return fc(nm).forEach(function(qm){qm.destroy();}),false;nm[om]=pm;}lm.b=nm;return true;}function yl(lm,mm){var nm=new aj(lm,lm.f,lm.h,ti(mm),lm.O,lm.ub);nm.L(lm.g);return nm;}function zl(lm,mm,nm){lm.mb=lm.f.playbackRate;lm.f.playbackRate=0;bm(lm,nm);var om;lm.R&&lm.R<=nm.end&&lm.R>=nm.start?om=lm.R:lm.a.b?(om=nm.end,lm.jb=true):om=nm.start;qc(lm.j,lm.f,"seeking",lm.Ob.bind(lm));lm.f.currentTime!=om&&(lm.f.currentTime=om,lm.A=om);cm(lm,nm.start,nm.end);var pm=[],qm;for(qm in lm.b){nm=lm.b[qm];ed(lm,function(sm){pm.push(sm.Ab(this.V).then(ed(this,function(tm){var um=sm.Ka();um>this.Fa&&(this.Fa=um);return tm;})));})(nm);qc(lm.j,nm,"ended",lm.Pb.bind(lm));om=mm[qm];ak(lm.G,om);var rm=lm.l.getInitialSwitchReason()||void 0;nm.ya(om,false,void 0,rm);}h.all(pm).then(lm.Db.bind(lm)).catch(ed(lm,function(sm){"destroy"!=sm.type&&(sm=zb(sm),this.dispatchEvent(sm));}));pl(lm,lm.ia);}k.Db=function(lm){o(lm&&lm.length==Object.keys(this.b).length);for(var mm=Number.POSITIVE_INFINITY,nm=Number.NEGATIVE_INFINITY,om=0;om<lm.length;++om)var pm=lm[om],mm=Math.min(mm,pm),nm=Math.max(nm,pm);lm=fm(this);for(om=0;om<lm.length;++om)lm[om].na(nm);am(this,lm,nm);om=mc(this.c).map(function(qm){return qm.o;}).reduce(function(qm,rm){return qm.concat(rm);},[]).map(function(qm){var rm=[qm.K.create()];qm.N&&rm.push(qm.N.create(this.ca));return h.all(rm);});h.all(om).then(ed(this,function(qm){for(var rm=0;rm<qm.length;++rm)qm[rm][0].na(nm);this.Wa=true;for(var sm in this.m)qm=this.m[sm],rm=this.b[sm],ak(this.G,qm.Ta),rm.ya(qm.Ta,qm.$a,qm.ab,qm.switchReason);this.m={};})).catch(ed(this,function(qm){"aborted"!=qm.type&&(qm=zb(qm),this.dispatchEvent(qm));}));};function am(lm,mm,nm){if(mm=hm(lm,mm))bm(lm,mm),cm(lm,mm.start,mm.end);0!=nm?(nm=lm.f.currentTime+nm,lm.f.currentTime=nm,lm.A=nm):lm.jb&&mm&&(lm.f.currentTime=mm.end);lm.f.playbackRate=lm.mb;lm.a.b&&null!=lm.a.f&&kl(lm,0);im(lm);lm.V.resolve();}function bm(lm,mm){if(lm.a.b){isNaN(lm.h.duration)&&(lm.h.duration=mm.end+2592000);}else if(isNaN(lm.h.duration)||mm.end>lm.h.duration){lm.h.duration=mm.end;for(var nm=0;nm<lm.h.sourceBuffers.length;++nm)lm.h.sourceBuffers[nm].appendWindowEnd=mm.end;}}k.Qb=function(){this.M=null;im(this);var lm=hm(this,fm(this));lm&&(this.a.b&&this.ra!=lm.w&&(this.ra=lm.w,null!=this.s&&(j.clearTimeout(this.s),this.s=null)),cm(this,lm.start,lm.end),this.f.paused||dm(this,this.f.currentTime,lm.start,lm.end));};function cm(lm,mm,nm){mm=yb({type:"seekrangechanged",bubbles:true,start:mm,end:nm});lm.dispatchEvent(mm);}k.Ob=function(){var lm=this.f.currentTime;if(null!=this.A){if(lm>=this.A-.01&&lm<=this.A+.01){this.A=null;return;}this.A=null;}var mm=hm(this,fm(this));if(mm){var nm=mm.end;(mm=dm(this,lm,mm.start,nm))||(lm<=nm+.01?mm=false:(this.f.currentTime=nm,mm=true));if(!mm)for(var om in this.b)this.b[om].wb();}};function dm(lm,mm,nm,om){if(mm>=nm-.01)return false;mm=0;if(lm.a.b){mm=.5;for(var pm in lm.b)if(!lm.b[pm].yb(nm+mm)){mm=lm.a.c;break;}}lm.f.currentTime=Math.min(nm+mm,om);return true;}k.Pb=function(){if(!this.a.b){for(var lm in this.b)if(!this.b[lm].Oa())return;this.Aa();}};function em(lm){return lm.a.i&&lm.f.currentTime+.5>lm.ra?true:false;}k.Fb=function(){this.Y=true;if(em(this))return this.Aa();fc(this.b).every(function(lm){return lm.Oa();})&&(this.s=j.setTimeout(this.Aa.bind(this),1000*this.kb));};k.Eb=function(){this.Y=false;null!=this.s&&(j.clearTimeout(this.s),this.s=null);};k.bc=function(){var lm=this.G,mm=this.O.getBandwidth();lm.estimatedBandwidth=mm;lm.bandwidthHistory.push(new ck(mm));};k.Aa=function(){this.Y=false;this.s=null;this.h.endOfStream();};function fm(lm){return fc(lm.b).map(function(mm){return mm.Ma();}).filter(function(mm){return null!=mm;});}function gm(lm){return Math.max(lm.a?lm.a.c:1,lm.hb?lm.g.streamBufferSize||0:0);}function hm(lm,mm){for(var nm=0,om=Number.POSITIVE_INFINITY,pm=Number.POSITIVE_INFINITY,qm=0;qm<mm.length;++qm){var rm=mm[qm].La(),nm=Math.max(nm,rm.start);null!=rm.end&&(om=Math.min(om,rm.end));mm[qm].length()&&(pm=Math.min(pm,mm[qm].w().endTime));}if(om==Number.POSITIVE_INFINITY)if(om=lm.a.a[0],om.b){om=(om.start||0)+om.b;}else return null;lm.a.b&&(qm=gm(lm),om=Math.max(om-qm,nm));if(nm>om)return null;om=Math.floor(100000*om)/100000;return {start:nm,end:om,w:pm};}function im(lm){lm.a.b&&(lm.M=j.setTimeout(lm.Qb.bind(lm),1000));}function jm(lm){for(var mm in lm.b)lm.b[mm].L(lm.g);}k.Ka=function(){return this.Fa;};gl.prototype.getLongestInitResponseTime=gl.prototype.Ka;function km(lm,mm,nm,om){nm||(nm=new vc());om||(om=new el());gl.call(this,null,nm,om);"string"===typeof lm?this.Wb=lm:this.Ha=lm;this.L=null;this.W=mm;this.pa=[];this.Ya=[];this.Za=[];this.qa=0;this.D=null;}n(km,gl);m("shaka.player.DashVideoSource",km);km.prototype.bb=function(){return this.Ha||this.L;};km.prototype.debugGetManifest=km.prototype.bb;km.prototype.cc=function(lm,mm,nm){this.pa.push(lm);this.Ya.push(mm||"");this.Za.push(nm||"");};km.prototype.addExternalCaptions=km.prototype.cc;km.prototype.ec=function(lm){this.D=lm;};km.prototype.setNetworkCallback=km.prototype.ec;km.prototype.destroy=function(){this.L=this.D=this.W=null;gl.prototype.destroy.call(this);};km.prototype.Ca=function(){var lm,mm=ed(this,function(qm){this.ka("MPDFetchDuration",(Date.now()-lm)/1000);this.L=qm;for(var rm=0;rm<this.pa.length;rm++){var sm=qm,tm=this.pa[rm],um=this.Ya[rm],vm=this.Za[rm];if(0!==sm.a.length){var wm=new uf();wm.contentType="text";wm.lang=um||"en";wm.c=true;um=new xf();um.bandwidth=0;um.f=vm||"text/vtt";um.u=[new cf(tm)];wm.a.push(um);sm.a[0].b.push(wm);lg(sm.a[0]);}}this.a=oj(new nj(this.W),qm,this.D);return gl.prototype.Ca.call(this);});if(this.Ha)return lm=Date.now(),mm(this.Ha);var nm=[new cf(this.Wb)],om;if(this.ua){om=Math.floor(gm(this))+1;var pm=ml(this);om=Math.min(om,this.ta);om=new th(om);om.b=Math.floor(gm(this)+1);null!=pm&&(om.a=pm.streamInfoID);}nm=new mh(this.D,nm);nm=new rh(nm,this.wa,om);lm=Date.now();return sh(nm,this.ca).then(mm);};km.prototype.gb=function(){if(this.cb){var lm=this.a;if(lm=(lm=lm&&lm.a)&&lm[0])lm=lm.a.reduce(function(mm,nm){return mm.concat(nm.o);},[]),h.all(lm.map(function(mm){mm=mm.K;return mm.Bb?mm.fa:mm.create();})).then(function(mm){mm=mm.filter(function(nm){return null!=nm;});this.ka("InitialSegmentIndexes",mm);}.bind(this));}};km.prototype.rb=function(lm,mm,nm){if(this.f.paused&&this.qa+10000>Date.now()&&this.a)return h.reject({type:"delay"});var om;mm&&void 0!=nm&&(om=new th(mm),om.c=nm,mm=ml(this),null!=mm&&(om.a=mm.streamInfoID));lm=new rh(lm,this.wa,om);var pm=Date.now();return sh(lm,this.ca).then(ed(this,function(qm){this.qa=Date.now();this.ka("MPDFetchDuration",(this.qa-pm)/1000);this.L=qm;qm=oj(new nj(this.W),qm,this.D);return h.resolve(qm);}));};km.prototype.qb=function(){var lm=oj(new nj(this.W),this.L,this.D);return h.resolve(lm);};}.bind(i,b))();f.exports=i.shaka;}),null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoQualityClasses','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.minPlayQuality;this.$CustomAbrManager10=j.maxPlayQuality;this.$CustomAbrManager11=j.initiallyForcedRepresentations;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;this.$CustomAbrManager14=null;if(j.enableAdaptation){this.$CustomAbrManager15=j.bandwidthDowngradeTarget;this.$CustomAbrManager16=j.bandwidthUpgradeTarget;}}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager17();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager18.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager19.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager20.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager20=function(){'use strict';this.$CustomAbrManager17();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager21(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager12=j;this.$CustomAbrManager17(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager12=null;this.$CustomAbrManager17(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager22();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager14;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager23();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager21=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager18=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager17(event);};i.prototype.$CustomAbrManager17=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager22();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager13);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager19=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager22=function(){var j,k=this;'use strict';var l=this.$CustomAbrManager2.getVideoTracks();if(l.length==0)return null;if(!this.$CustomAbrManager6)for(var m=0;m<l.length;m++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(l[m].streamInfoID)){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager14=c('VideoPlayerStreamSwitchReasons').FORCED;return l[m];}if(this.$CustomAbrManager12){var n=l.find(function(y){return y.id===this.$CustomAbrManager12.id;}.bind(this));if(n){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').USER;return n;}}l.sort(h.compare);if(this.$CustomAbrManager9!==null||this.$CustomAbrManager10!==null){var j=function(){var y=k.$CustomAbrManager9!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager9):0,z=k.$CustomAbrManager10!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager10):c('VideoQualityClasses').length-1;if(y<=z){var aa=l.filter(function(ca){return c('VideoQualityClasses').indexOf(ca.fbQualityClass)>=y&&c('VideoQualityClasses').indexOf(ca.fbQualityClass)<=z;});k.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').PREFER_QUALITY_CLASS;if(!aa.length)return {v:l[l.length-1]};var ba=c('VideoQualityClasses').indexOf('sd');if(l.length==2&&aa.length==2&&z<=ba)return {v:l[0]};l=aa;}}();if(typeof j==="object")return j.v;}var o=l[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;l=l.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager21(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var m=0;m<l.length;m++){var u=l[m],v=m+1<l.length?l[m+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/this.$CustomAbrManager15,x=(v.bandwidth+s)/this.$CustomAbrManager16;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager23=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;f.exports=i;}),null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={interrupt:'streamInterruptAt',ended:'endedAt'};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState1=[];for(var m in j)this.$VideoPlayerLiveStreamState1.push(c('RTISubscriptionManager').subscribe('video_broadcast/'+m+'_'+l,this.$VideoPlayerLiveStreamState2.bind(this,j[m])));}k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;p.unsubscribe();}};k.prototype.$VideoPlayerLiveStreamState2=function(l,m){var n=JSON.parse(m.payload||'{}')||{},o=n.time_position;if(typeof o==='number'){o/=1000;this.emit(l,o);}};f.exports=k;}),null);
__d('VideoPlayerShakaPerformanceLogger',['VideoPlayerShakaPerformanceTypedLogger','VideoPlayerShakaPerformanceLoggerConfig','guid'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('VideoPlayerShakaPerformanceTypedLogger'));i=h&&h.prototype;function j(){h.apply(this,arguments);}k.isEnabled=function(){return c('VideoPlayerShakaPerformanceLoggerConfig').isSampled;};function k(l,m){this.$VideoPlayerShakaPerformanceLogger2=l;this.$VideoPlayerShakaPerformanceLogger1=c('guid')();this.$VideoPlayerShakaPerformanceLogger4=m;}k.prototype.getEventLogger=function(event){var l=Date.now(),m=new j();m.setEvent(event).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setIsLive(this.$VideoPlayerShakaPerformanceLogger4).setSession(this.$VideoPlayerShakaPerformanceLogger1).setState(this.$VideoPlayerShakaPerformanceLogger3).setResult('success').setClientTimeBegin(l).setClientTimeEnd(l);var n=m.setState;m.setState=function(p){this.$VideoPlayerShakaPerformanceLogger3=p;return n.call(m,p);}.bind(this);var o=m.setError;m.setError=function(p){if(typeof p==='object'){if(p.type==='aborted'||p.type==='delay'){this.setResult('aborted');}else{this.setResult('failed');o.call(this,p.type);}this.setCode(p.status);}else o.call(this,p);return this;};return m;};k.prototype.getOperationLogger=function(l){var m=this.getEventLogger(l),n=m.log;m.log=function(){this.setClientTimeEnd(Date.now());return n.call(this);};return m;};f.exports=k;}),null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','TaggedTimeRanges','URI','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaExperiments','VideoQualityClasses','VideoPlayerShakaPerformanceLogger','dispatchEvent','Shaka'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined);s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();c('Shaka').polyfill.MediaKeys.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);var ea=da.reduce(function(fa,ga){return ga.fbQualityLabel=='hd'?ga:fa;});if(!ea)return da.pop().id;return ea.id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.setPreferredVideoTrack=function(ca){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(ca.id,true);};aa.prototype.unsetPreferredVideoTrack=function(){'use strict';};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa=ea.videoID,ga=ea.width,ha=ea.height,ia=ea.manifest,ja=ea.manifestUrl,ka=ea.isLive,la=ea.minPlayQuality,ma=ea.maxPlayQuality;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=la;this.$VideoPlayerHTML5Shaka2=ma;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ka;this.$VideoPlayerHTML5Shaka8=false;this.$VideoPlayerHTML5Shaka9=ga;this.$VideoPlayerHTML5Shaka10=ha;this.$VideoPlayerHTML5Shaka11=c('VideoPlayerShakaPerformanceLogger').isEnabled()?new (c('VideoPlayerShakaPerformanceLogger'))(fa,ka):null;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)this.$VideoPlayerHTML5Shaka12=true;c('EventListener').listen(ca,'playing',this.$VideoPlayerHTML5Shaka13.bind(this));c('EventListener').listen(ca,'timeupdate',function(oa){this.$VideoPlayerHTML5Shaka14(oa.target.currentTime);}.bind(this));c('EventListener').listen(ca,'pause',this.$VideoPlayerHTML5Shaka15.bind(this));c('EventListener').listen(ca,'play',function(){this.$VideoPlayerHTML5Shaka8=true;}.bind(this));this.$VideoPlayerHTML5Shaka16=null;this.$VideoPlayerHTML5Shaka17=null;this.$VideoPlayerHTML5Shaka18=null;this.$VideoPlayerHTML5Shaka19=new l(ca);this.$VideoPlayerHTML5Shaka19.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka20();}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka21();}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('error',function(oa){return this.$VideoPlayerHTML5Shaka22(oa);}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka23.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka24.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('debug/shakaEvent',function(oa){return this.emit('debug/shakaEvent',oa.detail);}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka25.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka19.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka26.bind(this));this.$VideoPlayerHTML5Shaka27=da;this.$VideoPlayerHTML5Shaka28=null;var na=false;if(ia){this.$VideoPlayerHTML5Shaka29=o(ia,ja);}else{this.$VideoPlayerHTML5Shaka29=ja;na=ja.indexOf('/dash-abr/')!==-1;}this.$VideoPlayerHTML5Shaka30=this.$VideoPlayerHTML5Shaka31();this.$VideoPlayerHTML5Shaka32=this.$VideoPlayerHTML5Shaka33();this.$VideoPlayerHTML5Shaka34=ca;this.$VideoPlayerHTML5Shaka19.configure({enableAdaptation:true,appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,allowSkipUnloading:c('VideoPlayerShakaExperiments').allowSkipUnloading,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:ka?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:ka?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,dynamicStreamBufferSize:ka?c('VideoPlayerShakaExperiments').liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush,liveSendPushHeaders:c('VideoPlayerShakaExperiments').liveSendPushHeaders&&!na,liveMaxManifestFetchesWithPush:c('VideoPlayerShakaExperiments').liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c('VideoPlayerShakaExperiments').enableVideoDebug,reappendInitSegmentAfterAbort:c('VideoPlayerShakaExperiments').reappendInitSegmentAfterAbort,performanceLogger:this.$VideoPlayerHTML5Shaka11,useInlineInitSegment:c('VideoPlayerShakaExperiments').useInlineInitSegment});if(ka&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka35=new (c('VideoPlayerLiveStreamState'))(fa);this.$VideoPlayerHTML5Shaka35.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka36.bind(this));['streamInterruptAt','commercialBreakAt','endedAt'].forEach(function(oa){this.$VideoPlayerHTML5Shaka35.addListener(oa,function(event){this.emit('debug/shakaEvent',{type:oa,event:event});}.bind(this));}.bind(this));}this.$VideoPlayerHTML5Shaka19.load(this.$VideoPlayerHTML5Shaka32);}ba.prototype.getDebug=function(){'use strict';return {AbrManager:this.$VideoPlayerHTML5Shaka30,VideoSource:this.$VideoPlayerHTML5Shaka32,ShakaPlayer:this.$VideoPlayerHTML5Shaka19};};ba.getEstimatedBandwidth=function(){'use strict';return v.getBandwidth();};ba.isAutoplayBandwidthRestrained=function(){'use strict';var ca=v.getBandwidth();if(ca===null||ca>c('VideoPlayerShakaExperiments').blockAutoplayBandwidthThreshold)return false;return true;};ba.prototype.$VideoPlayerHTML5Shaka14=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka37.get(ca);if(!da)return;var ea=da.id,fa=da.reason;if(this.$VideoPlayerHTML5Shaka28!==ea){var ga=this.$VideoPlayerHTML5Shaka28;this.$VideoPlayerHTML5Shaka28=ea;this.emit('representation_ended',{representationID:ga,nextRepresentationID:ea,streamSwitchReason:fa});}};ba.prototype.getStreamInfoIDForTimePosition=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka37.get(ca),ea=null;if(da)ea=da.id;return ea;};ba.prototype.$VideoPlayerHTML5Shaka38=function(ca,da){'use strict';if(ca.fbQualityLabel){return ca.fbQualityLabel;}else if(n.compare(ca,da[0])==0){return 'SD';}else if(n.compare(ca,da[da.length-1])==0){return 'HD';}else return null;};ba.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka16;var ca=this.$VideoPlayerHTML5Shaka32.getVideoTracks();ca.sort(n.compare);return ca.every(function(da){return da.fbQualityLabel!==null;})?ca.map(function(da){return da.fbQualityLabel;}):ca.length>1?['SD','HD']:['SD'];};ba.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka17;var ca=this.$VideoPlayerHTML5Shaka32.getVideoTracks();ca.sort(n.compare);var da=ca.find(function(ea){return ea.active;});return da?this.$VideoPlayerHTML5Shaka38(da,ca):null;};ba.prototype.canAutoSelectVideoQuality=function(){'use strict';return true;};ba.prototype.setPreferredVideoQuality=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka32.getVideoTracks();da.sort(n.compare);var ea=da.find(function(fa){return ca==this.$VideoPlayerHTML5Shaka38(fa,da);}.bind(this));if(ea){this.$VideoPlayerHTML5Shaka18=ca;this.$VideoPlayerHTML5Shaka30.setPreferredVideoTrack(ea);}};ba.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka18=null;this.$VideoPlayerHTML5Shaka30.unsetPreferredVideoTrack();};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka39&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka40=true;this.$VideoPlayerHTML5Shaka41=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'pause');this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka34.pause();};ba.prototype.play=function(){'use strict';this.$VideoPlayerHTML5Shaka8=true;if(this.$VideoPlayerHTML5Shaka11&&(this.$VideoPlayerHTML5Shaka34.paused||this.$VideoPlayerHTML5Shaka34.ended))this.$VideoPlayerHTML5Shaka42=this.$VideoPlayerHTML5Shaka11.getOperationLogger('play').setState('pending_play');if(this.$VideoPlayerHTML5Shaka39&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka40=false;this.$VideoPlayerHTML5Shaka41=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'waiting');this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka34.play();};ba.prototype.$VideoPlayerHTML5Shaka43=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka4;if(ca){var da=this.$VideoPlayerHTML5Shaka34.currentTime,ea=4,fa=da>ca-ea,ga=da>ca;if(ga){this.emit('debug/shakaEvent',{type:'streamResumedAt',event:this.$VideoPlayerHTML5Shaka4});this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka39)this.$VideoPlayerHTML5Shaka6=fa;}return this.$VideoPlayerHTML5Shaka6;};ba.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){z(this.$VideoPlayerHTML5Shaka34,'pause');this.$VideoPlayerHTML5Shaka40=false;this.$VideoPlayerHTML5Shaka41=false;}this.$VideoPlayerHTML5Shaka39=true;if(this.$VideoPlayerHTML5Shaka43()){if(!c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka11&&!this.$VideoPlayerHTML5Shaka44)this.$VideoPlayerHTML5Shaka44=this.$VideoPlayerHTML5Shaka11.getOperationLogger('stream_interrupted');this.$VideoPlayerHTML5Shaka32.setIsLiveInterrupted(true);}this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(true);this.emit('bufferingStart');}};ba.prototype.$VideoPlayerHTML5Shaka21=function(){var ca,da=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka40)z(this.$VideoPlayerHTML5Shaka34,'play');if(!this.$VideoPlayerHTML5Shaka41)(function(){var ea=c('EventListener').capture(da.$VideoPlayerHTML5Shaka34.parentNode,'playing',function(fa){if(fa.target!=this.$VideoPlayerHTML5Shaka34)return;ea.remove();if(this.$VideoPlayerHTML5Shaka12){this.$VideoPlayerHTML5Shaka12=false;return;}c('Event').kill(fa);}.bind(da));})();}this.$VideoPlayerHTML5Shaka39=false;if(this.$VideoPlayerHTML5Shaka44){this.$VideoPlayerHTML5Shaka44.log();this.$VideoPlayerHTML5Shaka44=null;}this.$VideoPlayerHTML5Shaka32.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka45();}else this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka22=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined',fa=da.status||null,ga=da.url||null;if(c('VideoPlayerShakaExperiments').blockPlayRequestOnNetworkError&&this.$VideoPlayerHTML5Shaka7&&Object.values(c('VideoPlayerShakaExperiments').blockPlayRequestHTTPStatusList).indexOf(fa)!=-1&&new (c('URI'))(ga).getPath().split('.').pop()==='mpd'){if(this.$VideoPlayerHTML5Shaka8){c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'playing');this.$VideoPlayerHTML5Shaka8=false;}return this.$VideoPlayerHTML5Shaka46();}this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:da.message,httpStatus:fa,url:ga});};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka17=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka16=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka7=this.$VideoPlayerHTML5Shaka32&&this.$VideoPlayerHTML5Shaka32.isLive();this.$VideoPlayerHTML5Shaka19.unload();this.$VideoPlayerHTML5Shaka3=true;};ba.prototype.$VideoPlayerHTML5Shaka31=function(){'use strict';var ca={enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka47(),maxHeight:this.$VideoPlayerHTML5Shaka48(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka27,bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthDowngradeTarget:c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthUpgradeTarget:c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget},da=c('VideoQualityClasses').indexOf('hd'),ea=this.$VideoPlayerHTML5Shaka1!=null&&c('VideoQualityClasses').indexOf(this.$VideoPlayerHTML5Shaka1)>=da;return new (c('CustomAbrManager'))(ca);};ba.prototype.$VideoPlayerHTML5Shaka33=function(){'use strict';!this.$VideoPlayerHTML5Shaka30?h(0):void 0;!this.$VideoPlayerHTML5Shaka29?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka29,null,v,this.$VideoPlayerHTML5Shaka30);this.$VideoPlayerHTML5Shaka37=new (c('TaggedTimeRanges'))(function(da,ea){return (da.id===ea.id&&da.reason===ea.reason);});ca.setTaggedTimeRangesEntryAdder(function(da,ea,fa){this.$VideoPlayerHTML5Shaka37.add(da,ea,fa);}.bind(this));return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka3)return;this.$VideoPlayerHTML5Shaka30=this.$VideoPlayerHTML5Shaka31();this.$VideoPlayerHTML5Shaka32=this.$VideoPlayerHTML5Shaka33();if(this.$VideoPlayerHTML5Shaka43()){this.$VideoPlayerHTML5Shaka34.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka19.setPlaybackStartTime(ca);this.$VideoPlayerHTML5Shaka19.load(this.$VideoPlayerHTML5Shaka32).then(function(){if(this.$VideoPlayerHTML5Shaka7!=this.$VideoPlayerHTML5Shaka32.isLive())return this.$VideoPlayerHTML5Shaka46();if(this.$VideoPlayerHTML5Shaka18)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka18);this.$VideoPlayerHTML5Shaka17=null;this.$VideoPlayerHTML5Shaka49=null;this.$VideoPlayerHTML5Shaka3=false;}.bind(this)).done();};ba.prototype.$VideoPlayerHTML5Shaka46=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka35.unsubscribe();this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka32.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka50=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka47=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka9*ba.$VideoPlayerHTML5Shaka50();};ba.prototype.$VideoPlayerHTML5Shaka48=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka10*ba.$VideoPlayerHTML5Shaka50();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka9=ca;this.$VideoPlayerHTML5Shaka10=da;this.$VideoPlayerHTML5Shaka30.setResolutionConstraint(this.$VideoPlayerHTML5Shaka47(),this.$VideoPlayerHTML5Shaka48());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka24=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka23=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};ba.prototype.$VideoPlayerHTML5Shaka36=function(ca){'use strict';if(c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka11&&!this.$VideoPlayerHTML5Shaka44)this.$VideoPlayerHTML5Shaka44=this.$VideoPlayerHTML5Shaka11.getOperationLogger('stream_interrupted');this.$VideoPlayerHTML5Shaka32.setIsLiveInterrupted(true);}this.$VideoPlayerHTML5Shaka4=ca;};ba.prototype.$VideoPlayerHTML5Shaka26=function(){'use strict';if(this.$VideoPlayerHTML5Shaka43())this.$VideoPlayerHTML5Shaka45();};ba.prototype.$VideoPlayerHTML5Shaka45=function(){'use strict';this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka32.forceResyncVideoBuffer();this.emit('streamResumed');};ba.prototype.$VideoPlayerHTML5Shaka25=function(){'use strict';var ca=!this.$VideoPlayerHTML5Shaka34.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka6)this.$VideoPlayerHTML5Shaka45();if(ca)this.play();}.bind(this))['catch'](function(da){});};ba.prototype.$VideoPlayerHTML5Shaka13=function(){'use strict';this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka12)this.$VideoPlayerHTML5Shaka12=false;if(this.$VideoPlayerHTML5Shaka42){this.$VideoPlayerHTML5Shaka42.log();this.$VideoPlayerHTML5Shaka42=null;}};ba.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';if(this.$VideoPlayerHTML5Shaka8)this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka42){this.$VideoPlayerHTML5Shaka42.setResult('aborted').log();this.$VideoPlayerHTML5Shaka42=null;}};f.exports=ba;}),null);