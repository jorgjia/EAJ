if (self.CavalryLogger) { CavalryLogger.start_js(["BMZ1L"]); }

__d("MercuryAttachmentConstants",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={SIDE_LENGTH:9};f.exports=h;}),null);
__d('XUIDialogHeader.react',['cx','fbt','React','XUICardHeader.react','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=null;if(this.props.showCloseButton)n=c('React').createElement(c('XUICloseButton.react'),{label:this.props.closeButtonText,className:"layerCancel _51-t"});return (c('React').createElement(c('XUICardHeader.react'),babelHelpers['extends']({},this.props,{className:"_4-i0",link:n,type:'primary'}),this.props.children));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={closeButtonText:l.string,showCloseButton:l.bool,activeTabKey:l.string,defaultActiveTabKey:l.string,onTabClick:l.func};m.defaultProps={closeButtonText:i._("Close"),onTabClick:function n(){return true;},showCloseButton:true};f.exports=m;}),null);
__d('TimelineMapScrollableArea',['Animation','ArbiterMixin','CSS','DOM','Event','Run','Scroll','SimpleDrag','Style','Vector','$','shield'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){i&&this.init(c('$')(i),j);}Object.assign(h.prototype,c('ArbiterMixin'),{init:function i(j,k){k=k||{};this._elem=j;this._wrap=c('DOM').find(j,'div.fbScrollableAreaWrap');this._body=c('DOM').find(this._wrap,'div.fbScrollableAreaBody');this._track=c('DOM').find(j,'div.fbScrollableAreaTrack');this._gripper=c('DOM').find(this._track,'div.fbScrollableAreaGripper');this._options=k;this.adjustGripper();this._listeners=[c('Event').listen(this._wrap,'scroll',this._handleScroll.bind(this))];if(k.fade!==false)this._listeners.push(c('Event').listen(j,'mouseenter',c('shield')(this.adjustGripper,this)),c('Event').listen(j,'mouseenter',c('shield')(this.showScrollbar,this)),c('Event').listen(j,'mousemove',this._handleMousemove.bind(this)),c('Event').listen(j,'mouseout',c('shield')(this.hideScrollbar,this)));if(k.fade!==undefined)this._listeners.push(c('Event').listen(this._track,'click',this.clickToScroll.bind(this)));if(k.verticalscroll)this._listeners.push(c('Event').listen(this._wrap,'mousewheel',this.mouseWheel.bind(this)),c('Event').listen(this._wrap,'DOMMouseScroll',this.mouseWheel.bind(this)));this.initDrag();if(!k.persistent)c('Run').onLeave(this.destroy.bind(this));},getRoot:function i(){return this._elem;},initDrag:function i(){var j=new (c('SimpleDrag'))(this._gripper);j.subscribe('start',function(k,event){if(!(event.which&&event.which===1||event.button&&event.button===1))return;this.inform('dragstart');var l=c('Vector').getEventPosition(event).x,m=this._gripper.offsetLeft,n=j.subscribe('update',function(p,q){var r=c('Vector').getEventPosition(q).x-l,s=this._elem.clientWidth,t=this._body.offsetWidth,u=this._track.offsetWidth,v=s/t*u,w=t-this._wrap.offsetWidth,x=m+r,y=u-v;x=Math.max(Math.min(x,y),0);var z=x/y*w;c('Scroll').setLeft(this._wrap,z);}.bind(this)),o=j.subscribe('end',function(){j.unsubscribe(n);j.unsubscribe(o);this.inform('dragend');}.bind(this));}.bind(this));},adjustGripper:function i(){var j=this._elem.clientWidth,k=this._body.offsetWidth,l=this._track.offsetWidth,m=j/k*l;if(m<l){c('Style').set(this._gripper,'width',m+'px');var n=c('Scroll').getLeft(this._wrap)/k*l;c('Style').set(this._gripper,'left',n+'px');c('CSS').show(this._gripper);}else c('CSS').hide(this._gripper);this._checkContentBoundaries();return this;},_checkContentBoundaries:function i(){var j=c('Scroll').getLeft(this._wrap),k=this._wrap.scrollWidth-this._wrap.clientWidth;c('CSS').conditionClass(this._elem,'contentBefore',j>0);c('CSS').conditionClass(this._elem,'contentAfter',j<k);},destroy:function i(){this._listeners.forEach(function(j){j.remove();});this._listeners.length=0;},_handleMousemove:function i(event){var j=c('Vector').getElementPosition(this._track).y,k=c('Vector').getElementDimensions(this._track).y;if(Math.abs(j+k/2-c('Vector').getEventPosition(event).y)<25){this.showScrollbar(false);}else this.hideScrollbar();},_handleScroll:function i(event){this.adjustGripper();if(this._options.fade!==false)this.showScrollbar();},hideScrollbar:function i(){if(!this._scrollbarVisible)return this;this._scrollbarVisible=false;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}this._hideTimeout=setTimeout(function(){if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this._scrollbarAnimation=new (c('Animation'))(this._track).from('opacity',1).to('opacity',0).duration(250).ondone(c('CSS').addClass.bind(null,this._track,'invisible_elem')).go();}.bind(this),750);return this;},showScrollbar:function i(j){if(this._scrollbarVisible)return this;this._scrollbarVisible=true;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this.adjustGripper();c('Style').set(this._track,'opacity',1);c('CSS').removeClass(this._track,'invisible_elem');if(j!==false)this.hideScrollbar();return this;},clickToScroll:function i(event){var j=c('Vector').getEventPosition(event).x,k=this._elem.clientWidth,l=this._body.offsetWidth,m=this._track.offsetWidth,n=k/l*m,o=c('Vector').getElementPosition(this._gripper);if(j>=o.x&&j<=o.x+n)return;var p=j<o.x?-1:1,q=this._wrap.offsetWidth*.8*p;this.scrollBy(q);},scrollBy:function i(j){this.setScroll(c('Scroll').getLeft(this._wrap)+j);},getMaxBodyOffset:function i(){return this._body.offsetWidth-this._wrap.offsetWidth;},setScroll:function i(j){var k=j;k=Math.max(Math.min(k,this.getMaxBodyOffset()),0);c('Scroll').setLeft(this._wrap,k);},scrollIntoView:function i(j){var k=this._wrap.clientWidth,l=j.offsetWidth,m=c('Scroll').getLeft(this._wrap),n=m+k,o=j.offsetLeft,p=o+l;if(o<m||k<l){this.setScroll(o);}else if(p>n)this.setScroll(m+(p-n));},mouseWheel:function i(event){if(this.getMaxBodyOffset()<=0)return;var j=0;if(event.wheelDelta){var k=event.wheelDelta;if(event.wheelDeltaX&&event.wheelDeltaY)k=Math.abs(event.wheelDeltaX)>Math.abs(event.wheelDeltaY)?event.wheelDeltaX:event.wheelDeltaY;j=-k*10/40;}else if(event.detail)j=event.detail*10;this.scrollBy(j);event.prevent();}});f.exports=b.TimelineMapScrollableArea||h;}),null);
__d('ChatImageArrowDirection',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({BOTH:null,LEFT:null,RIGHT:null});f.exports=h;}),null);
__d('ChatImageWithArrow.react',['cx','ChatImageArrowDirection','Link.react','MercuryAttachmentConstants','React','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=30,m=15;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$ChatImageWithArrow3=function(){return Math.max(this.props.width,m);}.bind(this),this.$ChatImageWithArrow6=function(){return Math.max(this.props.height,l);}.bind(this),this.$ChatImageWithArrow5=function(t){if(this.props.onClick)return (c('React').createElement(c('Link.react'),{onClick:this.props.onClick},t));return t;}.bind(this),this.$ChatImageWithArrow7=function(t,u,v,w){if(u===c('ChatImageArrowDirection').LEFT){return 'translate('+v+'px, '+w+'px)'+'rotate(45deg)';}else return 'translate('+(t-v)+'px, '+w+'px)'+'rotate(45deg)';},this.$ChatImageWithArrow8=function(t,u,v,w){if(u===c('ChatImageArrowDirection').LEFT){return 'rotate(-45deg)'+'translate(-'+(this.$ChatImageWithArrow1+v)+'px,'+'-'+w+'px)';}else return 'rotate(-45deg)'+'translate(-'+(t-v)+'px, -'+w+'px)';}.bind(this),this.$ChatImageWithArrow4=function(){var t={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)t.backgroundImage='url('+this.props.source+')';var u={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)u.opacity=0;var v={width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()};if(this.props.source){v.backgroundImage='url('+this.props.source+')';v.backgroundSize='cover';}return (c('React').createElement('div',{className:"_4yp6"},c('React').createElement('div',{className:"_4ypb _3_om",style:v},c('React').createElement(c('XUISpinner.react'),{size:'small'}))));}.bind(this),p;}n.prototype.render=function(){this.$ChatImageWithArrow1=Math.floor(this.props.sideLength/Math.sqrt(2));this.$ChatImageWithArrow2=Math.ceil(this.$ChatImageWithArrow3()+this.$ChatImageWithArrow1);if(this.props.isLoading)return this.$ChatImageWithArrow4();var o=c('joinClasses')("_4yp6"+(this.props.round?' '+"_3lk2":''),this.props.rootClassName);return this.$ChatImageWithArrow5(c('React').createElement('div',{className:o},c('React').createElement('div',{className:"_52kr"+(this.props.round?' '+"_3_om":''),style:{width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()}},c('React').createElement('div',{className:"_4yp9",style:{backgroundImage:'url('+this.props.source+')',width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()}}))));};n.propTypes={arrowDirection:k.oneOf(Object.keys(c('ChatImageArrowDirection'))),onClick:k.func,height:k.number.isRequired,isLoading:k.bool,round:k.bool,rootClassName:k.string,sideLength:k.number,source:k.string,width:k.number.isRequired};n.defaultProps={sideLength:c('MercuryAttachmentConstants').SIDE_LENGTH,isLoading:false,round:false};f.exports=n;}),null);
__d('MessengerProfileImageWrapper.react',['cssVar','cx','React','TooltipData','getViewportDimensions','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m;if(c.__markCompiled)c.__markCompiled();var n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$MessengerProfileImageWrapper1=function(){if(!this.props.showBadge||this.props.isMessengerUser==null)return null;return (c('React').createElement(p,{className:"_4ld_",isMessengerUser:this.props.isMessengerUser}));}.bind(this),r;}o.prototype.render=function(){var q={};if(this.props.tooltipContent){var r=c('getViewportDimensions')().width,s=parseInt("640px".replace('px',''),10),t=r<=s?'above':'left';Object.assign(q,c('TooltipData').propsFor(this.props.tooltipContent,t));}return c('React').createElement('div',babelHelpers['extends']({className:c('joinClasses')("_4ldz",this.props.className),style:{width:this.props.size+'px',height:this.props.size+'px'}},q),c('React').createElement('div',{className:"_4ld-",style:{width:this.props.size+'px',height:this.props.size+'px'}},this.props.children),this.$MessengerProfileImageWrapper1());};o.propTypes={isMessengerUser:n.bool,showBadge:n.bool,size:n.number,tooltipContent:n.string};l=babelHelpers.inherits(p,c('React').PureComponent);m=l&&l.prototype;p.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_2pom")},c('React').createElement('div',{className:"_2pon"+(this.props.isMessengerUser?' '+"_2poo":'')+(!this.props.isMessengerUser?' '+"_2pop":'')})));};function p(){l.apply(this,arguments);}p.propTypes={isMessengerUser:n.bool,size:n.number};f.exports=o;}),null);
__d('MessengerContactImage.react',['Image.react','MessengerProfileImageWrapper.react','React'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('MessengerProfileImageWrapper.react'),{isMessengerUser:this.props.isMessengerUser,size:this.props.size,showBadge:true},c('React').createElement(c('Image.react'),{alt:'',height:this.props.size,src:this.props.src,width:this.props.size}))));};function k(){'use strict';h.apply(this,arguments);}k.propTypes={isMessengerUser:j.bool,size:j.number.isRequired,src:c('Image.react').validateImageSrcPropType};f.exports=k;}),null);
__d('MessengerDialogTitle.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')("_19jt",this.props.className)},this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerHotLikeSVG.react',['cssVar','cx','fbt','React','joinClasses','uniqueID'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes,n='transparent',o=j._("Thumbs Up Sign");k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={titleId:c('uniqueID')()},r;}p.prototype.render=function(){var q=this.props.color||"#0084ff";return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_1i1j")},c('React').createElement('svg',{'aria-labelledby':this.state.titleId,height:'100%',role:'img',version:'1.1',viewBox:'0 0 381 400',width:'100%',x:'0px',y:'0px'},c('React').createElement('title',{id:this.state.titleId},o),c('React').createElement('g',null,c('React').createElement('g',null,c('React').createElement('path',{d:'M0,399.8h86.4V160.8H0V399.8z M381,220.7c0-13.6-7.4-25.5-18.5-31.8c8.8-6.6,14.5-17.4,14.5-29.3 c0-20.1-16.4-36.8-36.5-36.8H217c20.4-106.5-31.3-128.2-51.7-123c-12.3,3.1-13.6-0.3-11.4,24.2l3.4,42.7c0.3,3.5,0,7.2-0.8,10.8 c-0.8,3.6-2.7,6.9-4.6,10L106.8,160v208.7h195.3v-1.2c19.2-1.1,34.5-17.4,34.5-36.9c0-6.1-1.5-12-4.1-17 c17.3-2.8,30.4-18,30.4-36.1c0-8.2-2.7-15.9-7.4-22C370.1,250.8,381,237,381,220.7z',fill:q,stroke:n,strokeLinecap:'round',strokeWidth:'5%'}))))));};p.propTypes={color:m.string};f.exports=p;}),null);
__d("Autosize",["cx","CSS","DOM","Style"],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=['fontFamily','fontStyle','fontVariant','fontWeight','letterSpacing','textDecoration','textIndent','textTransform','whiteSpace','wordSpacing','wordWrap'],j=/^[0-9]+$/;function k(p){var q=p.cloneNode(true);c("CSS").addClass(q,"_4g");var r=p.clientWidth-c("Style").getFloat(p,'paddingLeft')-c("Style").getFloat(p,'paddingRight');c("Style").set(q,'width',r+'px');var s=p.clientHeight-c("Style").getFloat(p,'paddingTop')-c("Style").getFloat(p,'paddingBottom');c("Style").set(q,'height',s+'px');c("DOM").insertAfter(p,q);return q;}function l(p,q,r,s,t){var u=p.style.fontSize,v=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var w=p.style.width;c("Style").set(p,"width","auto");}var x=0,y=t.length-1;while(x<y){var z=Math.ceil((x+y)/2);c("Style").set(p,"font-size",t[z]+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){y=z-1;}else x=z;}p.style.fontSize=u;p.style.height=v;if(q!==null)p.style.width=w;return t[x]+s;}function m(p,q,r,s,t,u){var v=p.style.fontSize,w=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var x=p.style.width;c("Style").set(p,"width","auto");}c("Style").set(p,"font-size",u+s);if((r===null||p.scrollHeight<=r)&&(q===null||p.scrollWidth<=q)){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return u+s;}c("Style").set(p,"font-size",t+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s;}while(t+1<u){var y=Math.ceil((t+u)/2);c("Style").set(p,"font-size",y+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){u=y;}else t=y;}p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s;}function n(p,q){this._wrap=p;this._attr=q;if(this._attr.sizes){var r=this._attr.sizes;for(var s=1,t=r.length;s<t;s++){if(r[s-1]<=r[s])continue;r.sort(function(v,w){return v-w;});break;}}else if(q.min>q.max){var u=q.min;q.min=q.max;q.max=u;}this.fit();}n.prototype.fit=function(p,q){var r=this._wrap;if(!r.clientWidth){o.push(this);return;}var s=k(r);if(typeof p==="undefined")p=this._attr.width;if(j.test(p)){s.style.width=p+"px";}else if(p!==null&&p!=="auto")s.style.width=p;if(typeof q==="undefined")q=this._attr.height;if(j.test(q)){s.style.height=q+"px";}else if(q!==null&&q!=="auto")s.style.height=q;var t=null;if(!this._attr.wrap)t=s.clientWidth;var u=null;if(this._attr.wrap||q!==null)u=s.clientHeight;var v;if(this._attr.sizes){v=l(s,t,u,"px",this._attr.sizes);}else v=m(s,t,u,"px",this._attr.min,this._attr.max);c("DOM").remove(s);c("Style").set(r,"font-size",v);c("CSS").removeClass(r,"invisible_elem");};var o=[];n.onNodeInserted=function(){var p=o;o=[];p.forEach(function(q){q.fit();});};f.exports=n;}),null);
__d('ArtilleryTraceIDUtils',['Alea','ErrorUtils','ServerNonce'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',i=c('Alea')(c('ServerNonce').ServerNonce),j=function l(){var m=0,n=0,o='';for(var p=10;p>=0;p--){if(m<6){n=Math.floor(2147483648*i());m=32;}if(p===0)n&=7;o+=h.charAt(n&63);n>>=6;m-=6;}return o;},k={newTraceId:function l(){var m=void 0;for(var n=3;n>0;n--){m=j();if(m!=this.getDummyId())return m;}c('ErrorUtils').reportError(new Error('failed to generate valid Fbtrace id'));return this.getDummyId();},newObjectId:function l(){return this.newTraceId();},getDummyId:function l(){return 'AAAAAAAAAAA';},traceIdToBucket:function l(m){var n=m.charAt(m.length-1);return h.indexOf(n)%32;}};f.exports=k;}),null);
__d('BanzaiScribe',['Banzai'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){return {log:function k(l,m,n){var o=[m];if(n!=null)o.push(n);c('Banzai').post('scribe:'+l,o,j);}};}var i=h({});i.create=h;f.exports=i;}),null);
__d('SamplingPolicyBase',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';throw 'Tried to instantiate SamplingPolicyBase';}h.prototype.getName=function(){'use strict';return this.name;};h.prototype.isSampled=function(){'use strict';if(typeof this.sampled=='undefined')this.sampled=this.decideIfSampled();return this.sampled;};f.exports=h;}),null);
__d('FbtraceForcedByServerPolicy',['FbtraceForcedByServer','SamplingPolicyBase'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=void 0;function i(){this.name='FbtraceForcedByServerPolicy';}i.get=function(){if(typeof h=='undefined')h=new i();return h;};function j(){return c('FbtraceForcedByServer').forced;}Object.assign(i.prototype,c('SamplingPolicyBase').prototype,{decideIfSampled:j});f.exports=i;}),null);
__d("guardFunction",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){return function(){if(i.apply(k||this,arguments))j.apply(k||this,arguments);};}f.exports=h;}),null);
__d('Fbtrace',['Arbiter','ArtilleryTraceIDUtils','BanzaiScribe','FbtraceForcedByServer','FbtraceForcedByServerPolicy','SiteData','guardFunction'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){Object.assign(this,h);}Object.assign(h,{isOn:function s(){return false;},replySend:function s(t,u){},requestSend:function s(t,u,v){m(t,u);return {metadata:function w(){return undefined;},replyReceive:function w(x){}};}});var i=new h();function j(s,t,u){if(!s)throw {name:'ArgumentError',message:'no valid service name specified'};if(!t)throw {name:'ArgumentError',message:'no valid version specified'};var v=c('BanzaiScribe'),w=0,x=c('ArtilleryTraceIDUtils').newTraceId(),y=c('ArtilleryTraceIDUtils').newObjectId(),z=c('ArtilleryTraceIDUtils').traceIdToBucket(x),aa={service:s,version:t},ba=function ga(ha){if(typeof ha=='undefined')return 'undefined';if(typeof ha!='string')ha=ga(JSON.stringify(ha));return ha;},ca=function ga(ha){var ia='';for(var ja in ha){if(ia.length>0)ia+='\x02';ia+=ba(ja)+'\x03'+ba(ha[ja]);}return ia;},da=function ga(ha,ia,event,ja,ka){w++;return [ka,w,x,ha,ia,ba(event),ca(ja)].join('\x01');},ea=function ga(ha,ia,event,ja,ka){if(!ka&&typeof ka=='undefined')ka=Date.now()*1000;var la=da(ha,ia,event,ja,ka);v.log('fbtrace',la,z);},fa=function ga(){return y;};ea(c('ArtilleryTraceIDUtils').getDummyId(),y,'#rqrecv',Object.assign(u||{},aa));Object.assign(this,j,{replySend:function ga(ha,ia){ia=babelHelpers['extends']({},ia,aa,{success:ha?'true':'false'});ea(c('ArtilleryTraceIDUtils').getDummyId(),y,'#rpsend',ia);},requestSend:function ga(ha,ia,ja){m(ha,ia);var ka=fa(),la=c('ArtilleryTraceIDUtils').newObjectId();ja=babelHelpers['extends']({},ja,aa,{op:ha,'remote:service':ia});ea(ka,la,'#rqsend',ja);return {metadata:function ma(){return x+la;},replyReceive:function ma(na){ea(ka,la,'#rprecv',Object.assign(na||{},aa));},parentNode:this};}});}Object.assign(j,{isOn:function s(){return true;}});function k(){return i;}function l(s,t,u){u=u||{};u.init=true;var v=c('FbtraceForcedByServerPolicy').get();if(v.isSampled()){return new j(s,t,u);}else return new h();}function m(s,t){if(!s)throw {name:'ArgumentError',message:'no valid operation specified'};if(!t)throw {name:'ArgumentError',message:'no valid remote:service specified'};}function n(s,t){var u=i,v=void 0;i=s;try{v=t();}finally{i=u;}return v;}var o=function s(t,u){var v=k(),w=u.request,x=false;if(!v.isOn()&&c('FbtraceForcedByServer').forced&&/\/upload\/(?:composer|photos)\/|\/ajax\/composerx\/attachment\/media\//.test(w.uri.toString())){v=l('photo_upload_kludge',String(c('SiteData').revision||'dev'),{policy:'PhotoUpload'});x=true;}if(v.isOn()){var y=x?{policy:'PhotoUpload'}:{};if(w.userActionId)y.user_action_id=w.userActionId;var z=v.requestSend(w.uri.toString(),'www',y);w.fbtraceRemoteNode=z;w.transport.setRequestHeader('X-Fbtrace-Meta',z.metadata());}},p=function s(t,u){u.request.fbtraceRemoteNode.replyReceive({is_last:u.response.is_last,success:true});setTimeout(function(){u.request.fbtraceRemoteNode.parentNode.replySend(true,{});},0);},q=function s(t,u){u.request.fbtraceRemoteNode.replyReceive({is_last:u.response.is_last,success:false,error_code:u.response.error,error_summary:u.response.errorSummary,error_description:u.response.errorDescription});setTimeout(function(){u.request.fbtraceRemoteNode.parentNode.replySend(false,{});},0);},r=function s(t,u){return u.request.fbtraceRemoteNode;};c('Arbiter').subscribe('AsyncRequest/will_send',o);c('Arbiter').subscribe('AsyncRequest/response',c('guardFunction')(r,p));c('Arbiter').subscribe('AsyncRequest/error',c('guardFunction')(r,q));f.exports={defaultNode:k,requestReceive:l,withDefaultNode:n};}),null);
__d('FileFormResetOnSubmit',['DOMQuery','Event','emptyFunction'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k){var l=c('Event').listen(j,'change',c('emptyFunction').thatReturnsFalse,c('Event').Priority.URGENT);try{k();}catch(m){throw m;}finally{l.remove();}}function i(j){'use strict';this._form=j;}i.prototype.enable=function(){'use strict';var j=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(j,0);});};i.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};i.prototype._reset=function(){'use strict';var j=this._form.getRoot();h(j,function(){var k=c('DOMQuery').scry(j,'input[type="file"]');k.forEach(function(l){l.value='';});});};f.exports=i;}),null);
__d('PhotoUtils',['Event','URI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getImagesFromData:function i(j){var k=[];for(var l in j)if(l.indexOf('image')===0)k.push(j[l]);return k;},getFBIDFromData:function i(j){return j&&j.id;},getOriginalImageFromData:function i(j){return j.original||j.download_image;},getDownloadURLFromData:function i(j){var k=this.getOriginalImageFromData(j);if(!k)return null;var l=new (c('URI'))(k.uri);l.addQueryData({dl:1});return l;},getPermalinkFromData:function i(j){return j.permalink;},canViewerMakeCoverPhoto:function i(j){return !!j.can_viewer_make_cover_photo;},getCoverPhotoURLFromData:function i(j){return new (c('URI'))('/profile.php').addQueryData({preview_cover:h.getFBIDFromData(j)});},preload:function i(j,k,l){var m=j.getDimensions();for(var n=0;n<k.length;++n){var o=m.getBestFitImageFromPhoto(k[n],m.getMaxStageDimensions()),p=new Image();l&&c('Event').listen(p,'load',l.bind(null,k[n]));j.getLogger().log(o.uri);p.src=o.uri;}}};f.exports=h;}),null);
__d('SpotlightViewer',['cx','React','Spotlight.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';if(!this.props.open)return null;var l="_n3";if(this.props.className)l+=' '+this.props.className;return (c('React').createElement(c('Spotlight.react'),{onBeforeHide:this.props.onBeforeHide,onHide:this.props.onHide,rootClassName:this.props.rootClassName,shown:this.props.open,key:'photoLayer'},c('React').createElement('div',{className:l,onClick:this.props.onClick},this.props.children)));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('SpotlightViewerImage',['cx','Image.react','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);this.$SpotlightViewerImage3=function(){this.setState({loading:false});}.bind(this);this.state={loading:true};}k.prototype.componentWillReceiveProps=function(l){'use strict';if(l.src!==this.props.src)this.setState({loading:true});};k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_4-od"},this.$SpotlightViewerImage1(),this.$SpotlightViewerImage2());};k.prototype.$SpotlightViewerImage1=function(){'use strict';if(!this.state.loading)return null;return (c('React').createElement(c('XUISpinner.react'),{className:"_enh",size:'large'}));};k.prototype.$SpotlightViewerImage2=function(){'use strict';return (c('React').createElement('div',{className:this.state.loading?"_eni":''},c('React').createElement(c('Image.react'),{onLoad:this.$SpotlightViewerImage3,src:this.props.src,style:{width:this.props.dimensions.x,height:this.props.dimensions.y}})));};f.exports=k;}),null);
__d('SpotlightViewport',['csx','cx','Locale','Parent','React','ReactDOM','Vector','joinClasses'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SpotlightViewport',propTypes:{stageDimensions:j.object.isRequired,useWidth:j.bool},PAGE_TO_PREV_PERCENTAGE:.2,sections:{NONE:null,FORWARD:1,BACKWARD:2},timer:null,getInitialState:function l(){return {currentActiveSection:this.sections.NONE,active:true};},componentDidMount:function l(){this._onMouseEnter();},componentWillUnmount:function l(){if(this.props.fadeInNOut)clearTimeout(this.timer);},_onMouseMove:function l(event){var m=c('ReactDOM').findDOMNode(this),n=c('Vector').getEventPosition(event.nativeEvent),o=c('Vector').getElementPosition(m),p=this.props.useWidth?this.props.stageDimensions.x:c('Vector').getElementDimensions(m).x;if(this.props.fadeInNOut)if(this._isMouseOverActionBars(n)){clearTimeout(this.timer);}else this._onMouseEnter();var q,r=n.x-o.x,s=r/p;if(c('Locale').isRTL()){q=s>1-this.PAGE_TO_PREV_PERCENTAGE;}else q=s<this.PAGE_TO_PREV_PERCENTAGE;if(q){this.setState({currentActiveSection:this.sections.BACKWARD});}else this.setState({currentActiveSection:this.sections.FORWARD});},_onClick:function l(event){var m=this.state.currentActiveSection==this.sections.FORWARD,n=event.target;if(!c('Parent').bySelector(n,"._51an"))this.props.onClick&&this.props.onClick(m,event);},_isMouseOverActionBars:function l(m){return m.y<70||m.y>this.props.stageDimensions.y-70;},_onMouseEnter:function l(){this.setState({active:true});if(this.props.fadeInNOut){clearTimeout(this.timer);this.timer=setTimeout(this._onMouseLeave,1000);}},_onMouseLeave:function l(){this.setState({active:false});},makeActive:function l(){this._onMouseEnter();},render:function l(){var m="_4-of"+(!this.state.active&&!this.props.active?' '+"_50-l":'')+(this.state.currentActiveSection===this.sections.BACKWARD?' '+"_516a":'')+(this.state.currentActiveSection===this.sections.FORWARD?' '+"_516b":'')+(this.props.showLoadingIndicator?' '+"_51jp":'');if(this.props.className)m=c('joinClasses')(m,this.props.className);var n={};if(this.props.stageDimensions){n={height:this.props.stageDimensions.y};if(this.props.useWidth)n.width=this.props.stageDimensions.x;}return (c('React').createElement('div',{className:m,style:n,onClick:this._onClick,onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.props.children,c('React').createElement('div',{className:"_4-og"},c('React').createElement('span',{className:"_4-oh"}),this.props.media,c('React').createElement('div',{className:"_4-oi"}))));}});f.exports=k;}),null);
/*
 * @preserve-header
 *
 * Javascript EXIF Reader 0.1.6
 * Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk, http://blog.nihilogic.dk/
 * Licensed under the MPL License [http://www.nihilogic.dk/licenses/mpl-license.txt]
 */__d("exif/exif",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=(function(){var i={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},j={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},k={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function m(y,event,z){if(y.addEventListener){y.addEventListener(event,z,false);}else if(y.attachEvent)y.attachEvent("on"+event,z);}function n(y){return !!(y.exifdata);}function o(y,z){BinaryAjax(y.src,function(aa){var ba=p(aa.binaryResponse);y.exifdata=ba||{};if(z)z.call(y);});}function p(y){if(y.getByteAt(0)!=255||y.getByteAt(1)!=216)return false;var z=2,aa=y.getLength(),ba;while(z<aa){if(y.getByteAt(z)!=255)return false;ba=y.getByteAt(z+1);if(ba==22400){return s(y,z+4,y.getShortAt(z+2,true)-2);}else if(ba==225){return s(y,z+4,y.getShortAt(z+2,true)-2);}else z+=2+y.getShortAt(z+2,true);}}function q(y,z,aa,ba,ca){var da=y.getShortAt(aa,ca),ea={},fa,ga,ha;for(ha=0;ha<da;ha++){fa=aa+ha*12+2;ga=ba[y.getShortAt(fa,ca)];ea[ga]=r(y,fa,z,aa,ca);}return ea;}function r(y,z,aa,ba,ca){var da=y.getShortAt(z+2,ca),ea=y.getLongAt(z+4,ca),fa=y.getLongAt(z+8,ca)+aa,ga,ha,ia,ja,ka,la;switch(da){case 1:case 7:if(ea==1){return y.getByteAt(z+8,ca);}else{ga=ea>4?fa:(z+8);ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getByteAt(ga+ja);return ha;}case 2:ga=ea>4?fa:(z+8);return y.getStringAt(ga,ea-1);case 3:if(ea==1){return y.getShortAt(z+8,ca);}else{ga=ea>2?fa:(z+8);ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getShortAt(ga+2*ja,ca);return ha;}case 4:if(ea==1){return y.getLongAt(z+8,ca);}else{ha=[];for(var ja=0;ja<ea;ja++)ha[ja]=y.getLongAt(fa+4*ja,ca);return ha;}case 5:if(ea==1){ka=y.getLongAt(fa,ca);la=y.getLongAt(fa+4,ca);ia=new Number(ka/la);ia.numerator=ka;ia.denominator=la;return ia;}else{ha=[];for(ja=0;ja<ea;ja++){ka=y.getLongAt(fa+8*ja,ca);la=y.getLongAt(fa+4+8*ja,ca);ha[ja]=new Number(ka/la);ha[ja].numerator=ka;ha[ja].denominator=la;}return ha;}case 9:if(ea==1){return y.getSLongAt(z+8,ca);}else{ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getSLongAt(fa+4*ja,ca);return ha;}case 10:if(ea==1){return y.getSLongAt(fa,ca)/y.getSLongAt(fa+4,ca);}else{ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getSLongAt(fa+8*ja,ca)/y.getSLongAt(fa+4+8*ja,ca);return ha;}}}function s(y,z){if(y.getStringAt(z,4)!="Exif")return false;var aa,ba,ca,da,ea,fa=z+6;if(y.getShortAt(fa)==18761){aa=false;}else if(y.getShortAt(fa)==19789){aa=true;}else return false;if(y.getShortAt(fa+2,aa)!=42)return false;if(y.getLongAt(fa+4,aa)!=8)return false;ba=q(y,fa,fa+8,j,aa);if(ba.ExifIFDPointer){da=q(y,fa,fa+ba.ExifIFDPointer,i,aa);for(ca in da){switch(ca){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":da[ca]=l[ca][da[ca]];break;case "ExifVersion":case "FlashpixVersion":da[ca]=String.fromCharCode(da[ca][0],da[ca][1],da[ca][2],da[ca][3]);break;case "ComponentsConfiguration":da[ca]=l.Components[da[ca][0]]+l.Components[da[ca][1]]+l.Components[da[ca][2]]+l.Components[da[ca][3]];break;}ba[ca]=da[ca];}}if(ba.GPSInfoIFDPointer){ea=q(y,fa,fa+ba.GPSInfoIFDPointer,k,aa);for(ca in ea){switch(ca){case "GPSVersionID":ea[ca]=ea[ca][0]+"."+ea[ca][1]+"."+ea[ca][2]+"."+ea[ca][3];break;}ba[ca]=ea[ca];}}return ba;}function t(y,z){if(!y.complete)return false;if(!n(y)){o(y,z);}else if(z)z.call(y);return true;}function u(y,z){if(!n(y))return;return y.exifdata[z];}function v(y){if(!n(y))return {};var z,aa=y.exifdata,ba={};for(z in aa)if(aa.hasOwnProperty(z))ba[z]=aa[z];return ba;}function w(y){if(!n(y))return "";var z,aa=y.exifdata,ba="";for(z in aa)if(aa.hasOwnProperty(z))if(typeof aa[z]=="object"){if(aa[z] instanceof Number){ba+=z+" : "+aa[z]+" ["+aa[z].numerator+"/"+aa[z].denominator+"]\r\n";}else ba+=z+" : ["+aa[z].length+" values]\r\n";}else ba+=z+" : "+aa[z]+"\r\n";return ba;}function x(y){return p(y);}return {readFromBinaryFile:x,pretty:w,getTag:u,getAllTags:v,getData:t,Tags:i,TiffTags:j,GPSTags:k,StringValues:l};})();f.exports=h;}),null);
__d('ImageExif',['exif/exif'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(k){this.getByteAt=function(l){return k.getUint8(l);};this.getShortAt=function(l,m){return k.getUint16(l,!m);};this.getSShortAt=function(l,m){return k.getInt16(l,!m);};this.getLongAt=function(l,m){return k.getUint32(l,!m);};this.getSLongAt=function(l,m){return k.getInt32(l,!m);};this.getStringAt=function(l,m){var n=Array(m);for(var o=0;o<m;o++)n.push(String.fromCharCode(this.getByteAt(l+o)));return n.join('');};this.getLength=function(){return k.byteLength;};}function i(k){var l=function m(n){return k.charCodeAt(n)&255;};this.getByteAt=l;this.getShortAt=function(m,n){var o=this.getSShortAt(m,n);return o>0?o:o+65536;};this.getSShortAt=function(m,n){var o=l(m),p=l(m+1);return n?(o<<8)+p:(p<<8)+o;};this.getLongAt=function(m,n){var o=this.getSLongAt(m,n);return o>0?o:o+4294967296;};this.getSLongAt=function(m,n){var o=l(m),p=l(m+1),q=l(m+2),r=l(m+3);return n?(((o<<8)+p<<8)+q<<8)+r:(((r<<8)+q<<8)+p<<8)+o;};this.getStringAt=function(m,n){return k.substr(m,n);};this.getLength=function(){return k.length;};}var j={readFromFile:function k(l,m){var n=new FileReader();n.addEventListener('load',function(event){var o=event.target.result,p=o instanceof ArrayBuffer?this.readFromArrayBuffer(o):this.readFromBinaryString(o);m(p);}.bind(this),false);if(window.DataView){n.readAsArrayBuffer(l);}else n.readAsBinaryString(l);},readFromBinaryString:function k(l){return c('exif/exif').readFromBinaryFile(new i(l));},readFromArrayBuffer:function k(l){return c('exif/exif').readFromBinaryFile(new h(new DataView(l)));}};f.exports=j;}),null);
__d('StringEncoding',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(o,p){var q=new Uint8Array(o),r=0,s=[];while(r<q.length){var t=q[r],u=void 0;if(t>>7===0){u=1;}else if(t>>5===6){t&=31;u=2;}else if(t>>4===14){t&=15;u=3;}else if(t>>3===30){t&=7;u=4;}else if(t>>2===62){t&=3;u=5;}else if(t>>1===126){t&=1;u=6;}else throw new Error('Cannot decode as UTF-8 - '+'unrecognised codepoint header');if(r+u>q.length)throw new Error('Cannot decode as UTF-8 - '+'incomplete codepoint');for(var v=1;v<u;v++){var w=q[r+v];if(w>>6!==2)throw new Error('Cannot decode as UTF-8 - '+'unrecognised codepoint subsequent byte');w&=63;t<<=6;t|=w;}if(t>1114111)throw new Error('Cannot decode as UTF-8 - '+"JavaScript doesn't support codepoints over 0x10FFFF");if(!t)switch(p){case 'error':throw new Error('Cannot decode as UTF-8 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(t);r+=u;}return String.fromCodePoint.apply(String,s);}function i(o){return (o&255)<<8|o>>8;}function j(o,p){if(o.byteLength%2!==0)throw new Error('Cannot decode as UTF-16 - '+'data length mod 2 != 0');var q=new Uint16Array(o),r=0,s=[],t=false;if(q[0]===65279){++r;}else if(q[0]==65534){++r;t=true;}while(r<q.length){var u=q[r];if(t)u=i(u);var v=u;if(u>55295&&u<57344){if((u&64512)!==55296)throw new Error('Cannot decode as UTF-16 - '+'incorrect signature for high surrogate');if(r+1>=q.length)throw new Error('Cannot decode as UTF-16 - '+'incomplete codepoint');++r;var w=q[r];if(t)w=i(w);if((w&64512)!==56320)throw new Error('Cannot decode as UTF-16 - '+'incorrect signature for low surrogate');v=((u&1023)<<10|w&1023)+65536;}if(!v)switch(p){case 'error':throw new Error('Cannot decode as UTF-16 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(v);++r;}return String.fromCodePoint.apply(String,s);}function k(o){return ((o&255)<<24|(o&255<<8)<<8|(o&255<<16)>>8|o>>>24);}function l(o,p){if(o.byteLength%4!==0)throw new Error('Cannot decode as UTF-32 - '+'data length mod 4 != 0');var q=new Uint32Array(o),r=0,s=[],t=false;if(q[0]===65279){++r;}else if(q[0]==4294836224){++r;t=true;}while(r<q.length){var u=q[r];if(t)u=k(u);if(u&2147483648)throw new Error('Cannot decode as UTF-32 - '+'invalid codepoint');if(u>1114111)throw new Error('Cannot decode as UTF-32 - '+"JavaScript doesn't support codepoints over 0x10FFFF");if(!u)switch(p){case 'error':throw new Error('Cannot decode as UTF-32 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(u);++r;}return String.fromCodePoint.apply(String,s);}var m={'utf-8':h,'utf-16':j,'utf-32':l};function n(o,p){if(o){this.$Decoder1=o;}else this.$Decoder1=['utf-8','utf-16','utf-32'];if(!p)p='error';this.$Decoder2=p;for(var q=this.$Decoder1,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t;this.$Decoder3(u);}}n.prototype.getPrecedence=function(){return this.$Decoder1;};n.prototype.decode=function(o){var p=[];for(var q=this.$Decoder1,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t,v=this.$Decoder3(u);try{return v(o,this.$Decoder2);}catch(w){p.push(w);}}throw new Error(p.join(', '));};n.prototype.$Decoder3=function(o){var p=m[o];if(!p)throw new Error('Unknown encoding '+o);return p;};f.exports.Decoder=n;}),null);
__d('ImageMetadata',['regeneratorRuntime','Promise','StringEncoding','ImageExif'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(m){this.$ImageMetadata4=m;this.$ImageMetadata5=new Uint8Array(m);this.$ImageMetadata6();}h.prototype.$ImageMetadata6=function(){var m=0;while(m<this.$ImageMetadata5.length){m=this.$ImageMetadata7(m);if(m===-1)return;var n=this.$ImageMetadata5[m+1],o=i[n];if(!o)return;var p=o.length;if(p===undefined)p=this.$ImageMetadata5[m+2]*256+this.$ImageMetadata5[m+3];this.$ImageMetadata8(m,p,o);if(o.name==='SOS')return;m+=2+p;}};h.prototype.$ImageMetadata8=function(m,n,o){switch(o.name){case 'APP1':if(this.$ImageMetadata9(m+4,j)){this.$ImageMetadata10(m+4+j.length,n-2-j.length);}else if(this.$ImageMetadata9(m+4,k)){this.$ImageMetadata11(m+4+k.length,n-2-k.length);}else if(this.$ImageMetadata9(m+4,l))this.$ImageMetadata12(m+4+l.length,n-2-l.length);break;case 'SOF0':case 'SOF1':case 'SOF2':case 'SOF3':case 'SOF5':case 'SOF6':case 'SOF7':case 'JPG':case 'SOF9':case 'SOF10':case 'SOF11':case 'SOF13':case 'SOF14':case 'SOF15':this.$ImageMetadata13(m+4,n-2);break;}};h.prototype.$ImageMetadata13=function(m,n){var o=this.$ImageMetadata5[m+3]*256+this.$ImageMetadata5[m+4],p=this.$ImageMetadata5[m+1]*256+this.$ImageMetadata5[m+2];if(o>0&&p>0)this.$ImageMetadata3={x:o,y:p};};h.prototype.$ImageMetadata10=function(m,n){var o=emptyFunction;try{emptyFunction=function(){};var p=c('ImageExif').readFromArrayBuffer(this.$ImageMetadata4)||{};}finally{emptyFunction=o;}var q={};for(var r in p){var s=p[r];if(typeof s==='string')s=s.trim();q[r.trim()]=s;}this.$ImageMetadata1=q;};h.prototype.$ImageMetadata11=function(m,n){this.$ImageMetadata2={};var o=this.$ImageMetadata2,p=new (c('StringEncoding').Decoder)(null,'truncate');try{var r=p.decode(this.$ImageMetadata4.slice(m,m+n));}catch(q){return;}for(var s=0;s<r.length;++s){var t=r.indexOf('<GPano:',s);if(t==-1)break;var u=r.indexOf('>',t),v=r.substring(t+1,u).trim(),w=r.indexOf('<',u),x=r.substring(u+1,w).trim();o[v]=x;s=w;}for(var y=0;y<r.length;++y){var z=r.indexOf('GPano:',y);if(z==-1)break;var aa=r.indexOf('=',z),ba=r.substring(z,aa).trim(),ca=r.indexOf('"',z);if(ba.indexOf('>')==-1&&ba.indexOf('<')==-1){var da=r.indexOf('"',ca+1),ea=r.substring(ca+1,da).trim();o[ba]=ea;y=da;}}};h.prototype.$ImageMetadata12=function(m){};h.prototype.$ImageMetadata9=function(m,n){return n.split('').every(function(o){return this.$ImageMetadata5[m++]===o.charCodeAt(0);}.bind(this));};h.prototype.$ImageMetadata7=function(m){for(var n=m;n+1<this.$ImageMetadata5.length;++n)if(this.$ImageMetadata5[n]===255&&this.$ImageMetadata5[n+1]!==0&&this.$ImageMetadata5[n+1]!==255)return n;return -1;};h.prototype.hasExif=function(){return Boolean(this.$ImageMetadata1);};h.prototype.hasXMP=function(){return Boolean(this.$ImageMetadata2);};h.prototype.hasSize=function(){return Boolean(this.$ImageMetadata3);};h.prototype.getExif=function(){if(!this.$ImageMetadata1)throw new Error('Image has no Exif data');return this.$ImageMetadata1;};h.prototype.getXMP=function(){if(!this.$ImageMetadata2)throw new Error('Image has no XMP data');return this.$ImageMetadata2;};h.prototype.getSize=function(){if(!this.$ImageMetadata3)throw new Error('Could not find size data?!');return this.$ImageMetadata3;};h.genMetadataFromBlob=function m(n){return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.t0=h;p.next=3;return c('regeneratorRuntime').awrap(h.$ImageMetadata14(n));case 3:p.t1=p.sent;return p.abrupt('return',new p.t0(p.t1));case 5:case 'end':return p.stop();}},null,this);};h.$ImageMetadata14=function(m){return new (c('Promise'))(function(n,o){var p=new b.FileReader();p.onabort=o;p.onerror=o;p.onload=n;p.readAsArrayBuffer(m);});};var i=[];i[216]={name:'SOI',length:0};i[192]={name:'SOF0'};i[193]={name:'SOF1'};i[194]={name:'SOF2'};i[195]={name:'SOF3'};i[197]={name:'SOF5'};i[198]={name:'SOF6'};i[199]={name:'SOF7'};i[200]={name:'JPG'};i[201]={name:'SOF9'};i[202]={name:'SOF10'};i[203]={name:'SOF11'};i[205]={name:'SOF13'};i[206]={name:'SOF14'};i[207]={name:'SOF15'};i[196]={name:'DHT'};i[219]={name:'DQT'};i[221]={name:'DRI',length:2};i[218]={name:'SOS'};i[208]={name:'RST0',length:0};i[209]={name:'RST1',length:0};i[210]={name:'RST2',length:0};i[211]={name:'RST3',length:0};i[212]={name:'RST4',length:0};i[213]={name:'RST5',length:0};i[214]={name:'RST6',length:0};i[215]={name:'RST7',length:0};i[224]={name:'APP0'};i[225]={name:'APP1'};i[226]={name:'APP2'};i[227]={name:'APP3'};i[228]={name:'APP4'};i[229]={name:'APP5'};i[230]={name:'APP6'};i[231]={name:'APP7'};i[232]={name:'APP8'};i[233]={name:'APP9'};i[234]={name:'APP10'};i[235]={name:'APP11'};i[236]={name:'APP12'};i[237]={name:'APP13'};i[238]={name:'APP14'};i[239]={name:'APP15'};i[254]={name:'COM'};i[217]={name:'EOI',length:0};var j='Exif\0\0',k='http://ns.adobe.com/xap/1.0/\0',l='http://ns.adobe.com/xmp/extension/\0';f.exports=h;}),null);
__d('SphericalImage',['Promise','regeneratorRuntime','ImageMetadata'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=100;function i(u){return new (c('Promise'))(function(v,w){var x=new b.FileReader();x.onabort=w;x.onerror=w;x.onload=function(event){return v(event.target.result);};x.readAsArrayBuffer(u);});}function j(u){if(!u.hasXMP())return false;var v=u.getXMP(),w=Boolean(v['GPano:CroppedAreaImageWidthPixels']&&v['GPano:CroppedAreaImageHeightPixels']&&v['GPano:FullPanoWidthPixels']&&v['GPano:FullPanoHeightPixels']);if(w)return true;var x=u.getSize(),y=Math.abs(x.x-x.y*2)<=2;return Boolean(v['GPano:ProjectionType']==='equirectangular'&&y);}var k={'iPhone 4S':{x:19334,y:3264},'iPhone 5':{x:18521,y:3264},'iPhone 5c':{x:18521,y:3264},'iPhone 5s':{x:17279,y:3264},'iPhone 6':{x:17731,y:3264},'iPhone 6 Plus':{x:17731,y:3264},'iPhone 6s':{x:21729,y:4000},'iPhone 6s Plus':{x:21729,y:4000},'iPhone SE':{x:21729,y:4000},'iPhone 7':{x:21842,y:3884},'iPhone 7 Plus':{x:21842,y:3884},'iPad Air':{x:14810,y:2592},'iPad Air 2':{x:18512,y:3264},'iPad Mini 2':{x:14810,y:2592},'iPad Mini 3':{x:14810,y:2592},'iPad Mini 4':{x:18512,y:3264},'iPad Pro':{x:18512,y:3264}},l={'sm-g90':{minHeight:2200,fullWidth:17000},'sm-n91':{minHeight:2200,fullWidth:17000},'sm-g92':{minHeight:2200,fullWidth:15550},'sm-n92':{minHeight:2200,fullWidth:15550},'sm-g93':{minHeight:2800,fullWidth:20200}};function m(u){if(!u.hasExif())return false;return (o(u)||n(u)||p(u));}function n(u){var v=u.getExif(),w=u.getSize();return (v.Make==='RICOH'&&v.Model==='RICOH THETA S'&&w.x===2*w.y);}function o(u){var v=u.getExif();if(v.Make!='Apple')return false;var w=k[v.Model];if(!w)return false;var x=void 0,y=void 0;if(v.ExifImageWidth&&v.ExifImageLength)if(!y||v.ExifImageWidth>y.x)y={x:v.ExifImageWidth,y:v.ExifImageLength};if(v.ImageWidth&&v.ImageLength)if(!y||v.ImageWidth>y.x)y={x:v.ImageWidth,y:v.ImageLength};if(v.OriginalImageWidth&&v.OriginalImageHeight)if(!y||v.OriginalImageWidth>y.x)y={x:v.OriginalImageWidth,y:v.OriginalImageHeight};if(v.PixelXDimension&&v.PixelYDimension)if(!y||v.PixelXDimension>y.x)y={x:v.PixelXDimension,y:v.PixelYDimension};if(u.hasSize()){x=u.getSize();var z=q(x);if(y){var aa=q(y);if(!r(z,aa))return false;}if(z<2)return false;}var ba=y||x;if(!ba)return false;if(!r(ba.y,w.y,.3))return false;return true;}function p(u){var v=u.getExif(),w=u.getSize(),x=w.x,y=w.y;if(String(v.Make).toLowerCase()!='samsung')return false;var z=String(v.Model).toLowerCase().trim(),aa=null;Object.keys(l).forEach(function(da){if(z.startsWith(da))aa=l[da];});if(!aa)return false;if(v.Orientation===6){var ba=x;x=y;y=ba;}if(y<aa.minHeight)return false;var ca=x/aa.fullWidth*360;if(ca<h||x<2*y)return false;return true;}function q(u){return u.x/u.y;}function r(u,v){var w=arguments.length<=2||arguments[2]===undefined?.05:arguments[2];return u>(1-w)*v&&u<(1+w)*v;}function s(u){return (j(u)||m(u));}function t(u){var v,w;return c('regeneratorRuntime').async(function x(y){while(1)switch(y.prev=y.next){case 0:y.next=2;return c('regeneratorRuntime').awrap(i(u));case 2:v=y.sent;w=new (c('ImageMetadata'))(v);return y.abrupt('return',s(w));case 5:case 'end':return y.stop();}},null,this);}f.exports={isSphericalBlob:t,isSphericalMetadata:s};}),null);
__d('XComposerPhotoUploader',['regeneratorRuntime','Promise','AsyncUploadRequest','ReactComposerMediaUtils','FileInputUploader','JSLogger','PhotosMimeType','PhotosUploadID','SphericalPhotoConfig','SphericalImage','curry','emptyFunction','performanceNow'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=b.URL||b.webkitURL||{};function i(j){this.$XComposerPhotoUploader2=j.uploadData||{};this.$XComposerPhotoUploader1=j.uploadEndpoint;this.$XComposerPhotoUploader3=j.retryLimit;this.$XComposerPhotoUploader4=j.concurrentLimit;this.$XComposerPhotoUploader5=j.resizer;this.$XComposerPhotoUploader6=j.onUploadEnqueued||c('emptyFunction');this.$XComposerPhotoUploader7=j.onUploadsEnqueued||c('emptyFunction');this.$XComposerPhotoUploader8=j.onResizeStart||c('emptyFunction');this.$XComposerPhotoUploader11=j.onResizeProgress||c('emptyFunction');this.$XComposerPhotoUploader9=j.onResizeSuccess||c('emptyFunction');this.$XComposerPhotoUploader10=j.onResizeFailure||c('emptyFunction');this.$XComposerPhotoUploader12=j.onUploadIsSpherical||c('emptyFunction');this.$XComposerPhotoUploader13=j.onUploadSent||c('emptyFunction');this.$XComposerPhotoUploader14=j.onUploadStart||c('emptyFunction');this.$XComposerPhotoUploader15=j.onUploadProgress||c('emptyFunction');this.$XComposerPhotoUploader16=j.onUploadSuccess||c('emptyFunction');this.$XComposerPhotoUploader17=j.onUploadFailure||c('emptyFunction');this.$XComposerPhotoUploader18=c('JSLogger').create('composer');}i.prototype.upload=function(j,k){k=k||0;var l=Object.assign({},this.$XComposerPhotoUploader2),m=null;if(!this.$XComposerPhotoUploader19(j)){var n=c('PhotosUploadID').getNewID();j.uploadID=n;l.upload_id=n;this.$XComposerPhotoUploader6({uploadID:n,fileName:j.value.split('/').pop().split('\\').pop(),fileURL:h.createObjectURL?h.createObjectURL(j):null});}else{m=Array.from(j.files);m=m.filter(function(r){return !c('ReactComposerMediaUtils').hasVideos([r.name]);});if(m.length===0)return;var o=m.length+k;m.forEach(function(r){if(!r.uploadID)r.uploadID=c('PhotosUploadID').getNewID();var s=false;if(c('SphericalPhotoConfig').spherical_photo_www_upload)s=null;this.$XComposerPhotoUploader6({uploadID:r.uploadID,fileName:r.name,isSpherical:s,fileURL:h.createObjectURL?h.createObjectURL(r):null});}.bind(this));if(!c('SphericalPhotoConfig').spherical_photo_www_upload||!c('SphericalPhotoConfig').www_spherical_photo_mmp&&o>1)l.allow_spherical_photo=false;}this.$XComposerPhotoUploader7();var p=new (c('FileInputUploader'))(j).setURI(this.$XComposerPhotoUploader1).setData(l).setAllowCrossOrigin(true).setNetworkErrorRetryLimit(this.$XComposerPhotoUploader3).setUploadInParallel(true);if(m&&m.length>0){p.setFiles({farr:m});if(this.$XComposerPhotoUploader5){p.setPreprocessHandler(this.$XComposerPhotoUploader20.bind(this));}else p.setPreprocessHandler(this.$XComposerPhotoUploader21.bind(this));if(this.$XComposerPhotoUploader4)p.setConcurrentLimit(this.$XComposerPhotoUploader4);}p.subscribe('progress',function(r,s){return (this.$XComposerPhotoUploader15(this.$XComposerPhotoUploader22(s,j),s));}.bind(this));p.subscribe('failure',function(r,s){return (this.$XComposerPhotoUploader17(this.$XComposerPhotoUploader22(s,j),s,m));}.bind(this));p.subscribe('start',function(r,s){return (this.$XComposerPhotoUploader14(this.$XComposerPhotoUploader22(s,j),s));}.bind(this));p.subscribe('success',function(r,s){return (this.$XComposerPhotoUploader16(this.$XComposerPhotoUploader22(s,j),s));}.bind(this));try{p.send();this.$XComposerPhotoUploader13(j);}catch(q){this.$XComposerPhotoUploader18.error('error_send_unpublished_files',q);throw q;}};i.prototype.getAsyncUploadRequest=function(j,k){var l=new (c('AsyncUploadRequest'))().setData(Object.assign({},k&&k.data,this.$XComposerPhotoUploader2)).setFiles({farr:j}).setAllowCrossOrigin(true).setURI(this.$XComposerPhotoUploader1);if(this.$XComposerPhotoUploader4)l.setLimit(this.$XComposerPhotoUploader4);if(this.$XComposerPhotoUploader5)l.setPreprocessHandler(this.$XComposerPhotoUploader20.bind(this));l.subscribe('start',function(m,n){return (this.$XComposerPhotoUploader14(n.getFile().uploadID,{upload:n}));}.bind(this));l.subscribe('progress',function(m,n){return (this.$XComposerPhotoUploader15(n.getFile().uploadID,{upload:n,event:n.getProgressEvent()}));}.bind(this));l.subscribe('success',function(m,n){return (this.$XComposerPhotoUploader16(n.getFile().uploadID,{upload:n,response:n.getResponse()}));}.bind(this));l.subscribe('failure',function(m,n){return (this.$XComposerPhotoUploader17(n.getFile().uploadID,{upload:n,response:n.getResponse()},j));}.bind(this));return l;};i.prototype.$XComposerPhotoUploader22=function(j,k){if(j.upload){return j.upload.getFile().uploadID;}else return k.uploadID;};i.prototype.$XComposerPhotoUploader21=function(j,k){(function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader23(j,k));case 2:return n.abrupt('return',n.sent);case 3:case 'end':return n.stop();}},null,this);}).bind(this)().done();};i.prototype.$XComposerPhotoUploader23=function j(k,l){var m,n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:m=k.getFile();p.next=3;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader24(m));case 3:n=p.sent;this.$XComposerPhotoUploader12(m,n);l(k);case 6:case 'end':return p.stop();}},null,this);};i.prototype.$XComposerPhotoUploader20=function(j,k){(function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader25(j,k));case 2:return n.abrupt('return',n.sent);case 3:case 'end':return n.stop();}},null,this);}).bind(this)().done();};i.prototype.$XComposerPhotoUploader24=function j(k){return c('regeneratorRuntime').async(function l(m){while(1)switch(m.prev=m.next){case 0:m.next=2;return c('regeneratorRuntime').awrap(c('SphericalImage').isSphericalBlob(k));case 2:return m.abrupt('return',m.sent);case 3:case 'end':return m.stop();}},null,this);};i.prototype.$XComposerPhotoUploader26=function(j){return this.$XComposerPhotoUploader27(this.$XComposerPhotoUploader5.resizeBlob.bind(this.$XComposerPhotoUploader5),j);};i.prototype.$XComposerPhotoUploader28=function(j){return this.$XComposerPhotoUploader27(this.$XComposerPhotoUploader5.resize360Blob.bind(this.$XComposerPhotoUploader5),j);};i.prototype.$XComposerPhotoUploader27=function(j,k){var l=c('curry')(this.$XComposerPhotoUploader11,k.uploadID),m=function(){return this.$XComposerPhotoUploader8(k);}.bind(this);return new (c('Promise'))(function(n,o){m();j(k,function(p,q,r){if(p){o(p);}else if(r){n(null);}else n(q);},l);});};i.prototype.$XComposerPhotoUploader25=function j(k,l){var m,n,o,p,q,r;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:m=k.getFile();if(!(!m||!c('PhotosMimeType').isJpeg(m.type))){t.next=5;break;}this.$XComposerPhotoUploader12(m,false);l(k);return t.abrupt('return');case 5:n=c('performanceNow')();t.prev=6;o=false;if(!c('SphericalPhotoConfig').spherical_photo_www_upload){t.next=12;break;}t.next=11;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader24(m));case 11:o=t.sent;case 12:if(!o){t.next=19;break;}this.$XComposerPhotoUploader12(m,true);t.next=16;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader28(m));case 16:p=t.sent;t.next=23;break;case 19:this.$XComposerPhotoUploader12(m,false);t.next=22;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader26(m));case 22:p=t.sent;case 23:if(p){p.uploadID=m.uploadID;p.name=m.name;k.setFile(p);}q=p===null;k.getFile().filename=m.name;this.$XComposerPhotoUploader9(m,p||m,q,c('performanceNow')()-n);t.next=34;break;case 29:t.prev=29;t.t0=t['catch'](6);r=c('performanceNow')()-n;this.$XComposerPhotoUploader10(m,p||m,t.t0,r);case 34:l(k);case 35:case 'end':return t.stop();}},null,this,[[6,29]]);};i.prototype.$XComposerPhotoUploader19=function(j){return !!j.files&&c('AsyncUploadRequest').isSupported();};f.exports=i;}),null);
__d('Sticker.react',['cx','fbt','Arbiter','Image.react','MessengerHotLikeSVG.react','React','ReactDOM','PaddedStickerConfig','StickerConstants','emptyFunction','getElementPosition','getObjectValues','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=83,l=5000,m=10,n={CLICK:'click',HOVER:'hover',LOAD_AND_HOVER:'load_and_hover'},o=c('React').createClass({displayName:'Sticker',propTypes:{accessibilityLabel:j.string,animationTrigger:j.oneOf(c('getObjectValues')(n)),forceCursorPointer:j.bool,frameCount:j.number.isRequired,frameRate:j.number,framesPerCol:j.number.isRequired,framesPerRow:j.number.isRequired,onAttachmentLoad:j.func,onStickerClick:j.func,packID:j.string,packName:j.string,sourceURI:j.string.isRequired,sourceWidth:j.number.isRequired,sourceHeight:j.number.isRequired,spriteURI:j.string,stickerID:j.string,subscribedThreadID:j.string,testID:j.string},getInitialState:function p(){return {index:0,hasAnimated:false,unsubscribeID:null};},getDefaultProps:function p(){return {accessibilityLabel:'',forceCursorPointer:false,frameRate:k,onStickerClick:c('emptyFunction'),packID:null,packName:''};},componentDidMount:function p(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._stopIntervalID=0;if(this.props.animationTrigger===n.LOAD_AND_HOVER&&this.props.frameCount>1&&this.props.spriteURI)this.startAnimation();if(this.props.subscribedThreadID&&this.props.frameCount>1){var q=c('Arbiter').subscribe(this.props.subscribedThreadID,function(r,s){this.isScrolledIntoView(s.scrollTop,s.viewHeight,s.top);}.bind(this));this.setState({unsubscribeID:q});}},componentWillUnmount:function p(){if(this.state.unsubscribeID)c('Arbiter').unsubscribe(this.state.unsubscribeID);if(this.isAnimating())clearInterval(this._stopIntervalID);},isAnimating:function p(){return !!this._stopIntervalID;},getWidth:function p(){return Math.floor(this.props.sourceWidth);},getHeight:function p(){return Math.floor(this.props.sourceHeight);},preloadSprite:function p(){var q=new window.Image();q.onload=function(){if(this.isMounted()&&!this.state.hasAnimated){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate);}}.bind(this);if(c('PaddedStickerConfig').ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){q.src=this.props.paddedSpriteURI;}else q.src=this.props.spriteURI;},isScrolledIntoView:function p(q,r,s){var t=c('getElementPosition')(c('ReactDOM').findDOMNode(this)),u=q+t.y-s,v=q+r,w=u+t.height;if(this.props.frameCount>1&&!this.state.hasAnimated&&w-m<=v&&u+m>=q)this.startAnimation();},startAnimation:function p(){if(!this.state.hasAnimated&&this.props.spriteURI){this.preloadSprite();}else if(!this.isAnimating()){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate);}},stopAnimation:function p(){this.setState({index:0});clearInterval(this._stopIntervalID);this._stopIntervalID=0;},toggleAnimation:function p(){if(this.isAnimating()){this.stopAnimation();}else this.startAnimation();},shouldStopAnimating:function p(){var q=this.state.index%this.props.frameCount;if(!(q===0&&this.state.index*this.props.frameRate>l))return false;if(this.props.animationTrigger===n.CLICK)return true;return !this.state.isHovered;},incrementFrameIndex:function p(){if(this.shouldStopAnimating()){this.stopAnimation();}else this.setState({index:this.state.index+1});},getStyle:function p(){var q=0,r=this.props.spriteURI;if(c('PaddedStickerConfig').ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){r=this.props.paddedSpriteURI;var s=240/Math.min(this.getHeight(),this.getWidth());q=Math.floor(c('StickerConstants').SPRITE_PADDING/s);}var t=this.state.index%this.props.frameCount,u=t%this.props.framesPerRow*(this.getWidth()+q*2)+q,v=Math.floor(t/this.props.framesPerRow)*(this.getHeight()+q*2)+q,w=this.props.frameCount>1&&this.props.animationTrigger===n.CLICK||this._isStickerClickable(this.props.packID),x=this.props.forceCursorPointer||w?'pointer':'default';if(!this.state.hasAnimated||!this.props.spriteURI){return {backgroundImage:this._isHotLike()?null:'url('+this.props.sourceURI+')',backgroundRepeat:'no-repeat',backgroundSize:this.getWidth()+'px '+this.getHeight()+'px',cursor:x,height:this.getHeight(),width:this.getWidth()};}else return {backgroundImage:'url('+r+')',backgroundPosition:-u+'px '+ -v+'px',backgroundSize:(this.getWidth()+q*2)*this.props.framesPerRow+'px '+(this.getHeight()+q*2)*this.props.framesPerCol+'px',cursor:x,height:this.getHeight(),width:this.getWidth(),imageRendering:'-webkit-optimize-contrast'};},_isStickerClickable:function p(q){return q&&q!=c('StickerConstants').MOBILE_LIKE_STICKER_PACK_ID&&q!=c('StickerConstants').GRAVEYARD_PACK_ID;},onStickerClick:function p(){if(!this._isStickerClickable(this.props.packID))return;if(this.props.onStickerClick)this.props.onStickerClick(this.props.packID,this.props.stickerID);},mouseLeft:function p(){this.setState({isHovered:false});},mouseEntered:function p(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation();},tabFocusSelected:function p(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation();},tabFocusUnselected:function p(){this.setState({isHovered:false});},getAriaLabel:function p(){return i._("{pack name} {sticker name} sticker",[i.param('pack name',this.props.packName),i.param('sticker name',this.props.accessibilityLabel)]);},render:function p(){var q=void 0,r=void 0;if(this.props.animationTrigger===n.CLICK&&this.props.frameCount>1&&this.props.spriteURI){q=true;}else if((this.props.animationTrigger===n.HOVER||this.props.animationTrigger===n.LOAD_AND_HOVER)&&this.props.frameCount>1&&this.props.spriteURI)r=true;var s=q?this.toggleAnimation:null;if(this.props.packID)s=this.onStickerClick;var t=this.props.className,u=null;if(this._isHotLike()){t=c('joinClasses')(t,"_576q");u=c('React').createElement(c('MessengerHotLikeSVG.react'),{color:this.props.customColor});}return (c('React').createElement('div',{'aria-label':this.getAriaLabel(),className:t,'data-testid':this.props.testID,tabIndex:'0',role:'img',style:this.getStyle(),onClick:s,onMouseEnter:r?this.mouseEntered:null,onMouseLeave:r?this.mouseLeft:null,onFocus:this.tabFocusSelected,onBlur:this.tabFocusUnselected},u));},_isHotLike:function p(){if(!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect)return (this.props.stickerID===c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||this.props.stickerID===c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||this.props.stickerID===c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID);return false;}});f.exports=o;}),null);
__d('FormSubmitOnChange',['Event','submitForm'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._form=i;}h.prototype.enable=function(){'use strict';this._listener=c('Event').listen(this._form.getRoot(),'change',this._submit.bind(this));};h.prototype.disable=function(){'use strict';this._listener.remove();this._listener=null;};h.prototype._submit=function(){'use strict';c('submitForm')(this._form.getRoot());};Object.assign(h.prototype,{_listener:null});f.exports=h;}),null);
__d('AbstractDialogFitHeight',['csx','cx','CSS','DOM','Event','Style','SubscriptionsHandler','Vector','throttle'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=450,k=100,l=67,m=67;function n(o){'use strict';this.$AbstractDialogFitHeight1=o;}n.prototype.enable=function(){'use strict';this.$AbstractDialogFitHeight2=new (c('SubscriptionsHandler'))();this.$AbstractDialogFitHeight2.addSubscriptions(this.$AbstractDialogFitHeight1.subscribe('beforeshow',this.$AbstractDialogFitHeight3.bind(this)),c('Event').listen(window,'resize',c('throttle')(this.$AbstractDialogFitHeight3.bind(this))));this.$AbstractDialogFitHeight4=c('DOM').find(this.$AbstractDialogFitHeight1.getRoot(),"._4-i2");c('CSS').addClass(this.$AbstractDialogFitHeight4,"_5pfh");this.$AbstractDialogFitHeight5=k;if(c('DOM').scry(this.$AbstractDialogFitHeight1.getRoot(),"._4-i0").length)this.$AbstractDialogFitHeight5+=l;if(c('DOM').scry(this.$AbstractDialogFitHeight1.getRoot(),"._5a8u").length)this.$AbstractDialogFitHeight5+=m;};n.prototype.disable=function(){'use strict';this.$AbstractDialogFitHeight2.release();this.$AbstractDialogFitHeight2=null;c('CSS').removeClass(this.$AbstractDialogFitHeight4,"_5pfh");};n.prototype.$AbstractDialogFitHeight3=function(){'use strict';var o=c('Vector').getViewportDimensions().y,p=o-this.$AbstractDialogFitHeight5;c('Style').set(this.$AbstractDialogFitHeight4,this.getHeightProperty(),Math.max(j,p)+'px');this.$AbstractDialogFitHeight1.updatePosition();};f.exports=n;}),null);
__d('DialogFitHeight',['AbstractDialogFitHeight'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AbstractDialogFitHeight'));i=h&&h.prototype;j.prototype.getHeightProperty=function(){'use strict';return 'height';};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('getViewerRecordID',['RelayStore'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('RelayStore').getStoreData();function i(){return h.getCachedStore().getDataID('viewer');}f.exports=i;}),null);
__d("XWebGraphQLQueryController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/webgraphql\/query\/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"}});}),null);
__d('WebGraphQLQueryHelper',['XWebGraphQLQueryController'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={getExports:function h(i){var j=i.controller,k=j===undefined?c('XWebGraphQLQueryController'):j,l=i.docID,m=i.queryID;return {getQueryID:function n(){return m;},getURI:function n(o){var p=k.getURIBuilder().setFBID('query_id',m);if(o)p.setString('variables',JSON.stringify(o));return p.getURI();}};}};}),null);